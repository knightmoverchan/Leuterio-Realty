if (self.CavalryLogger) { CavalryLogger.start_js(["TboVo"]); }

__d("SubscribeStatuses",[],(function a(b,c,d,e,f,g){f.exports={CANNOT_SUBSCRIBE:"CANNOT_SUBSCRIBE",IS_SUBSCRIBED:"IS_SUBSCRIBED",CAN_SUBSCRIBE:"CAN_SUBSCRIBE"}}),null);
__d("CameraPostDirectMarkSeenMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1644150182303893"};j.getQueryID=function(){"use strict";return"171816796723339"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("CameraPostLoggingEvents",[],(function a(b,c,d,e,f,g){"use strict";f.exports={SEND_REPLY_ATTEMPT:"send_direct_reply_attempted",SEND_REPLY_SUCCESS:"send_direct_reply_success",SEND_REPLY_FAILURE:"send_direct_reply_failure",THREAD_VIEWED:"view",THREAD_MARK_SEEN_ATTEMPT:"mark_thread_seen_attempted",THREAD_MARK_SEEN_SUCCESS:"mark_thread_seen_success",THREAD_MARK_SEEN_FAILURE:"mark_thread_seen_failure",DIRECT_VIEWER_CLICKOUT:"clickout"}}),null);
__d("CameraPostQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"860699360721426"};j.getQueryID=function(){"use strict";return"1311047782354100"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("CameraPostRepliesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1494166853955273"};j.getQueryID=function(){"use strict";return"1468697053209427"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("CameraPostReplyMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1459763854077111"};j.getQueryID=function(){"use strict";return"1849675045338105"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("CameraPostUserQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1652248708148952"};j.getQueryID=function(){"use strict";return"143159039576179"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("DirectMessagingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$DirectMessagingTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:DirectMessagingLoggerConfig",this.$DirectMessagingTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$DirectMessagingTypedLogger1={};return this};h.prototype.updateData=function(j){this.$DirectMessagingTypedLogger1=babelHelpers["extends"]({},this.$DirectMessagingTypedLogger1,j);return this};h.prototype.setAccountstatus=function(j){this.$DirectMessagingTypedLogger1.accountstatus=j;return this};h.prototype.setActionSource=function(j){this.$DirectMessagingTypedLogger1.action_source=j;return this};h.prototype.setAppID=function(j){this.$DirectMessagingTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$DirectMessagingTypedLogger1.appversion=j;return this};h.prototype.setBackstagePostID=function(j){this.$DirectMessagingTypedLogger1.backstage_post_id=j;return this};h.prototype.setBackstageThreadID=function(j){this.$DirectMessagingTypedLogger1.backstage_thread_id=j;return this};h.prototype.setBadgingNumber=function(j){this.$DirectMessagingTypedLogger1.badging_number=j;return this};h.prototype.setBlacklistedStoriesUsersCount=function(j){this.$DirectMessagingTypedLogger1.blacklisted_stories_users_count=j;return this};h.prototype.setCameraPostType=function(j){this.$DirectMessagingTypedLogger1.camera_post_type=j;return this};h.prototype.setCameraStoryPromotionID=function(j){this.$DirectMessagingTypedLogger1.camera_story_promotion_id=j;return this};h.prototype.setClientCameraPostTrackingKey=function(j){this.$DirectMessagingTypedLogger1.client_camera_post_tracking_key=j;return this};h.prototype.setClientIsReplay=function(j){this.$DirectMessagingTypedLogger1.client_is_replay=j;return this};h.prototype.setClientMediaContentID=function(j){this.$DirectMessagingTypedLogger1.client_media_content_id=j;return this};h.prototype.setClientMediaID=function(j){this.$DirectMessagingTypedLogger1.client_media_id=j;return this};h.prototype.setClientMediaIdsStrings=function(j){this.$DirectMessagingTypedLogger1.client_media_ids_strings=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setClientSessionID=function(j){this.$DirectMessagingTypedLogger1.client_session_id=j;return this};h.prototype.setClientSessionTime=function(j){this.$DirectMessagingTypedLogger1.client_session_time=j;return this};h.prototype.setClientShareSheetID=function(j){this.$DirectMessagingTypedLogger1.client_share_sheet_id=j;return this};h.prototype.setClientViewerSessionID=function(j){this.$DirectMessagingTypedLogger1.client_viewer_session_id=j;return this};h.prototype.setClienttime=function(j){this.$DirectMessagingTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$DirectMessagingTypedLogger1.containermodule=j;return this};h.prototype.setCount=function(j){this.$DirectMessagingTypedLogger1.count=j;return this};h.prototype.setCountry=function(j){this.$DirectMessagingTypedLogger1.country=j;return this};h.prototype.setDeviceid=function(j){this.$DirectMessagingTypedLogger1.deviceid=j;return this};h.prototype.setDirectDataSessionID=function(j){this.$DirectMessagingTypedLogger1.direct_data_session_id=j;return this};h.prototype.setDirectGroup=function(j){this.$DirectMessagingTypedLogger1.direct_group=j;return this};h.prototype.setDirectRecipients=function(j){this.$DirectMessagingTypedLogger1.direct_recipients=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setDirectRecipientsSize=function(j){this.$DirectMessagingTypedLogger1.direct_recipients_size=j;return this};h.prototype.setDirectSessionID=function(j){this.$DirectMessagingTypedLogger1.direct_session_id=j;return this};h.prototype.setDirectSpaces=function(j){this.$DirectMessagingTypedLogger1.direct_spaces=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setEventStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.event_stories_in_tray=j;return this};h.prototype.setEventname=function(j){this.$DirectMessagingTypedLogger1.eventname=j;return this};h.prototype.setExtraClientData=function(j){this.$DirectMessagingTypedLogger1.extra_client_data=j;return this};h.prototype.setFirstView=function(j){this.$DirectMessagingTypedLogger1.first_view=j;return this};h.prototype.setFolloweeStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.followee_stories_in_tray=j;return this};h.prototype.setFriendStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.friend_stories_in_tray=j;return this};h.prototype.setGesture=function(j){this.$DirectMessagingTypedLogger1.gesture=j;return this};h.prototype.setGroupRecipients=function(j){this.$DirectMessagingTypedLogger1.group_recipients=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setGroupRecipientsSize=function(j){this.$DirectMessagingTypedLogger1.group_recipients_size=j;return this};h.prototype.setGroupStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.group_stories_in_tray=j;return this};h.prototype.setHasMyStory=function(j){this.$DirectMessagingTypedLogger1.has_my_story=j;return this};h.prototype.setHasNewContent=function(j){this.$DirectMessagingTypedLogger1.has_new_content=j;return this};h.prototype.setHasNewReactions=function(j){this.$DirectMessagingTypedLogger1.has_new_reactions=j;return this};h.prototype.setHasNewViews=function(j){this.$DirectMessagingTypedLogger1.has_new_views=j;return this};h.prototype.setHasNuxStory=function(j){this.$DirectMessagingTypedLogger1.has_nux_story=j;return this};h.prototype.setInspirationGroupSession=function(j){this.$DirectMessagingTypedLogger1.inspiration_group_session=j;return this};h.prototype.setInstagramMediaID=function(j){this.$DirectMessagingTypedLogger1.instagram_media_id=j;return this};h.prototype.setInstagramUserID=function(j){this.$DirectMessagingTypedLogger1.instagram_user_id=j;return this};h.prototype.setInterface=function(j){this.$DirectMessagingTypedLogger1["interface"]=j;return this};h.prototype.setIsCamera=function(j){this.$DirectMessagingTypedLogger1.is_camera=j;return this};h.prototype.setIsFromStory=function(j){this.$DirectMessagingTypedLogger1.is_from_story=j;return this};h.prototype.setIsStory=function(j){this.$DirectMessagingTypedLogger1.is_story=j;return this};h.prototype.setIsemployee=function(j){this.$DirectMessagingTypedLogger1.isemployee=j;return this};h.prototype.setLiveStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.live_stories_in_tray=j;return this};h.prototype.setLiveVideoID=function(j){this.$DirectMessagingTypedLogger1.live_video_id=j;return this};h.prototype.setMediaIndex=function(j){this.$DirectMessagingTypedLogger1.media_index=j;return this};h.prototype.setMediaOwner=function(j){this.$DirectMessagingTypedLogger1.media_owner=j;return this};h.prototype.setMediaOwnerTypeString=function(j){this.$DirectMessagingTypedLogger1.media_owner_type_string=j;return this};h.prototype.setMediaType=function(j){this.$DirectMessagingTypedLogger1.media_type=j;return this};h.prototype.setMessageID=function(j){this.$DirectMessagingTypedLogger1.message_id=j;return this};h.prototype.setMessageLength=function(j){this.$DirectMessagingTypedLogger1.message_length=j;return this};h.prototype.setMessageType=function(j){this.$DirectMessagingTypedLogger1.message_type=j;return this};h.prototype.setMobileNetworkType=function(j){this.$DirectMessagingTypedLogger1.mobile_network_type=j;return this};h.prototype.setMontageMessageID=function(j){this.$DirectMessagingTypedLogger1.montage_message_id=j;return this};h.prototype.setMutationID=function(j){this.$DirectMessagingTypedLogger1.mutation_id=j;return this};h.prototype.setName=function(j){this.$DirectMessagingTypedLogger1.name=j;return this};h.prototype.setNumParticipants=function(j){this.$DirectMessagingTypedLogger1.num_participants=j;return this};h.prototype.setNumberBadges=function(j){this.$DirectMessagingTypedLogger1.number_badges=j;return this};h.prototype.setNumberLiveStories=function(j){this.$DirectMessagingTypedLogger1.number_live_stories=j;return this};h.prototype.setNumberMedia=function(j){this.$DirectMessagingTypedLogger1.number_media=j;return this};h.prototype.setNumberNewRows=function(j){this.$DirectMessagingTypedLogger1.number_new_rows=j;return this};h.prototype.setNumberNewStories=function(j){this.$DirectMessagingTypedLogger1.number_new_stories=j;return this};h.prototype.setNumberReactions=function(j){this.$DirectMessagingTypedLogger1.number_reactions=j;return this};h.prototype.setNumberRows=function(j){this.$DirectMessagingTypedLogger1.number_rows=j;return this};h.prototype.setNumberStories=function(j){this.$DirectMessagingTypedLogger1.number_stories=j;return this};h.prototype.setNumberViewers=function(j){this.$DirectMessagingTypedLogger1.number_viewers=j;return this};h.prototype.setOtherParticipant=function(j){this.$DirectMessagingTypedLogger1.other_participant=j;return this};h.prototype.setPageStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.page_stories_in_tray=j;return this};h.prototype.setPrivacyMode=function(j){this.$DirectMessagingTypedLogger1.privacy_mode=j;return this};h.prototype.setProductSurface=function(j){this.$DirectMessagingTypedLogger1.product_surface=j;return this};h.prototype.setPromotionStoriesInTray=function(j){this.$DirectMessagingTypedLogger1.promotion_stories_in_tray=j;return this};h.prototype.setRawclienttime=function(j){this.$DirectMessagingTypedLogger1.rawclienttime=j;return this};h.prototype.setReactionID=function(j){this.$DirectMessagingTypedLogger1.reaction_id=j;return this};h.prototype.setReactionType=function(j){this.$DirectMessagingTypedLogger1.reaction_type=j;return this};h.prototype.setReadStories=function(j){this.$DirectMessagingTypedLogger1.read_stories=j;return this};h.prototype.setReason=function(j){this.$DirectMessagingTypedLogger1.reason=j;return this};h.prototype.setReplaysLeft=function(j){this.$DirectMessagingTypedLogger1.replays_left=j;return this};h.prototype.setReplyCount=function(j){this.$DirectMessagingTypedLogger1.reply_count=j;return this};h.prototype.setRowIndex=function(j){this.$DirectMessagingTypedLogger1.row_index=j;return this};h.prototype.setRowStatus=function(j){this.$DirectMessagingTypedLogger1.row_status=j;return this};h.prototype.setSendKey=function(j){this.$DirectMessagingTypedLogger1.send_key=j;return this};h.prototype.setServerPostSource=function(j){this.$DirectMessagingTypedLogger1.server_post_source=j;return this};h.prototype.setServertime=function(j){this.$DirectMessagingTypedLogger1.servertime=j;return this};h.prototype.setSoftDeletedStoryThreadIds=function(j){this.$DirectMessagingTypedLogger1.soft_deleted_story_thread_ids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setSource=function(j){this.$DirectMessagingTypedLogger1.source=j;return this};h.prototype.setSourceThreadID=function(j){this.$DirectMessagingTypedLogger1.source_thread_id=j;return this};h.prototype.setStoryIndex=function(j){this.$DirectMessagingTypedLogger1.story_index=j;return this};h.prototype.setStoryMediaIds=function(j){this.$DirectMessagingTypedLogger1.story_media_ids=c("GeneratedLoggerUtils").serializeMap(j);return this};h.prototype.setStoryOwner=function(j){this.$DirectMessagingTypedLogger1.story_owner=j;return this};h.prototype.setStoryOwnerFbids=function(j){this.$DirectMessagingTypedLogger1.story_owner_fbids=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setStoryOwnerType=function(j){this.$DirectMessagingTypedLogger1.story_owner_type=j;return this};h.prototype.setStoryRankingScores=function(j){this.$DirectMessagingTypedLogger1.story_ranking_scores=c("GeneratedLoggerUtils").serializeMap(j);return this};h.prototype.setStoryThreadIds=function(j){this.$DirectMessagingTypedLogger1.story_thread_ids=c("GeneratedLoggerUtils").serializeMap(j);return this};h.prototype.setTargetID=function(j){this.$DirectMessagingTypedLogger1.target_id=j;return this};h.prototype.setThreadCount=function(j){this.$DirectMessagingTypedLogger1.thread_count=j;return this};h.prototype.setThreadID=function(j){this.$DirectMessagingTypedLogger1.thread_id=j;return this};h.prototype.setThreadViewIdentifier=function(j){this.$DirectMessagingTypedLogger1.thread_view_identifier=j;return this};h.prototype.setTrackingString=function(j){this.$DirectMessagingTypedLogger1.tracking_string=j;return this};h.prototype.setTraySessionID=function(j){this.$DirectMessagingTypedLogger1.tray_session_id=j;return this};h.prototype.setTriggerSource=function(j){this.$DirectMessagingTypedLogger1.trigger_source=j;return this};h.prototype.setTruePromptID=function(j){this.$DirectMessagingTypedLogger1.true_prompt_id=j;return this};h.prototype.setUnifiedPrivacyMode=function(j){this.$DirectMessagingTypedLogger1.unified_privacy_mode=j;return this};h.prototype.setUnreadStories=function(j){this.$DirectMessagingTypedLogger1.unread_stories=j;return this};h.prototype.setVC=function(j){this.$DirectMessagingTypedLogger1.vc=j;return this};h.prototype.setWhitelistedStoriesUsersCount=function(j){this.$DirectMessagingTypedLogger1.whitelisted_stories_users_count=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$DirectMessagingTypedLogger1=babelHelpers["extends"]({},this.$DirectMessagingTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={accountstatus:true,action_source:true,appid:true,appversion:true,backstage_post_id:true,backstage_thread_id:true,badging_number:true,blacklisted_stories_users_count:true,camera_post_type:true,camera_story_promotion_id:true,client_camera_post_tracking_key:true,client_is_replay:true,client_media_content_id:true,client_media_id:true,client_media_ids_strings:true,client_session_id:true,client_session_time:true,client_share_sheet_id:true,client_viewer_session_id:true,clienttime:true,containermodule:true,count:true,country:true,deviceid:true,direct_data_session_id:true,direct_group:true,direct_recipients:true,direct_recipients_size:true,direct_session_id:true,direct_spaces:true,event_stories_in_tray:true,eventname:true,extra_client_data:true,first_view:true,followee_stories_in_tray:true,friend_stories_in_tray:true,gesture:true,group_recipients:true,group_recipients_size:true,group_stories_in_tray:true,has_my_story:true,has_new_content:true,has_new_reactions:true,has_new_views:true,has_nux_story:true,inspiration_group_session:true,instagram_media_id:true,instagram_user_id:true,"interface":true,is_camera:true,is_from_story:true,is_story:true,isemployee:true,live_stories_in_tray:true,live_video_id:true,media_index:true,media_owner:true,media_owner_type_string:true,media_type:true,message_id:true,message_length:true,message_type:true,mobile_network_type:true,montage_message_id:true,mutation_id:true,name:true,num_participants:true,number_badges:true,number_live_stories:true,number_media:true,number_new_rows:true,number_new_stories:true,number_reactions:true,number_rows:true,number_stories:true,number_viewers:true,other_participant:true,page_stories_in_tray:true,privacy_mode:true,product_surface:true,promotion_stories_in_tray:true,rawclienttime:true,reaction_id:true,reaction_type:true,read_stories:true,reason:true,replays_left:true,reply_count:true,row_index:true,row_status:true,send_key:true,server_post_source:true,servertime:true,soft_deleted_story_thread_ids:true,source:true,source_thread_id:true,story_index:true,story_media_ids:true,story_owner:true,story_owner_fbids:true,story_owner_type:true,story_ranking_scores:true,story_thread_ids:true,target_id:true,thread_count:true,thread_id:true,thread_view_identifier:true,tracking_string:true,tray_session_id:true,trigger_source:true,true_prompt_id:true,unified_privacy_mode:true,unread_stories:true,vc:true,whitelisted_stories_users_count:true};f.exports=h}),null);
__d("FBStoriesLoggingConstants",[],(function a(b,c,d,e,f,g){"use strict";var h={EVENT_STORY:"event",FOLLOWEE_STORY:"followee",FRIEND_STORY:"friend",GROUP_STORY:"group",MISSING_STORY_DATA:"missingStoryData",PAGE_STORY:"page",SELF_STORY:"self",STORY_PROMOTION:"promotion",ACTION_OPEN_MEDIA:"open_media",ACTION_DELETE_MEDIA:"delete_media_attempted",ACTION_SEND_REPLY_ATTEMPT:"attempt_to_send_reply",ACTION_SEND_REPLY_SUCCESS:"mark_reply_sent",ACTION_SEND_REPLY_FAILURE:"reply_sent_failure",ACTION_OPEN_SEEN_SUMMARY:"open_seen_summary",ACTION_OPEN_STORY:"open_story",ACTION_CLOSE_STORY:"close_story",ACTION_TRAY_LOAD:"story_tray_load",SOURCE_OPEN_FROM_STORY_HEAD:"openFromStoryHead",SOURCE_OPEN_FROM_PRIOR_STORY:"openFromPriorStory",SOURCE_CLOSE_FROM_MODAL:"closeFromClickingOnModal",SOURCE_CLOSE_FROM_MODAL_CLOSE_BUTTON:"closeFromClickingOnModalCloseButton",SOURCE_CLOSE_FROM_LAST_STORY_FINISHING:"closeFromLastStoryFinishing",INTERACTIONS:{CATEGORY_KEY:"fb_stories_tray",TOTAL_INIT:"init_agg",DATA_LOADING:"graphql_data_loading",TRAY_RENDER:"react_story_tray_render",VIEWER_OPEN:"viewer_open"}};f.exports=h}),null);
__d("CameraPostGraphQLAPI",["CameraPostDirectMarkSeenMutationWebGraphQLMutation","CameraPostLoggingEvents","CameraPostQueryWebGraphQLQuery","CameraPostRepliesQueryWebGraphQLQuery","CameraPostReplyMutationWebGraphQLMutation","CameraPostUserQueryWebGraphQLQuery","DirectMessagingTypedLogger","FBStoriesLoggingConstants","WebGraphQL","idx","uniqueID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={sendDirectReply:function h(i,j,k,l,m){__p&&__p();var n=c("uniqueID")(),o={client_mutation_id:n,actor_id:i,thread_id:j,message:k},p=k.length,q=void 0,r=void 0,s=void 0;if(m){q=c("FBStoriesLoggingConstants").ACTION_SEND_REPLY_ATTEMPT;r=c("FBStoriesLoggingConstants").ACTION_SEND_REPLY_SUCCESS;s=c("FBStoriesLoggingConstants").ACTION_SEND_REPLY_FAILURE}else{q=c("CameraPostLoggingEvents").SEND_REPLY_ATTEMPT;r=c("CameraPostLoggingEvents").SEND_REPLY_SUCCESS;s=c("CameraPostLoggingEvents").SEND_REPLY_FAILURE}new(c("DirectMessagingTypedLogger"))().setCameraPostType(l).setProductSurface("www").setName(q).setMessageLength(p).setThreadID(j).log();return c("WebGraphQL").exec(new(c("CameraPostReplyMutationWebGraphQLMutation"))({input:o})).then(function(t){new(c("DirectMessagingTypedLogger"))().setCameraPostType(l).setProductSurface("www").setName(r).setMessageLength(p).setThreadID(j).log();return t},function(t){new(c("DirectMessagingTypedLogger"))().setCameraPostType(l).setProductSurface("www").setName(s).setMessageLength(p).setThreadID(j).log();return t})},loadThreadFullInformation:function h(i,j){return c("WebGraphQL").exec(new(c("CameraPostQueryWebGraphQLQuery"))({thread_id:j})).then(function(k){var l,m,n=(l=k)!=null?(l=l.node)!=null?l.camera_post_type:l:l,o=(m=k)!=null?(m=m.node)!=null?m.viewer_replays_left:m:m;new(c("DirectMessagingTypedLogger"))().setCameraPostType(n).setName(c("CameraPostLoggingEvents").THREAD_VIEWED).setProductSurface("www").setReplaysLeft(o).setThreadID(j).log();return k},function(k){return k})},loadUserInfo:function h(){return c("WebGraphQL").exec(new(c("CameraPostUserQueryWebGraphQLQuery"))())},loadRepliesForThread:function h(i){return c("WebGraphQL").exec(new(c("CameraPostRepliesQueryWebGraphQLQuery"))({thread_id:i}))},markThreadSeen:function h(i,j,k,l,m){var n={client_mutation_id:c("uniqueID")(),actor_id:i,thread_id:j,last_message_seen_id:k},o=new(c("DirectMessagingTypedLogger"))().setCameraPostType(l).setName(c("CameraPostLoggingEvents").THREAD_MARK_SEEN_ATTEMPT).setProductSurface("www").setThreadID(j);if(m)o=o.setReplaysLeft(m);o.log();return c("WebGraphQL").exec(new(c("CameraPostDirectMarkSeenMutationWebGraphQLMutation"))({input:n})).then(function(p){new(c("DirectMessagingTypedLogger"))().setCameraPostType(l).setProductSurface("www").setName(c("CameraPostLoggingEvents").THREAD_MARK_SEEN_SUCCESS).setReplaysLeft(m).setThreadID(j).log();return p},function(p){new(c("DirectMessagingTypedLogger"))().setCameraPostType(l).setProductSurface("www").setName(c("CameraPostLoggingEvents").THREAD_MARK_SEEN_FAILURE).setReplaysLeft(m).setThreadID(j).log();return p})},_getLogger:function h(){return new(c("DirectMessagingTypedLogger"))()}}}),null);
__d("CameraPostBucketOwnerHelper",["idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getId:function i(j){var k;return((k=j)!=null?k.id:k)||""},getName:function i(j){var k;return((k=j)!=null?k.name:k)||""},getGender:function i(j){if(!j)return"";return j.gender?j.gender:""},isEventHost:function i(j){if(!j)return false;return j.is_viewer_host?!!j.is_viewer_host:false},isViewerFriend:function i(j){if(!j)return false;return j.is_viewer_friend?!!j.is_viewer_friend:false},getSubscribeStatus:function i(j){if(!j)return null;return j.subscribe_status?j.subscribe_status:null},getProfilePictureUri:function i(j){if(!j||!j.profile_picture)return"";return j.profile_picture.uri||""},getCoverPhotoUri:function i(j){var k;if(!j||!j.cover_photo)return"";return((k=j)!=null?(k=k.cover_photo)!=null?(k=k.photo)!=null?(k=k.image)!=null?k.uri:k:k:k:k)||""},isViewerPageContentAdmin:function i(j){var k=h._getViewerProfilePermissions(j);return k&&k.includes("CREATE_CONTENT")||false},isViewerGroupModerator:function i(j){var k=h._getViewerAdminType(j);return k==="MODERATOR"},isViewerGroupAdmin:function i(j){var k=h._getViewerAdminType(j);return k==="ADMIN"},_getViewerProfilePermissions:function i(j){var k;if(!j||!j.viewer_profile_permissions)return null;return((k=j)!=null?k.viewer_profile_permissions:k)||null},_getViewerAdminType:function i(j){var k;if(!j||!j.viewer_admin_type)return null;return((k=j)!=null?k.viewer_admin_type:k)||null}};f.exports=h}),null);
__d("CameraPostMediaHelper",["idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getId:function i(j){var k;return((k=j)!=null?k.id:k)||""},getWidth:function i(j){if(!j)return 0;if(j.width)return j.width;if(j.image)return j.image.width||0;return 0},getHeight:function i(j){if(!j)return 0;if(j.height)return j.height;if(j.image)return j.image.height||0;return 0},getType:function i(j){var k;return((k=j)!=null?k.__typename:k)||""},getImageUri:function i(j){if(!j)return null;return j.image?j.image.uri:null},isImage:function i(j){return h.getType(j)==="Photo"},isVideo:function i(j){return h.getType(j)==="Video"},getPreviewImage:function i(j){if(!j)return null;return j.preview_image?j.preview_image.uri:null}};f.exports=h}),null);
__d("CameraPostThreadOwnerHelper",["idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getId:function i(j){var k;return(k=j)!=null?k.id:k},getName:function i(j){var k;return((k=j)!=null?k.name:k)||""},getIsViewerFriend:function i(j){var k;return!!((k=j)!=null?k.is_viewer_friend:k)},getProfilePictureUri:function i(j){var k;return((k=j)!=null?(k=k.profile_picture)!=null?k.uri:k:k)||""}};f.exports=h}),null);
__d("CameraPostTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({DIRECT:"DIRECT",GROUP_DIRECT:"GROUP_DIRECT",DIRECT_NUX:"DIRECT_NUX",STORY:"STORY",STORY_NUX:"STORY_NUX",PAGE_STORY:"PAGE_STORY",EVENT_STORY:"EVENT_STORY",BIRTHDAY_STORY:"BIRTHDAY_STORY",GROUP_STORY:"GROUP_STORY",LIVE_STORY:"LIVE_STORY",PROMOTION_STORY:"PROMOTION_STORY"})}),null);
__d("CameraPostTypesHelper",["CameraPostTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={isEventStory:function i(j){return j===c("CameraPostTypes").EVENT_STORY},isGroupStory:function i(j){return j===c("CameraPostTypes").GROUP_STORY},isMultiAuthor:function i(j){return h.isEventStory(j)||h.isGroupStory(j)},isPageStory:function i(j){return j===c("CameraPostTypes").PAGE_STORY},isPromotionStory:function i(j){return j===c("CameraPostTypes").PROMOTION_STORY},isStory:function i(j){return j===c("CameraPostTypes").STORY},isStoryNux:function i(j){return j===c("CameraPostTypes").STORY_NUX}};f.exports=h}),null);
__d("FBStoriesBucketsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1784626654912684"};j.getQueryID=function(){"use strict";return"151680878790834"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("FBStoriesDeleteMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1340045906066120"};j.getQueryID=function(){"use strict";return"967072946766012"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("FBStoriesPrivacySettingsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1755258411172254"};j.getQueryID=function(){"use strict";return"310230176153860"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("FBStoriesSeenRecieptsLastSeenTimeUpdateMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1386522808128715"};j.getQueryID=function(){"use strict";return"1384057201673076"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("FBStoriesTraySubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1564655036954302",queryID:"837694009743481"})}),null);
__d("FBStoriesTraySubscription",["BaseGraphQLSubscription","FBStoriesTraySubscriptionWebGraphQLSubscription","uuid"],(function a(b,c,d,e,f,g){var h=babelHelpers["extends"]({},c("BaseGraphQLSubscription"),{_getTopic:function i(j){return"gqls/stories_tray_subscribe/user_id_"+j},_getQueryID:function i(){return c("FBStoriesTraySubscriptionWebGraphQLSubscription").getDocID()},_getQueryParameters:function i(j){return{input:JSON.stringify({client_subscription_id:c("uuid")(),user_id:j})}},_getSubscriptionCallName:function i(){return"stories_tray_subscribe"}});f.exports=h}),null);
__d("FBStoriesViewerBucketViewersQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1947206885297176"};j.getQueryID=function(){"use strict";return"306146936556058"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("FBStoriesGraphQLAPI",["CurrentUser","WebGraphQL","FBStoriesBucketsQueryWebGraphQLQuery","FBStoriesPrivacySettingsQueryWebGraphQLQuery","FBStoriesDeleteMutationWebGraphQLMutation","FBStoriesSeenRecieptsLastSeenTimeUpdateMutationWebGraphQLMutation","FBStoriesTraySubscription","FBStoriesViewerBucketViewersQueryWebGraphQLQuery","uniqueID"],(function a(b,c,d,e,f,g){"use strict";f.exports={load:function h(){return c("WebGraphQL").exec(new(c("FBStoriesBucketsQueryWebGraphQLQuery"))())},loadPrivacySettings:function h(){return c("WebGraphQL").exec(new(c("FBStoriesPrivacySettingsQueryWebGraphQLQuery"))({}))},loadViewerListForThread:function h(i){return c("WebGraphQL").exec(new(c("FBStoriesViewerBucketViewersQueryWebGraphQLQuery"))({threadId:i}))},subscribeToTrayChanges:function h(i){c("FBStoriesTraySubscription").subscribe(c("CurrentUser").getID(),i)},updateThreadSeenReciept:function h(i){var j={client_mutation_id:c("uniqueID")(),actor_id:c("CurrentUser").getID(),thread_id:i};return c("WebGraphQL").exec(new(c("FBStoriesSeenRecieptsLastSeenTimeUpdateMutationWebGraphQLMutation"))({input:j}))},deleteStory:function h(i,j){return c("WebGraphQL").exec(new(c("FBStoriesDeleteMutationWebGraphQLMutation"))({input:{client_mutation_id:c("uniqueID")(),actor_id:i,story_thread_ids:[j]}}))}}}),null);
__d("BackstageMediaType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LIVE:"live",PHOTO:"photo",VIDEO:"video",WAS_LIVE:"was_live",UNKNOWN:"unknown"})}),null);
__d("FBStoriesThreadHelper",["CameraPostMediaHelper","CameraPostThreadOwnerHelper","CameraPostTypes","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getId:function i(j){var k;return((k=j)!=null?k.id:k)||""},getCameraPostType:function i(j){var k;return((k=j)!=null?k.camera_post_type:k)||c("CameraPostTypes").STORY},getCameraPostSource:function i(j){var k;return((k=j)!=null?k.post_source:k)||"CAMERA_SYSTEM"},isSeenByViewer:function i(j){var k;return!!((k=j)!=null?k.is_seen_by_viewer:k)},setIsSeenByViewer:function i(j,k){if(!j)return;j.is_seen_by_viewer=k},getLatestMessageID:function i(j){var k;return(k=j)!=null?(k=k.latest_message)!=null?k.id:k:k},getStatus:function i(j){var k;return(k=j)!=null?k.thread_status:k},getTime:function i(j){var k;return((k=j)!=null?k.time:k)||0},getExpiryTime:function i(j){var k;return((k=j)!=null?k.thread_expiry_time:k)||0},isExpired:function i(j){var k=h.getExpiryTime(j);if(!k)return false;return k<Date.now()/1e3},getNonFriendsSeenCount:function i(j){var k;return((k=j)!=null?k.non_friends_seen_count:k)||0},setNonFriendsSeenCount:function i(j,k){if(!j)return;j.non_friends_seen_count=k},getFriendsSeenCount:function i(j){var k;return((k=j)!=null?k.friends_seen_count:k)||0},setFriendsSeenCount:function i(j,k){if(!j)return;j.friends_seen_count=k},getSeenReceiptsLastSeenTime:function i(j){var k;return((k=j)!=null?k.seen_receipts_last_seen_time:k)||0},setSeenReceiptsLastSeenTime:function i(j,k){if(!j)return;j.seen_receipts_last_seen_time=k},getSeenReceiptsUnseenCount:function i(j){var k;return((k=j)!=null?k.seen_receipts_unseen_count:k)||0},getSeenReceiptsFollowersUnseenCount:function i(j){var k;return((k=j)!=null?k.seen_receipts_followers_unseen_count:k)||0},setSeenReceiptsUnseenCount:function i(j,k){if(!j)return;j.seen_receipts_unseen_count=k},getOwner:function i(j){var k;return(k=j)!=null?k.camera_post_thread_owner:k},getOwnerId:function i(j){return c("CameraPostThreadOwnerHelper").getId(h.getOwner(j))},isViewerFriendOfOwner:function i(j){return c("CameraPostThreadOwnerHelper").getIsViewerFriend(h.getOwner(j))},getViewers:function i(j){var k;return((k=j)!=null?(k=k.story_thread_viewers)!=null?k.edges:k:k)||[]},setViewers:function i(j,k){if(!j)return;j.story_thread_viewers={edges:k}},getRootMessage:function i(j){var k;return(k=j)!=null?k.root_message:k},getMedia:function i(j){var k;return(k=h.getRootMessage(j))!=null?k.message_media:k},getMediaId:function i(j){return c("CameraPostMediaHelper").getId(h.getMedia(j))},getMediaType:function i(j){return c("CameraPostMediaHelper").getType(h.getMedia(j))},getMediaPreviewImage:function i(j){return c("CameraPostMediaHelper").getPreviewImage(h.getMedia(j))},getWWWTextFormatMetadata:function i(j){var k;return((k=h.getRootMessage(j))!=null?k.www_text_format_metadata:k)||null},getMessageText:function i(j){var k;return((k=h.getRootMessage(j))!=null?k.message_text:k)||""},getStoryViewerId:function i(j){var k;return(k=j)!=null?(k=k.node)!=null?k.id:k:k},getStoryViewerSeenTime:function i(j){var k;return((k=j)!=null?k.seen_time:k)||0}};f.exports=h}),null);
__d("FBStoriesBucketHelper",["CameraPostBucketOwnerHelper","CameraPostTypes","CameraPostTypesHelper","CurrentUser","FBStoriesLoggingConstants","FBStoriesThreadHelper","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getUnseenThread:function j(k){var l=i.getThreads(k);return l[Math.max(0,i.getUnseenThreadIndex(k))]}},i={isUserBucket:function j(k){return i.getOwnerId(k)===c("CurrentUser").getID()},getLiveVideo:function j(k){var l;return(l=k)!=null?l.live_video:l},getMediaIDForLiveBucket:function j(k){var l;return(l=k)!=null?(l=l.live_video)!=null?l.id:l:l},isLive:function j(k){var l;return!!((l=i.getLiveVideo(k))!=null?l.id:l)},setLiveVideo:function j(k,l){if(!k)return;k.live_video=l},hasData:function j(k){if(!k)return false;return i.getThreads(k).length>0},getThreads:function j(k){var l,m=((l=k)!=null?(l=l.threads)!=null?l.nodes:l:l)||[];return m.filter(function(n){return c("FBStoriesThreadHelper").getStatus(n)==="PUBLISHED"&&c("FBStoriesThreadHelper").getMedia(n)!==null&&!c("FBStoriesThreadHelper").isExpired(n)})},getThreadIDs:function j(k){var l=i.getThreads(k);return l.map(function(m){var n;return((n=m)!=null?n.id:n)||""})},setThreads:function j(k,l){if(!k)return;k.threads={nodes:l}},getUnseenThreadIndex:function j(k){var l=i.getThreads(k),m=i.isUserBucket(k);return m?l.findIndex(function(n){return c("FBStoriesThreadHelper").getSeenReceiptsUnseenCount(n)>0}):l.findIndex(function(n){return!c("FBStoriesThreadHelper").isSeenByViewer(n)})},hasNewViewers:function j(k){if(!k)return false;var l=this.getThreads(k),m=l.filter(function(n){return c("FBStoriesThreadHelper").getSeenReceiptsUnseenCount(n)>0||c("FBStoriesThreadHelper").getSeenReceiptsFollowersUnseenCount(n)>0});return m.length>0},getPreviewImage:function j(k){var l=h.getUnseenThread(k);return c("FBStoriesThreadHelper").getMediaPreviewImage(l)},getId:function j(k){var l;return((l=k)!=null?l.id:l)||""},getCameraPostType:function j(k){var l;return((l=k)!=null?l.camera_post_type:l)||c("CameraPostTypes").STORY},getUnseenCount:function j(k){var l;return((l=k)!=null?l.unseen_count:l)||0},setUnseenCount:function j(k,l){if(!k)return;k.unseen_count=l},hasLiveVideoEnded:function j(k){var l;return!!((l=k)!=null?l.has_live_video_ended:l)},setHasLiveVideoEnded:function j(k,l){if(!k)return;k.has_live_video_ended=l},getOwner:function j(k){var l;return((l=k)!=null?l.camera_post_bucket_owner:l)||{id:null,name:null,short_name:null,gender:null,is_viewer_friend:false,profile_picture:null,subscribe_status:null}},getOwnerId:function j(k){return c("CameraPostBucketOwnerHelper").getId(i.getOwner(k))},getOwnerGender:function j(k){return c("CameraPostBucketOwnerHelper").getGender(i.getOwner(k))},isViewerEventHost:function j(k){return c("CameraPostBucketOwnerHelper").isEventHost(i.getOwner(k))},isViewerPageContentAdmin:function j(k){return c("CameraPostBucketOwnerHelper").isViewerPageContentAdmin(i.getOwner(k))},isViewerGroupAdmin:function j(k){return c("CameraPostBucketOwnerHelper").isViewerGroupAdmin(i.getOwner(k))},isViewerGroupModerator:function j(k){return c("CameraPostBucketOwnerHelper").isViewerGroupModerator(i.getOwner(k))},isViewerFriendOfOwner:function j(k){return c("CameraPostBucketOwnerHelper").isViewerFriend(i.getOwner(k))},getOwnerSubscribeStatus:function j(k){return c("CameraPostBucketOwnerHelper").getSubscribeStatus(i.getOwner(k))},getOwnerProfilePictureUri:function j(k){return c("CameraPostBucketOwnerHelper").getProfilePictureUri(i.getOwner(k))},getOwnerCoverPhotoUri:function j(k){return c("CameraPostBucketOwnerHelper").getCoverPhotoUri(i.getOwner(k))},getOwnerName:function j(k){var l=arguments.length<=1||arguments[1]===undefined?false:arguments[1],m=i.getCameraPostType(k),n=i.getOwner(k);if(!l&&c("CameraPostTypesHelper").isStory(m)&&n.short_name)return n.short_name;else return n.name},getLatestThreadCreationTime:function j(k){var l;if(!k)return null;return(l=k)!=null?l.latest_thread_creation_time:l},getLoggingType:function j(k){__p&&__p();if(!k)return c("FBStoriesLoggingConstants").MISSING_STORY_DATA;if(i.isUserBucket(k))return c("FBStoriesLoggingConstants").SELF_STORY;var l=i.getCameraPostType(k);if(c("CameraPostTypesHelper").isPageStory(l))return c("FBStoriesLoggingConstants").PAGE_STORY;if(c("CameraPostTypesHelper").isGroupStory(l))return c("FBStoriesLoggingConstants").GROUP_STORY;if(c("CameraPostTypesHelper").isEventStory(l))return c("FBStoriesLoggingConstants").EVENT_STORY;if(c("CameraPostTypesHelper").isPromotionStory(l))return c("FBStoriesLoggingConstants").STORY_PROMOTION;if(!i.isViewerFriendOfOwner(k))return c("FBStoriesLoggingConstants").FOLLOWEE_STORY;return c("FBStoriesLoggingConstants").FRIEND_STORY},getDefaultBucket:function j(){return{id:null,camera_post_type:null,unseen_count:0,ranking:null,live_video:null,camera_post_bucket_owner:null,threads:null,latest_thread_creation_time:null}}};f.exports=i}),null);
__d("FBStoriesActionTypes",[],(function a(b,c,d,e,f,g){var h=Object.freeze({LOAD:"FB_STORIES.LOAD",LOADING:"FB_STORIES.LOADING",LOADED:"FB_STORIES.LOADED",LOADED_ERROR:"FB_STORIES.LOADED_ERROR",VIEWER_LIST_LOADED_FOR_THREAD:"FB_STORIES.VIEWER_LIST_LOADED_FOR_THREAD",RESET_LOCAL_SEEN_HISTORY:"FB_STORIES.RESET_LOCAL_SEEN_HISTORY",SELECTED_BUCKET_IDX_CHANGED:"FB_STORIES.SELECTED_BUCKET_IDX_CHANGED",SET_ALL_BUCKETS_VIEWED:"FB_STORIES.SET_ALL_BUCKETS_VIEWED",SET_UNSEEN_MODE:"FB_STORIES.SET_UNSEEN_MODE",SELECTED_THREAD_IDX_CHANGED:"FB_STORIES.SELECTED_THREAD_IDX_CHANGED",SELECTED_THREAD_PERCENT_DONE:"FB_STORIES.SELECTED_THREAD_PERCENT_DONE",SUBSCRIPTION_BUCKET_UPDATE:"FB_STORIES.SUBSCRIPTION_BUCKET_UPDATE",UPDATE_THREAD_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_SEEN_OPTIMISTIC",UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:"FB_STORIES.UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC",DELETE_THREAD_FROM_BUCKET:"FB_STORIES.DELETE_THREAD_FROM_BUCKET",REMOVE_BUCKET:"FB_STORIES.REMOVE_BUCKET",SET_SATP_NATIVE_RENDER:"FB_STORIES.SET_SATP_NATIVE_RENDER",REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:"FB_STORIES.REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET",SET_IS_COMMERCIAL_BREAK_RUNNING:"FB_STORIES.SET_IS_COMMERCIAL_BREAK_RUNNING",UNSELECT_BUCKET:"FBSTORIES.UNSELECT_BUCKET",SET_VIEWER_OPEN:"FB_STORIES.SET_VIEWER_OPEN"});f.exports=h}),null);
__d("friendsBucketSorter",["CameraPostTypesHelper","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(q){__p&&__p();return function r(s,t){__p&&__p();var u=s.live_video&&s.live_video.id,v=t.live_video&&t.live_video.id;if(u!==v)return u?-1:1;if(i(s,t))return k(s)?-1:1;if(j(s,t))return l(s)?-1:1;if(m(s,t,q))return n(s,q)?-1:1;return p(s)>=p(t)?-1:1}}function i(q,r){return o(q,r,k)}function j(q,r){return o(q,r,l)}function k(q){return q.unseen_count>0}function l(q){return c("CameraPostTypesHelper").isEventStory(q.camera_post_type)}function m(q,r,s){return n(q,s)!==n(r,s)}function n(q,r){var s,t=((s=q)!=null?(s=s.threads)!=null?s.nodes:s:s)||[];for(var u=0;u<t.length;u++){var v,w=(v=t[u])!=null?(v=v.camera_post_thread_owner)!=null?v.id:v:v;if(w===r)return true}return false}function o(q,r,s){var t=s(q),u=s(r);return t!=u}function p(q){var r;return((r=q)!=null?(r=r.ranking)!=null?r.score:r:r)||0}f.exports=h}),null);
__d("FBStoriesDataHelper",["CameraPostTypesHelper","FBStoriesBucketHelper","SubscribeStatuses","friendsBucketSorter","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getBucketsDataFromLoadedObject:function i(j){__p&&__p();var k=h.getUserDataNodesFromLoadedObject(j),l=k[0],m=h.getUserInfoFromLoadedObject(j),n=h.getFriendsBucketDataFromLoadedObject(j);n=n.reduce(function(o,p){__p&&__p();var q=c("FBStoriesBucketHelper").getThreads(p),r=q&&q.length>0,s=c("FBStoriesBucketHelper").getCameraPostType(p),t=c("CameraPostTypesHelper").isStoryNux(s),u=c("CameraPostTypesHelper").isEventStory(s),v=c("CameraPostTypesHelper").isGroupStory(s),w=c("FBStoriesBucketHelper").getOwnerSubscribeStatus(p)===c("SubscribeStatuses").IS_SUBSCRIBED;if(t)return o;if(!r){if(c("FBStoriesBucketHelper").isLive(p))return o.concat([p]);return o}if(w||u||v)return o.concat([p]);return o},[]);n.sort(c("friendsBucketSorter")(m.userID));return{userInfo:m,userBucketData:l,friendsBucketData:n}},getFriendsBucketDataFromLoadedObject:function i(j){var k;return((k=j)!=null?(k=k.me)!=null?(k=k.friends_stories_buckets)!=null?k.nodes:k:k:k)||[]},getUserDataNodesFromLoadedObject:function i(j){var k;return((k=j)!=null?(k=k.me)!=null?(k=k.story_bucket)!=null?k.nodes:k:k:k)||[]},getUserInfoFromLoadedObject:function i(j){var k,l,m,n;return{userName:(k=j)!=null?(k=k.me)!=null?k.name:k:k,userID:(l=j)!=null?(l=l.me)!=null?l.id:l:l,userGender:(m=j)!=null?(m=m.me)!=null?m.gender:m:m,userProfilePic:(n=j)!=null?(n=n.me)!=null?n.profile_picture:n:n}},getFriendsDataWithEndedLiveBucket:function i(j,k,l){__p&&__p();if(!k||l||!c("FBStoriesBucketHelper").isLive(k))return j;var m=c("FBStoriesBucketHelper").getId(k),n=false;j=j.reduce(function(o,p){__p&&__p();if(c("FBStoriesBucketHelper").getId(p)===m){n=true;var q=!c("FBStoriesBucketHelper").isLive(p);if(k&&q){c("FBStoriesBucketHelper").setLiveVideo(p,k.live_video);c("FBStoriesBucketHelper").setHasLiveVideoEnded(p,true)}}o.push(p);return o},[]);if(!n){c("FBStoriesBucketHelper").setHasLiveVideoEnded(k,true);j=[k].concat(j)}return j}};f.exports=h}),null);
__d("FBStoriesDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("FBStoriesLiveVideoActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){var h=c("keyMirror")({SET_UI_COMPONENTS:null,REMOVE_UI_COMPONENTS:null,LIVE_BUCKET_LOADED:null,LOAD_UI_COMPONENTS_FAILED:null});f.exports=h}),null);
/**
 * License: https://www.facebook.com/legal/license/3OfunpvTMvC/
 */
__d("reselect",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();g.__esModule=true;g.defaultMemoize=j;g.createSelectorCreator=l;g.createStructuredSelector=n;function h(o,p){return o===p}function i(o,p,q){if(p===null||q===null||p.length!==q.length)return false;var r=p.length;for(var s=0;s<r;s++)if(!o(p[s],q[s]))return false;return true}function j(o){var p=arguments.length>1&&arguments[1]!==undefined?arguments[1]:h,q=null,r=null;return function(){if(!i(p,q,arguments))r=o.apply(null,arguments);q=arguments;return r}}function k(o){var p=Array.isArray(o[0])?o[0]:o;if(!p.every(function(r){return typeof r==="function"})){var q=p.map(function(r){return typeof r}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+q+"]"))}return p}function l(o){__p&&__p();for(var p=arguments.length,q=Array(p>1?p-1:0),r=1;r<p;r++)q[r-1]=arguments[r];return function(){__p&&__p();for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];var v=0,w=t.pop(),x=k(t),y=o.apply(undefined,[function(){v++;return w.apply(null,arguments)}].concat(q)),z=j(function(){var A=[],B=x.length;for(var C=0;C<B;C++)A.push(x[C].apply(null,arguments));return y.apply(null,A)});z.resultFunc=w;z.recomputations=function(){return v};z.resetRecomputations=function(){return v=0};return z}}var m=g.createSelector=l(j);function n(o){__p&&__p();var p=arguments.length>1&&arguments[1]!==undefined?arguments[1]:m;if(typeof o!=="object")throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof o);var q=Object.keys(o);return p(q.map(function(r){return o[r]}),function(){for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return s.reduce(function(u,v,w){u[q[w]]=v;return u},{})})}}),null);
__d("fbStoriesRootSelectors",["FBStoriesBucketHelper","idx","reselect"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("reselect").createSelector,i=function i(l,u,v){var w;return v===0?l:(w=u)!=null?w[v-1]:w},j=function j(u){return u.data},k=h([j],function(u){return u.hasValue()?u.getValueEnforcing():{friendsBucketData:[],userBucketData:c("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{}}}),l=h([k],function(k){return k.userBucketData||{}}),m=h([l],function(l){return l&&l.id}),n=h([k],function(k){return k.friendsBucketData||[]}),o=h([n],function(n){return n.map(function(u){return u.id?u.id:""})}),p=h([o,m],function(o,m){return[m].concat(o)}),q=h([k],function(k){return k.userInfo||{}}),r=function r(u){return u.selectedBucketIndex},s=h([r,l,n],function(r,l,n){return i(l,n,r)}),t=h([s],function(s){return s&&s.id});f.exports={userBucketData:l,friendsBucketData:n,friendsBucketIds:o,userInfo:q,bucketIds:p,selectedBucket:s,selectedBucketId:t}}),null);
__d("fbStoriesStateSelectors",["FBStoriesBucketHelper","fbStoriesRootSelectors","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("fbStoriesRootSelectors").userBucketData,i=c("fbStoriesRootSelectors").friendsBucketData,j=c("fbStoriesRootSelectors").bucketIds,k=c("fbStoriesRootSelectors").selectedBucketId,l={bucketByBucketId:function m(n,o){var p=l.bucketIndexByBucketId(n,o);return l.bucketByIndex(n,p)},bucketByIndex:function m(n,o){var p;return o===0?h(n):(p=i(n))!=null?p[o-1]:p},bucketIndexByBucketId:function m(n,o){var p=j(n);return p.indexOf(o)},isOwnBucket:function m(n,o){return(o!=undefined?o:k(n))===c("FBStoriesBucketHelper").getId(h(n))}};f.exports=l}),null);
__d("FBStoriesStore",["BackstageMediaType","CameraPostMediaHelper","CameraPostTypes","FBStoriesActionTypes","FBStoriesBucketHelper","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesLiveVideoActionTypes","FBStoriesThreadHelper","FluxReduceStore","LoadObject","Map","SubscribeStatuses","fbStoriesRootSelectors","fbStoriesStateSelectors","friendsBucketSorter","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxReduceStore"));i=h&&h.prototype;j.prototype.getInitialState=function(){return{data:c("LoadObject").empty(),selectedBucketIndex:-1,currentThreadIndex:-1,currentThreadPercentDone:0,unseenMode:false,allBucketsViewed:false,lastViewedThreadIndexForBucket:new(c("Map"))(),showSATPNativeRender:false,isCommercialBreakRunning:new(c("Map"))(),isViewerOpen:false}};j.prototype.reduce=function(k,l){__p&&__p();var m,n=this,o,p,q,r;switch(l.type){case c("FBStoriesActionTypes").LOADING:return babelHelpers["extends"]({},k,{data:c("LoadObject").loading()});case c("FBStoriesActionTypes").LOADED:var s=l.data,t=s.userInfo,u=s.userBucketData,v=s.friendsBucketData;v=c("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(v,this.$FBStoriesStore1(),this.isOwnBucket(this.getSelectedBucketId()));return babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userInfo:t,userBucketData:u,friendsBucketData:v})});case c("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD:var m=function(){__p&&__p();var J=l.data.node,u=babelHelpers["extends"]({},n.getUserBucketData(),{threads:{nodes:n.$FBStoriesStore2().map(function(K){if(c("FBStoriesThreadHelper").getId(K)===l.threadID){var L=babelHelpers["extends"]({},K);c("FBStoriesThreadHelper").setFriendsSeenCount(L,c("FBStoriesThreadHelper").getFriendsSeenCount(J));c("FBStoriesThreadHelper").setNonFriendsSeenCount(L,c("FBStoriesThreadHelper").getNonFriendsSeenCount(J));c("FBStoriesThreadHelper").setViewers(L,c("FBStoriesThreadHelper").getViewers(J));return L}return K})}});return{v:babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:u,userInfo:n.getUserInfo(),friendsBucketData:n.getFriendsBucketData()})})}}();if(typeof m==="object")return m.v;case c("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE:var o=function(){__p&&__p();var J=l.bucketData,K=c("FBStoriesBucketHelper").getThreads(J),L=K.length>0||c("FBStoriesBucketHelper").isLive(J),M=c("FBStoriesBucketHelper").getOwnerSubscribeStatus(J)===c("SubscribeStatuses").IS_SUBSCRIBED,N=c("FBStoriesBucketHelper").getId(J),O=c("fbStoriesRootSelectors").friendsBucketData(k),P=false,v=O.reduce(function(C,Q){if(c("FBStoriesBucketHelper").getId(Q)===N){P=true;if(L&&M)C.push(J)}else C.push(Q);return C},[]);if(!P&&L)v=[J].concat(O);v=c("FBStoriesDataHelper").getFriendsDataWithEndedLiveBucket(v,c("fbStoriesRootSelectors").selectedBucket(k),c("fbStoriesStateSelectors").isOwnBucket(k,c("fbStoriesRootSelectors").selectedBucketId(k)));v.sort(c("friendsBucketSorter")(c("fbStoriesRootSelectors").userInfo(k).userID));return{v:babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:c("fbStoriesRootSelectors").userBucketData(k),userInfo:c("fbStoriesRootSelectors").userInfo(k),friendsBucketData:v})})}}();if(typeof o==="object")return o.v;case c("FBStoriesActionTypes").LOADED_ERROR:return babelHelpers["extends"]({},k,{data:c("LoadObject").withError(new Error(l.error.errorSummary))});case c("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY:return babelHelpers["extends"]({},k,{lastViewedThreadIndexForBucket:new(c("Map"))()});case c("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED:var w=l.bucketIndex;return w<0||w>=this.getBucketCount()?k:babelHelpers["extends"]({},k,{selectedBucketIndex:w});case c("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED:var x=this.getThreadCountForSelectedBucket();if(!this.isSelectedBucketLive()&&(l.index<0||l.index>=x))return k;var y=new(c("Map"))(k.lastViewedThreadIndexForBucket);y.set(this.getSelectedBucketIndex(),l.index);return babelHelpers["extends"]({},k,{lastViewedThreadIndexForBucket:y,currentThreadIndex:l.index});case c("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE:var z=Math.min(100,Math.max(l.percentDone,0));return babelHelpers["extends"]({},k,{currentThreadPercentDone:z});case c("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED:var A=l.value;if(A===k.allBucketsViewed)return k;return babelHelpers["extends"]({},k,{allBucketsViewed:A,unseenMode:k.unseenMode&&A?false:k.unseenMode});case c("FBStoriesActionTypes").SET_UNSEEN_MODE:return babelHelpers["extends"]({},k,{unseenMode:l.value});case c("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC:var B=this.getSelectedBucketId(),C=this.getFriendsBucketData().map(function(J){__p&&__p();var K,L=this;if(c("FBStoriesBucketHelper").getId(J)===B){var K=function(){__p&&__p();var M=c("FBStoriesBucketHelper").getUnseenCount(J),N=L.$FBStoriesStore3(J).map(function(P){if(c("FBStoriesThreadHelper").getId(P)===l.threadID){if(!c("FBStoriesThreadHelper").isSeenByViewer(P))M=Math.max(M-1,0);var Q=babelHelpers["extends"]({},P);c("FBStoriesThreadHelper").setIsSeenByViewer(Q,true);return Q}else return P}),O=babelHelpers["extends"]({},J);c("FBStoriesBucketHelper").setUnseenCount(O,M);c("FBStoriesBucketHelper").setThreads(O,N);return{v:O}}();if(typeof K==="object")return K.v}else return J}.bind(this));return babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:C})});case c("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC:var D=babelHelpers["extends"]({},this.getUserBucketData(),{threads:{nodes:this.$FBStoriesStore2().map(function(J){if(c("FBStoriesThreadHelper").getId(J)===l.threadID){var K=babelHelpers["extends"]({},J);c("FBStoriesThreadHelper").setSeenReceiptsLastSeenTime(K,Date.now());c("FBStoriesThreadHelper").setSeenReceiptsUnseenCount(K,0);return K}else return J})}});return babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:D,userInfo:this.getUserInfo(),friendsBucketData:this.getFriendsBucketData()})});case c("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET:var p=function(){__p&&__p();var J=l.threadID,K=l.bucketID;if(!n.isUserManagedThread(J,K))return{v:k};var u=n.getUserBucketData(),C=null;if(K===c("FBStoriesBucketHelper").getId(u)){c("FBStoriesBucketHelper").setThreads(u,n.$FBStoriesStore3(u).filter(function(L){return c("FBStoriesThreadHelper").getId(L)!==J}));C=n.getFriendsBucketData()}else C=n.getFriendsBucketData().map(function(L){if(c("FBStoriesBucketHelper").getId(L)===K){var M=this.$FBStoriesStore3(L).filter(function(O){return c("FBStoriesThreadHelper").getId(O)!==J}),N=babelHelpers["extends"]({},L);c("FBStoriesBucketHelper").setThreads(N,M);return N}else return L}.bind(n)).filter(function(L){return this.$FBStoriesStore3(L).length>0}.bind(n));var y=k.lastViewedThreadIndexForBucket;if(J===n.getCurrentThreadIDForSelectedBucket()){y=new(c("Map"))(y);y.set(n.getSelectedBucketIndex(),undefined)}return{v:babelHelpers["extends"]({},k,{lastViewedThreadIndexForBucket:y,data:c("LoadObject").withValue({userBucketData:u,friendsBucketData:C,userInfo:n.getUserInfo()})})}}();if(typeof p==="object")return p.v;case c("FBStoriesActionTypes").REMOVE_BUCKET:var q=function(){var J=l.bucketID,C=n.getFriendsBucketData().filter(function(K){return c("FBStoriesBucketHelper").getId(K)!==J});return{v:babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:n.getUserBucketData(),friendsBucketData:C,userInfo:n.getUserInfo()})})}}();if(typeof q==="object")return q.v;case c("FBStoriesActionTypes").SET_SATP_NATIVE_RENDER:return babelHelpers["extends"]({},k,{showSATPNativeRender:l.value});case c("FBStoriesLiveVideoActionTypes").LIVE_BUCKET_LOADED:var E=l.data,F=c("FBStoriesDataHelper").getFriendsBucketDataFromLoadedObject(E),G=[].concat(this.getFriendsBucketData()),H=F.reduce(function(J,K){if(this.$FBStoriesStore4(K)&&this.getBucketIndexByBucketId(c("FBStoriesBucketHelper").getId(K))===-1)J.push(K);return J}.bind(this),G);return babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:H})});case c("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET:var r=function(){var J=l.bucketID,C=n.getFriendsBucketData().map(function(K){if(c("FBStoriesBucketHelper").getId(K)===J){c("FBStoriesBucketHelper").setLiveVideo(K,null);c("FBStoriesBucketHelper").setHasLiveVideoEnded(K,false)}return K});return{v:babelHelpers["extends"]({},k,{data:c("LoadObject").withValue({userBucketData:n.getUserBucketData(),friendsBucketData:C,userInfo:n.getUserInfo()})})}}();if(typeof r==="object")return r.v;case c("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING:var I=new(c("Map"))(this.getState().isCommercialBreakRunning);return babelHelpers["extends"]({},k,{isCommercialBreakRunning:I.set(l.videoID,l.isCommercialBreakRunning)});case c("FBStoriesActionTypes").UNSELECT_BUCKET:return babelHelpers["extends"]({},k,{selectedBucketIndex:-1,currentThreadIndex:-1});case c("FBStoriesActionTypes").SET_VIEWER_OPEN:return babelHelpers["extends"]({},k,{isViewerOpen:l.value});default:return k}};j.prototype.$FBStoriesStore5=function(){var k=this.getState().data;return k.hasValue()?k.getValueEnforcing():{friendsBucketData:[],userBucketData:c("FBStoriesBucketHelper").getDefaultBucket(),userInfo:{}}};j.prototype.getUserBucketData=function(){return this.$FBStoriesStore5().userBucketData||{}};j.prototype.getUserInfo=function(){return this.$FBStoriesStore5().userInfo||{}};j.prototype.getFriendsBucketData=function(){return this.$FBStoriesStore5().friendsBucketData||[]};j.prototype.isLoading=function(){return this.getState().data.isLoading()};j.prototype.getBucketIds=function(){var k=this.getFriendsBucketData().map(function(m){return m.id?m.id:""}),l=this.getUserBucketData().id||"";return[l].concat(k)};j.prototype.getSelectedBucketIndex=function(){return this.getState().selectedBucketIndex};j.prototype.getSelectedBucketId=function(){return this.getBucketIds()[this.getSelectedBucketIndex()]};j.prototype.areAllBucketsViewed=function(){return this.getState().allBucketsViewed};j.prototype.getCameraPostTypeForBucketId=function(k){return c("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore6(k))};j.prototype.doesBucketContainThreadId=function(k,l){var m=this.$FBStoriesStore6(k),n=c("FBStoriesBucketHelper").getThreads(m);return n.find(function(o){return c("FBStoriesThreadHelper").getId(o)===l})!==undefined};j.prototype.$FBStoriesStore6=function(k){return this.getBucketByIndex(this.getBucketIndexByBucketId(k))};j.prototype.getBucketIndexByBucketId=function(k){return this.getBucketIds().indexOf(k)};j.prototype.getSelectedBucketCameraPostType=function(){return c("FBStoriesBucketHelper").getCameraPostType(this.$FBStoriesStore1())};j.prototype.getSelectedBucketOwner=function(){return c("FBStoriesBucketHelper").getOwner(this.$FBStoriesStore1())};j.prototype.getSelectedBucketOwnerID=function(){return c("FBStoriesBucketHelper").getOwnerId(this.$FBStoriesStore1())};j.prototype.getSelectedBucketUnseenCount=function(){return c("FBStoriesBucketHelper").getUnseenCount(this.$FBStoriesStore1())};j.prototype.getThreadsForSelectedBucket=function(){return this.$FBStoriesStore3(this.$FBStoriesStore1())};j.prototype.getCurrentThreadIndexForSelectedBucket=function(){return this.getState().currentThreadIndex};j.prototype.getCurrentThreadIDForSelectedBucket=function(){return c("FBStoriesThreadHelper").getId(this.getCurrentThreadForSelectedBucket())};j.prototype.getCurrentThreadCameraPostTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?c("CameraPostTypes").STORY:c("FBStoriesThreadHelper").getCameraPostType(this.getCurrentThreadForSelectedBucket())};j.prototype.getCurrentThreadMediaTypeForSelectedBucket=function(){return this.isSelectedBucketLive()?c("BackstageMediaType").LIVE:c("FBStoriesThreadHelper").getMediaType(this.getCurrentThreadForSelectedBucket())};j.prototype.getCurrentThreadMediaIDForSelectedBucket=function(){if(this.isSelectedBucketLive()){var k=this.getThreadDataForSelectedLiveBucket();return k&&k.media.id}return c("FBStoriesThreadHelper").getMediaId(this.getCurrentThreadForSelectedBucket())};j.prototype.getCurrentThreadMediaViewerCountForSelectedBucket=function(){var k=this.getCurrentThreadForSelectedBucket();return c("FBStoriesThreadHelper").getNonFriendsSeenCount(k)+c("FBStoriesThreadHelper").getFriendsSeenCount(k)};j.prototype.getCurrentThreadForSelectedBucket=function(){return this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()]};j.prototype.getCurrentThreadData=function(){if(this.isSelectedBucketLive())return this.getThreadDataForSelectedLiveBucket();return this.$FBStoriesStore7(this.getState().currentThreadIndex)};j.prototype.shouldDisableReply=function(){var k=this.isOwnThread(),l=c("FBStoriesBucketHelper").isViewerFriendOfOwner(this.$FBStoriesStore1()),m=c("FBStoriesThreadHelper").isViewerFriendOfOwner(this.getCurrentThreadForSelectedBucket());return k||!l&&!m||this.isSelectedBucketLive()};j.prototype.getNonFriendsSeenCount=function(){return c("FBStoriesThreadHelper").getNonFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};j.prototype.getFriendsSeenCount=function(){return c("FBStoriesThreadHelper").getFriendsSeenCount(this.getCurrentThreadForSelectedBucket())};j.prototype.isOwnBucket=function(k){return(k!=undefined?k:this.getSelectedBucketId())===c("FBStoriesBucketHelper").getId(this.getUserBucketData())};j.prototype.isOwnThread=function(){if(this.isOwnBucket())return true;var k=this.getCurrentThreadForSelectedBucket(),l=c("FBStoriesThreadHelper").getOwnerId(k);return l===this.getUserInfo().userID};j.prototype.isBucketViewerEventHost=function(){var k=this.$FBStoriesStore1();return c("FBStoriesBucketHelper").isViewerEventHost(k)};j.prototype.isCurrentThreadUserManaged=function(){return this.isUserManagedThread(this.getCurrentThreadIDForSelectedBucket()||"",this.getSelectedBucketId())};j.prototype.isUserManagedThread=function(k,l){var m=this.$FBStoriesStore6(l);if(!m)return false;var n=this.$FBStoriesStore8(k,m),o=c("FBStoriesThreadHelper").getOwnerId(n);return n&&(o===this.getUserInfo().userID||c("FBStoriesBucketHelper").getId(m)===c("FBStoriesBucketHelper").getId(this.getUserBucketData())||c("FBStoriesBucketHelper").isViewerEventHost(m)||c("FBStoriesBucketHelper").isViewerPageContentAdmin(m)||c("FBStoriesBucketHelper").isViewerGroupModerator(m)||c("FBStoriesBucketHelper").isViewerGroupAdmin(m))||false};j.prototype.getBucketCount=function(){return this.getFriendsBucketData().length+1};j.prototype.hasDataInSelectedBucket=function(){return c("FBStoriesBucketHelper").hasData(this.$FBStoriesStore1())};j.prototype.hasOwnBucketViewers=function(){if(this.userBucketIsLive())return false;return c("FBStoriesBucketHelper").hasNewViewers(this.getUserBucketData())};j.prototype.hasOwnBucketContent=function(){return this.$FBStoriesStore2().length>0||this.userBucketIsLive()};j.prototype.getCurrentThreadPercentDone=function(){return this.getState().currentThreadPercentDone};j.prototype.getThreadCountForSelectedBucket=function(){return this.getThreadsForSelectedBucket().length};j.prototype.userBucketIsLive=function(){return this.$FBStoriesStore4(this.getUserBucketData())};j.prototype.isSelectedBucketLive=function(){return this.$FBStoriesStore4(this.$FBStoriesStore1())};j.prototype.getSelectedBucketOwnerType=function(){return c("FBStoriesBucketHelper").getLoggingType(this.$FBStoriesStore1())};j.prototype.$FBStoriesStore4=function(k){return c("FBStoriesBucketHelper").isLive(k)};j.prototype.getCurrentThreadViewers=function(){__p&&__p();var k={hasNewViewers:false,hasNewFriendViewers:false,hasNewConnectionsViewers:false,friends:[],connections:[],totalCount:0,totalNew:0,nonFriendsCount:0};if(!this.isOwnThread())return k;var l=this.getCurrentThreadForSelectedBucket(),m=c("FBStoriesThreadHelper").getViewers(l),n=this.getUserInfo().userID;k=m.reduce(function(p,q){__p&&__p();var r=c("FBStoriesThreadHelper").getStoryViewerId(q);if(r!==n){var s,t=((s=q)!=null?(s=s.node)!=null?s.is_viewer_friend:s:s)||false,u=t?"friends":"connections",v=c("FBStoriesThreadHelper").getStoryViewerSeenTime(q),w=v>=c("FBStoriesThreadHelper").getSeenReceiptsLastSeenTime(l);p[u].push(babelHelpers["extends"]({},q.node,{seenTime:v,isNewViewer:w}));p.totalNew+=w?1:0;p.hasNewViewers=p.hasNewViewers||w;p.hasNewFriendViewers=p.hasNewFriendViewers||w&&t;p.hasNewConnectionsViewers=p.hasNewViewers||w&&!t}return p},k);var o=this.getNonFriendsSeenCount();return Object.assign(k,{totalCount:o+m.length,nonFriendsCount:o})};j.prototype.isUnseenMode=function(){return this.getState().unseenMode};j.prototype.getThreadCount=function(k){__p&&__p();var l=this.getBucketByIndex(k);if(this.$FBStoriesStore4(l))return 0;if(k===0){var m=this.$FBStoriesStore3(this.getUserBucketData());return m.length}if(k>0){var n=this.$FBStoriesStore3(l);return n.length}return-1};j.prototype.getUnseenThreadIndex=function(k){return c("FBStoriesBucketHelper").getUnseenThreadIndex(this.getBucketByIndex(k))};j.prototype.getAllowedNavigationType=function(){var k=this.getSelectedBucketIndex(),l=k===0||k==1&&!c("FBStoriesBucketHelper").hasData(this.getUserBucketData()),m=k===this.getBucketCount()-1,n=l&&this.getCurrentThreadIndexForSelectedBucket()==0,o=m&&this.getCurrentThreadIndexForSelectedBucket()===this.getThreadsForSelectedBucket().length-1;if(n)return"NEXT_ONLY";if(o)return"PREV_ONLY";return"BOTH"};j.prototype.hasSeenBucketInCurrentSession=function(k){var l=this.getState().lastViewedThreadIndexForBucket;return l.get(k)!==undefined};j.prototype.getLastSeenThreadIndexForBucket=function(k){var l=this.getState().lastViewedThreadIndexForBucket,m=l.get(k);return m==undefined?0:m};j.prototype.$FBStoriesStore2=function(){return this.$FBStoriesStore3(this.getUserBucketData())};j.prototype.$FBStoriesStore1=function(){return this.getBucketByIndex(this.getSelectedBucketIndex())};j.prototype.getBucketByIndex=function(k){var l;return k===0?this.getUserBucketData():(l=this.getFriendsBucketData())!=null?l[k-1]:l};j.prototype.$FBStoriesStore8=function(k,l){var m=this.$FBStoriesStore3(l),n=m.filter(function(o){return o.id===k});return n.length>0?n[0]:null};j.prototype.$FBStoriesStore3=function(k){return c("FBStoriesBucketHelper").getThreads(k)};j.prototype.$FBStoriesStore7=function(k){var l=this.getSelectedBucketOwner(),m=this.getThreadsForSelectedBucket()[k];if(!m)return null;var n=c("FBStoriesThreadHelper").getMedia(m),o=c("FBStoriesThreadHelper").getWWWTextFormatMetadata(m),p=c("FBStoriesThreadHelper").getMessageText(m);return{isLive:false,media:n,bucketOwner:l,threadOwner:c("FBStoriesThreadHelper").getOwner(m)||{name:null,id:null,is_viewer_friend:false,profile_picture:null},participants:[],isSeen:c("FBStoriesThreadHelper").isSeenByViewer(m),latestMessageID:c("FBStoriesThreadHelper").getLatestMessageID(m),time:c("FBStoriesThreadHelper").getTime(m),threadID:c("FBStoriesThreadHelper").getId(m),cameraPostType:c("FBStoriesThreadHelper").getCameraPostType(m),cameraPostSource:c("FBStoriesThreadHelper").getCameraPostSource(m),wwwTextFormatMetadata:o,messageText:p}};j.prototype.getThreadDataForSelectedLiveBucket=function(){var k=this.$FBStoriesStore1();return this.$FBStoriesStore9(k)};j.prototype.$FBStoriesStore9=function(k){if(!k)return null;var l=c("FBStoriesBucketHelper").getLiveVideo(k);if(!l||!this.$FBStoriesStore4(k))return null;var m=this.getSelectedBucketOwner();return{isLive:true,media:l,bucketOwner:m,isSeen:false,cameraPostType:c("FBStoriesBucketHelper").getCameraPostType(k)}};j.prototype.isSelectedBucketLiveAndEnded=function(){return this.isSelectedBucketLive()&&c("FBStoriesBucketHelper").hasLiveVideoEnded(this.$FBStoriesStore1())};j.prototype.getSATPNativeRender=function(){return this.getState().showSATPNativeRender};j.prototype.getIsCommercialBreakRunning=function(k){return!!this.getState().isCommercialBreakRunning.get(k)};j.prototype.getVideoMediaIdForBucketIndexAndThreadIndex=function(k,l){__p&&__p();var m=this.getBucketByIndex(k);if(!m)return null;if(this.$FBStoriesStore4(m)){var n,o=this.$FBStoriesStore9(m);return(n=o)!=null?(n=n.media)!=null?n.id:n:n}var p=this.$FBStoriesStore3(m);if(l<0||l>=p.length)return null;var q=c("FBStoriesThreadHelper").getMedia(p[l]);if(!q)return null;if(!c("CameraPostMediaHelper").isVideo(q))return null;return q.id};j.prototype.isViewerOpen=function(){return this.getState().isViewerOpen};function j(){h.apply(this,arguments)}f.exports=new j(c("FBStoriesDispatcher"))}),null);
__d("FBStoriesWWWPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$FBStoriesWWWPerfTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:FBStoriesWWWPerfLoggerConfig",this.$FBStoriesWWWPerfTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$FBStoriesWWWPerfTypedLogger1={};return this};h.prototype.updateData=function(j){this.$FBStoriesWWWPerfTypedLogger1=babelHelpers["extends"]({},this.$FBStoriesWWWPerfTypedLogger1,j);return this};h.prototype.setEventTotalTime=function(j){this.$FBStoriesWWWPerfTypedLogger1.event_total_time=j;return this};h.prototype.setEventType=function(j){this.$FBStoriesWWWPerfTypedLogger1.event_type=j;return this};h.prototype.setVC=function(j){this.$FBStoriesWWWPerfTypedLogger1.vc=j;return this};var i={event_total_time:true,event_type:true,vc:true};f.exports=h}),null);
__d("FBStoriesLoggingHelper",["BackstageMediaType","DirectMessagingTypedLogger","FBStoriesWWWPerfTypedLogger","FBStoriesBucketHelper","FBStoriesLoggingConstants","FBStoriesStore","FBLogger","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={_eventStartTimes:{},logStoryTrayLoad:function i(j){__p&&__p();var k=j.userBucketData,l=j.friendsBucketData,m=c("FBStoriesBucketHelper").hasData(k),n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=new Map();if(c("FBStoriesBucketHelper").isLive(k))p++;l.forEach(function(x){__p&&__p();n++;if(c("FBStoriesBucketHelper").getUnseenCount(x)>0)o++;if(c("FBStoriesBucketHelper").isLive(x))p++;var y=c("FBStoriesBucketHelper").getLoggingType(x);switch(y){case c("FBStoriesLoggingConstants").PAGE_STORY:q++;break;case c("FBStoriesLoggingConstants").EVENT_STORY:r++;break;case c("FBStoriesLoggingConstants").GROUP_STORY:s++;break;case c("FBStoriesLoggingConstants").STORY_PROMOTION:t++;break;case c("FBStoriesLoggingConstants").FOLLOWEE_STORY:u++;break;case c("FBStoriesLoggingConstants").FRIEND_STORY:v++;break;default:c("FBLogger")("FIXME").mustfix("storyOwnerType not found",y)}var z=c("FBStoriesBucketHelper").getOwnerId(x),A=c("FBStoriesBucketHelper").getThreadIDs(x);if(c("FBStoriesBucketHelper").isLive(x)){var B,C=(B=c("FBStoriesBucketHelper").getLiveVideo(x))!=null?B.id:B;if(C)A.push(C)}w.set(z,A)});this._getLogger().setName(c("FBStoriesLoggingConstants").ACTION_TRAY_LOAD).setHasMyStory(m).setNumberStories(n).setNumberNewStories(o).setNumberLiveStories(p).setLiveStoriesInTray(p).setPageStoriesInTray(q).setGroupStoriesInTray(s).setEventStoriesInTray(r).setFolloweeStoriesInTray(u).setFriendStoriesInTray(v).setPromotionStoriesInTray(t).setStoryThreadIds(w).log()},storyLog:function i(j,k){var l=c("FBStoriesStore").getSelectedBucketCameraPostType(),m=c("FBStoriesStore").getSelectedBucketOwnerID(),n=c("FBStoriesStore").getSelectedBucketOwnerType(),o=c("FBStoriesStore").getThreadCountForSelectedBucket(),p=c("FBStoriesStore").getSelectedBucketUnseenCount()>0,q=c("FBStoriesStore").getSelectedBucketIndex();this._getLogger().setCameraPostType(l).setName(j).setActionSource(k).setStoryOwner(m).setStoryOwnerType(n).setThreadCount(o).setHasNewContent(p).setStoryIndex(q).log()},mediaLog:function i(j){var k=c("FBStoriesStore").getCurrentThreadCameraPostTypeForSelectedBucket(),l=c("FBStoriesStore").getSelectedBucketOwnerID(),m=c("FBStoriesStore").getSelectedBucketOwnerType(),n=c("FBStoriesStore").getCurrentThreadMediaIDForSelectedBucket(),o=c("FBStoriesStore").getCurrentThreadMediaTypeForSelectedBucket(),p=c("FBStoriesStore").getCurrentThreadMediaViewerCountForSelectedBucket(),q=c("FBStoriesStore").getSelectedBucketIndex(),r=c("FBStoriesStore").getCurrentThreadIDForSelectedBucket(),s=c("BackstageMediaType").UNKNOWN;if(o==="Photo")s=c("BackstageMediaType").PHOTO;else if(o==="Video")s=c("BackstageMediaType").VIDEO;else if(o===c("BackstageMediaType").LIVE)s=c("BackstageMediaType").LIVE;this._getLogger().setCameraPostType(k).setName(j).setStoryOwner(l).setStoryOwnerType(m).setMediaType(s).setClientMediaID(n).setNumberViewers(p).setThreadID(r).setStoryIndex(q).log()},logEventStart:function i(j){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,j))return;this._eventStartTimes[j]=Date.now();this._getPerfLogger().setEventType(j).setEventTotalTime(0).log()},logEventEnd:function i(j){if(Object.prototype.hasOwnProperty.call(this._eventStartTimes,j)===false)return;var k=Object.prototype.hasOwnProperty.call(this._eventStartTimes,j)?Date.now()-this._eventStartTimes[j]:-1;this._getPerfLogger().setEventType(j).setEventTotalTime(k).log();delete this._eventStartTimes[j]},_getLogger:function i(){return new(c("DirectMessagingTypedLogger"))()},_getPerfLogger:function i(){return new(c("FBStoriesWWWPerfTypedLogger"))()}};f.exports=h}),null);
__d("FBStoriesActionsHelper",["FBStoriesPrefetcher","FBStoriesStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={checkAllBucketsViewed:function i(j){var k=c("FBStoriesStore").getBucketCount();return j>=k||j<0},getNextBucketAndThreadIndex:function i(j,k){__p&&__p();var l=k?j+1:j-1,m=0;if(c("FBStoriesStore").isUnseenMode()){var n=false;while(n===false&&!h.checkAllBucketsViewed(l)){m=c("FBStoriesStore").getUnseenThreadIndex(l);n=m>=0;if(!n)l=k?l+1:l-1}if(!n&&!k){l=j-1;m=c("FBStoriesStore").getLastSeenThreadIndexForBucket(l);while(!c("FBStoriesStore").hasSeenBucketInCurrentSession(l)&&l>=0){l-=1;m=c("FBStoriesStore").getLastSeenThreadIndexForBucket(l)}}}else if(!k)m=c("FBStoriesStore").getLastSeenThreadIndexForBucket(l);return{nextBucketIndex:l,nextThreadIndex:m}},prefetchForCurrentThreadAndBucket:function i(){c("FBStoriesPrefetcher").prefetch(c("FBStoriesStore").getSelectedBucketIndex(),c("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())}};f.exports=h}),null);
__d("FBStoriesPrefetcher",["Bootloader","FBStoriesActionsHelper","FBStoriesStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={prefetch:function i(j,k){this._prefetchVideos(j,k)},_prefetchVideos:function i(j,k){this._prefetchThreadVideo(j,k);this._prefetchForwardVideo(j,k);this._prefetchBackwardsVideo(j,k)},_prefetchForwardVideo:function i(j,k){this._prefetchVideo(true,j,k)},_prefetchBackwardsVideo:function i(j,k){this._prefetchVideo(false,j,k)},_prefetchVideo:function i(j,k,l){__p&&__p();var m=c("FBStoriesStore").getThreadCount(k),n=j?l+1:l-1;while(n>=0&&n<m){if(this._prefetchThreadVideo(k,n))return true;n=j?n+1:n-1}var o=k;while(!c("FBStoriesActionsHelper").checkAllBucketsViewed(o)){var p=c("FBStoriesActionsHelper").getNextBucketAndThreadIndex(o,j),q=p.nextBucketIndex,r=p.nextThreadIndex;if(this._prefetchThreadVideo(q,r))return true;o=q}return false},_prefetchThreadVideo:function i(j,k){var l=c("FBStoriesStore").getVideoMediaIdForBucketIndexAndThreadIndex(j,k);if(!l)return false;c("Bootloader").loadModules(["VideoPlayerMetaData"],function(m){m.genVideoData(l,{allowDashPrefetch:true,forceHD:true})},"FBStoriesPrefetcher");return true}};f.exports=h}),null);
__d("XUnfollowAllProfileController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/follow/unfollow_all_profile/",{profile_ids:{type:"FBIDVector"},location:{type:"Int"}})}),null);
__d("FBStoriesActions",["FBStoriesActionTypes","AsyncRequest","CameraPostGraphQLAPI","CameraPostTypesHelper","FBStoriesDispatcher","FBStoriesActionsHelper","FBStoriesGraphQLAPI","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesStore","XPageFollowMutatorController","XUnfollowAllProfileController","JSResource"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FBStoriesDispatcher").dispatch,i={nextThread:function j(k){__p&&__p();var l=c("FBStoriesStore").isSelectedBucketLive();if(l){i.nextBucket();return}var m=c("FBStoriesStore").getThreadsForSelectedBucket(),n=c("FBStoriesStore").getCurrentThreadIndexForSelectedBucket(),o=k!==undefined?k:n+1;if(m.length===0)i.nextBucket();else if(o<=m.length-1)i.currentThreadIndexChanged(o);else i.nextBucket()},prevThread:function j(k){__p&&__p();var l=c("FBStoriesStore").isSelectedBucketLive();if(l){i.prevBucket();return}var m=c("FBStoriesStore").getThreadsForSelectedBucket(),n=c("FBStoriesStore").getCurrentThreadIndexForSelectedBucket(),o=k!==undefined?k:n-1;if(m.length===0)i.prevBucket();else if(o>=0)i.currentThreadIndexChanged(o,true);else i.prevBucket()},nextBucket:function j(){return i._transitionBucket(true)},prevBucket:function j(){return i._transitionBucket(false)},userSelectedBucket:function j(k){__p&&__p();var l=c("FBStoriesStore").getBucketIndexByBucketId(k);if(l===-1)return false;var m=c("FBStoriesStore").getUnseenThreadIndex(l),n=Math.max(0,m),o=c("FBStoriesStore").isOwnBucket(k);h({type:c("FBStoriesActionTypes").RESET_LOCAL_SEEN_HISTORY});h({type:c("FBStoriesActionTypes").SET_UNSEEN_MODE,value:!o&&m>=0});h({type:c("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:false});h({type:c("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:l});i.currentThreadIndexChanged(n);return true},updateCurrentThreadPercentDone:function j(k){h({type:c("FBStoriesActionTypes").SELECTED_THREAD_PERCENT_DONE,percentDone:k})},currentThreadIndexChanged:function j(k){__p&&__p();var l,m=arguments.length<=1||arguments[1]===undefined?false:arguments[1],n=c("FBStoriesStore").getCurrentThreadData(),o=c("FBStoriesStore").isOwnBucket();if(o&&n&&!n.isLive)i.markThreadViewersSeen(n.threadID);h({type:c("FBStoriesActionTypes").SELECTED_THREAD_IDX_CHANGED,index:k});i.updateCurrentThreadPercentDone(0);var p=c("FBStoriesStore").getUserInfo().userID,q=c("FBStoriesStore").getCurrentThreadData();if(q){if(!q.isLive)(function(){var r=q.threadID,s=q.latestMessageID;if(o)c("FBStoriesGraphQLAPI").loadViewerListForThread(r).done(function(t){return h({type:c("FBStoriesActionTypes").VIEWER_LIST_LOADED_FOR_THREAD,threadID:r,data:t})});else{h({type:c("FBStoriesActionTypes").UPDATE_THREAD_SEEN_OPTIMISTIC,threadID:r});c("CameraPostGraphQLAPI").markThreadSeen(p,r,s,q.cameraPostType)}})();c("FBStoriesActionsHelper").prefetchForCurrentThreadAndBucket()}else if(m)i.prevThread();else i.nextThread()},markThreadViewersSeen:function j(k){h({type:c("FBStoriesActionTypes").UPDATE_THREAD_VIEWERS_SEEN_OPTIMISTIC,threadID:k});c("FBStoriesGraphQLAPI").updateThreadSeenReciept(k)},_transitionBucket:function j(k,l){__p&&__p();var m=c("FBStoriesStore").getCurrentThreadData(),n=c("FBStoriesStore").isOwnBucket();if(n&&m&&!m.isLive)i.markThreadViewersSeen(m.threadID);l=l!==undefined?l:c("FBStoriesStore").getSelectedBucketIndex();var o=c("FBStoriesActionsHelper").getNextBucketAndThreadIndex(l,k),p=o.nextBucketIndex,q=o.nextThreadIndex,r=c("FBStoriesActionsHelper").checkAllBucketsViewed(p);h({type:c("FBStoriesActionTypes").SET_ALL_BUCKETS_VIEWED,value:r});if(r){if(n&&m&&!m.isLive)return i.markThreadViewersSeen(m.threadID);return undefined}i.removeEndedLiveVideo();h({type:c("FBStoriesActionTypes").SELECTED_BUCKET_IDX_CHANGED,bucketIndex:p});if(!c("FBStoriesStore").hasDataInSelectedBucket()&&!c("FBStoriesStore").isSelectedBucketLive()){if(k)return i.nextBucket();return i.prevBucket()}i.currentThreadIndexChanged(q);c("FBStoriesLoggingHelper").storyLog(c("FBStoriesLoggingConstants").ACTION_OPEN_STORY,c("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_PRIOR_STORY);return undefined},deleteThreadFromBucket:function j(k,l){if(!c("FBStoriesStore").isUserManagedThread(k,l))return;c("FBStoriesGraphQLAPI").deleteStory(c("FBStoriesStore").getUserInfo().userID,k);h({type:c("FBStoriesActionTypes").DELETE_THREAD_FROM_BUCKET,threadID:k,bucketID:l});i.nextThread(c("FBStoriesStore").getCurrentThreadIndexForSelectedBucket())},unFollowBucketOwner:function j(k,l,m){__p&&__p();if(!k||!m)return;var n=0;if(c("CameraPostTypesHelper").isPageStory(k)){var o=c("XPageFollowMutatorController").getURIBuilder().setInt("page_id",l).setBool("status",false).setEnum("location",n).getURI();new(c("AsyncRequest"))().setURI(o).send()}else if(c("CameraPostTypesHelper").isStory(k)){var p=c("XUnfollowAllProfileController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(p).setData({profile_ids:[l],location:n}).send()}h({type:c("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:m});i._transitionBucket(true,c("FBStoriesStore").getSelectedBucketIndex()-1)},removeEndedLiveVideo:function j(){if(!c("FBStoriesStore").isSelectedBucketLiveAndEnded())return;var k=c("FBStoriesStore").getSelectedBucketId();if(c("FBStoriesStore").getThreadsForSelectedBucket().length>0)h({type:c("FBStoriesActionTypes").REMOVE_ENDED_LIVE_VIDEO_FROM_BUCKET,bucketID:k});else h({type:c("FBStoriesActionTypes").REMOVE_BUCKET,bucketID:k})},setIsCommercialBreakRunning:function j(k,l){h({type:c("FBStoriesActionTypes").SET_IS_COMMERCIAL_BREAK_RUNNING,isCommercialBreakRunning:l,videoID:k})},toggleViewer:function j(k){h({type:c("FBStoriesActionTypes").SET_VIEWER_OPEN,value:k});return c("JSResource")("FBStoriesViewer").__setRef("FBStoriesActions").load().then(function(l){return l.getInstance().toggle(k)})},unselectBucket:function j(){h({type:c("FBStoriesActionTypes").UNSELECT_BUCKET})}};f.exports=i}),null);
__d("FBStoriesProductionWYSIWYG.react",["cx","CurrentUser","FBStoriesCameraMediaButtonsContainer.react","FBStoriesCameraMediaContainer.react","Image.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=40,j=function j(){function k(n,o){return"https://graph.facebook.com/"+n+"/picture?height="+o+"&width="+o}var l=c("React").createElement(c("Image.react"),{src:k(c("CurrentUser").getID(),i),className:"_2l62"}),m=c("React").createElement("div",{className:"_65dg"},c("React").createElement(c("XUIText.react"),{color:"white",display:"block",size:"medium",weight:"bold"},c("CurrentUser").getName()));return c("React").createElement("div",{className:"_2l5t"},c("React").createElement("div",{className:"_2l5y"},c("React").createElement("div",{className:"_2l5s"}),c("React").createElement("div",{className:"_2l60"},l,m),c("React").createElement(c("FBStoriesCameraMediaContainer.react"),null),c("React").createElement(c("FBStoriesCameraMediaButtonsContainer.react"),null)))};f.exports=j}),null);
__d("FBStoriesCameraActionTypes",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({SET_HAS_IMAGE:"SET_HAS_IMAGE",SET_HAS_MEDIASTREAM:"SET_HAS_MEDIASTREAM",SET_IMAGESOURCE:"SET_IMAGESOURCE",SET_IS_CAMERA_MEDIA_OPEN:"SET_IS_CAMERA_MEDIA_OPEN",SET_MEDIA_NODE:"SET_MEDIA_NODE",SET_MEDIASTREAM:"SET_MEDIASTREAM",SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS:"SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS",SET_PRIVACY_SETTINGS_MODE:"SET_PRIVACY_SETTINGS_MODE",SET_VIDEOSOURCE:"SET_VIDEOSOURCE"});f.exports=h}),null);
__d("FBStoriesCameraDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("FBStoriesProductionTypes",["immutable"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("immutable").Record({hasImage:undefined,hasMediaStream:undefined,isCameraMediaOpen:undefined,imageSource:undefined,mediaNode:undefined,mediaStream:undefined,privacySettingsCustomParticipants:undefined,privacySettingsMode:undefined,videoSource:undefined}));i=h&&h.prototype;function j(){h.apply(this,arguments)}var k={CAMERA_1:"CAMERA_1",CAMERA_2:"CAMERA_2",INITIAL_STAGE:"INITIAL_STAGE",UPLOAD_1:"UPLOAD_1"},l={UNSET:"UNSET",PUBLIC:"PUBLIC",FRIENDS_AND_CONNECTIONS:"FRIENDS_AND_CONNECTIONS",FRIENDS:"FRIENDS",CUSTOM:"CUSTOM"};f.exports={FBStoriesCameraState:j,FBStoriesProductionFlowStageTypes:k,UnifiedStoriesAudienceModeTypes:l}}),null);
__d("fbStoriesCameraReducer",["FBStoriesCameraActionTypes","FBStoriesProductionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FBStoriesProductionTypes").FBStoriesCameraState;function i(j,k){__p&&__p();switch(k.type){case c("FBStoriesCameraActionTypes").SET_HAS_IMAGE:return j.set("hasImage",k.hasImage);case c("FBStoriesCameraActionTypes").SET_HAS_MEDIASTREAM:return j.set("hasMediaStream",k.hasMediaStream);case c("FBStoriesCameraActionTypes").SET_IMAGESOURCE:return j.set("imageSource",k.imageSource);case c("FBStoriesCameraActionTypes").SET_IS_CAMERA_MEDIA_OPEN:return j.set("isCameraMediaOpen",k.isCameraMediaOpen);case c("FBStoriesCameraActionTypes").SET_MEDIA_NODE:return j.set("mediaNode",k.mediaNode);case c("FBStoriesCameraActionTypes").SET_MEDIASTREAM:return j.set("mediaStream",k.mediaStream);case c("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS:return j.set("privacySettingsCustomParticipants",k.privacySettingsCustomParticipants);case c("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_MODE:return j.set("privacySettingsMode",k.privacySettingsMode);case c("FBStoriesCameraActionTypes").SET_VIDEOSOURCE:return j.set("videoSource",k.videoSource);default:return j}}f.exports=i}),null);
__d("FBStoriesCameraStore",["fbStoriesCameraReducer","FBStoriesCameraDispatcher","FluxReduceStore","FBStoriesProductionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("FBStoriesProductionTypes").FBStoriesCameraState;h=babelHelpers.inherits(k,c("FluxReduceStore"));i=h&&h.prototype;k.prototype.getInitialState=function(){return new j()};k.prototype.reduce=function(l,m){return c("fbStoriesCameraReducer")(l,m)};function k(){h.apply(this,arguments)}f.exports=new k(c("FBStoriesCameraDispatcher"))}),null);
__d("XFBStoriesProductionController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/stories/create/",{})}),null);
__d("fbStoriesCameraSelectors",["FBStoriesProductionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("FBStoriesProductionTypes").FBStoriesCameraState,i=c("FBStoriesProductionTypes").FBStoriesProductionFlowStageTypes,j={hasImage:function k(l){return l.hasImage},hasMediaStream:function k(l){return l.hasMediaStream},imageSource:function k(l){return l.imageSource},isCameraMediaOpen:function k(l){return l.isCameraMediaOpen},mediaNode:function k(l){return l.mediaNode},mediaStream:function k(l){return l.mediaStream},privacySettingsCustomParticipants:function k(l){return l.privacySettingsCustomParticipants},privacySettingsMode:function k(l){return l.privacySettingsMode},productionFlowStage:function k(l){if(l.hasImage&&!l.hasMediaStream)return i.UPLOAD_1;if(!l.hasImage&&l.hasMediaStream)return i.CAMERA_1;if(l.hasImage&&l.hasMediaStream)return i.CAMERA_2;return i.INITIAL_STAGE},videoSource:function k(l){return l.videoSource}};f.exports=j}),null);
__d("FBStoriesProductionAPI",["AsyncRequest","emptyFunction","fbStoriesCameraSelectors","FBStoriesCameraStore","XFBStoriesProductionController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={createStoryFromImageURL:function i(){var j=c("fbStoriesCameraSelectors").imageSource(c("FBStoriesCameraStore").getState());if(j){var k=j.split(",")[1],l=new FormData();l.append("image_bitmap",k);var m=c("XFBStoriesProductionController").getURIBuilder().getURI(),n=new(c("AsyncRequest"))().setURI(m).setMethod("POST").setRawData(l).setHandler(c("emptyFunction")).setErrorHandler(c("emptyFunction"));n.send()}}};f.exports=h}),null);
__d("FBStoriesCameraActions",["FBStoriesCameraActionTypes","FBStoriesCameraDialogViewer","FBStoriesCameraDispatcher","FBStoriesCameraLeavingDialogViewer","FBStoriesCameraErrorDialogViewer","fbStoriesCameraSelectors","FBStoriesCameraStore","FBStoriesCameraUtils","FBStoriesProductionAPI","FBStoriesUploaderFileSizeExceedDialogViewer"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={cancelProductionFlow:function i(){h.discardImage();h.stopCameraStream()},closeCameraDialog:function i(){h.setIsCameraMediaOpen(false);c("FBStoriesCameraDialogViewer").getInstance().close();c("FBStoriesCameraLeavingDialogViewer").getInstance().close()},closeCameraErrorDialog:function i(){c("FBStoriesCameraErrorDialogViewer").getInstance().close()},closeCameraLeavingDialog:function i(){c("FBStoriesCameraLeavingDialogViewer").getInstance().close()},closeUploaderFileSizeExceedDialog:function i(){c("FBStoriesUploaderFileSizeExceedDialogViewer").getInstance().close()},discardImage:function i(){h.setHasImage(false);h.setImageSource(undefined)},loadPrivacySettings:function i(){c("FBStoriesCameraUtils").loadPrivacySettings()},openCameraDialog:function i(){c("FBStoriesCameraDialogViewer").getInstance().open()},openCameraErrorDialog:function i(j){c("FBStoriesCameraErrorDialogViewer").getInstance().open(j)},openCameraLeavingDialog:function i(){c("FBStoriesCameraLeavingDialogViewer").getInstance().open()},openCameraMedia:function i(){h.setIsCameraMediaOpen(true)},openUploaderFileSizeExceedDialog:function i(){c("FBStoriesUploaderFileSizeExceedDialogViewer").getInstance().open()},retakePhoto:function i(){h.discardImage()},sendPhoto:function i(){var j=c("fbStoriesCameraSelectors").hasImage(c("FBStoriesCameraStore").getState());j&&c("FBStoriesProductionAPI").createStoryFromImageURL();h.closeCameraDialog()},setHasImage:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_HAS_IMAGE,hasImage:j})},setHasMediaStream:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_HAS_MEDIASTREAM,hasMediaStream:j})},setImageSource:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_IMAGESOURCE,imageSource:j})},setIsCameraMediaOpen:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_IS_CAMERA_MEDIA_OPEN,isCameraMediaOpen:j})},setMediaNode:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_MEDIA_NODE,mediaNode:j})},setMediaStream:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_MEDIASTREAM,mediaStream:j})},setPrivacySettingsCustomParticipants:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_CUSTOM_PARTICIPANTS,privacySettingsCustomParticipants:j})},setPrivacySettingsMode:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_PRIVACY_SETTINGS_MODE,privacySettingsMode:j})},setVideoSource:function i(j){c("FBStoriesCameraDispatcher").dispatch({type:c("FBStoriesCameraActionTypes").SET_VIDEOSOURCE,videoSource:j})},startCameraStream:function i(){c("FBStoriesCameraUtils").startCameraStream()},stopCameraStream:function i(){c("FBStoriesCameraUtils").stopCameraStream()},takePhoto:function i(){c("FBStoriesCameraUtils").takePhoto()},uploadPhoto:function i(j,k){c("FBStoriesCameraUtils").uploadPhoto(j,k)},uploadPhotoAndCloseFileSizeExceedDialog:function i(j,k){c("FBStoriesCameraUtils").uploadPhoto(j,k,h.closeUploaderFileSizeExceedDialog)}};f.exports=h}),null);
__d("FBStoriesCameraButtons.react",["fbt","React","XUIButton.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(l,{disabled:!this.props.hasImage,onClickSendPhoto:this.props.onClickSendPhoto}))};function k(){i.apply(this,arguments)}var l=function l(m){return c("React").createElement(c("XUIButton.react"),{action:"button",disabled:m.disabled,label:h._("Share"),onClick:m.onClickSendPhoto,use:"confirm"})};f.exports=k}),null);
__d("FBStoriesCameraButtonsContainer.react",["FBStoriesCameraActions","FBStoriesCameraButtons.react","fbStoriesCameraSelectors","FBStoriesCameraStore","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("FBStoriesCameraStore")]};j.calculateState=function(){return{hasImage:c("fbStoriesCameraSelectors").hasImage(c("FBStoriesCameraStore").getState())}};j.prototype.render=function(){return c("React").createElement(c("FBStoriesCameraButtons.react"),{hasImage:this.state.hasImage,onClickSendPhoto:c("FBStoriesCameraActions").sendPhoto})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBStoriesCameraPrivacyFooter.react",["ix","cx","fbt","asset","idx","Image.react","React","XUISpinner.react","XUIText.react","FBStoriesProductionTypes"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("FBStoriesProductionTypes").UnifiedStoriesAudienceModeTypes;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){if(!this.props.privacyMode)return c("React").createElement(c("XUISpinner.react"),null);return c("React").createElement(o,null,c("React").createElement(p,{privacyMode:this.props.privacyMode,customParticipants:this.props.customParticipants}))};function n(){k.apply(this,arguments)}var o=function o(w){return c("React").createElement("div",{className:"_3m-z"},c("React").createElement(c("Image.react"),{className:"_l-c",src:h("404279")}),c("React").createElement(c("XUIText.react"),{className:"_l-d"},j._("Visible in your story to"),w.children,j._("for 24 hours")))},p=function p(w){switch(w.privacyMode){case m.UNSET:return c("React").createElement(s,null);case m.PUBLIC:return c("React").createElement(u,null);case m.FRIENDS_AND_CONNECTIONS:return c("React").createElement(s,null);case m.FRIENDS:return c("React").createElement(t,null);case m.CUSTOM:return c("React").createElement(q,{participants:w.customParticipants});default:return null}},q=function q(w){return c("React").createElement(v,{iconImageSource:h("439296")},c("React").createElement(r,{participants:w.participants}))},r=function r(w){__p&&__p();if(!w.participants)return null;var x=w.participants.length,y=w.participants.map(function(z){var A;return(A=z)!=null?(A=A.actor)!=null?A.name:A:A});switch(x){case 0:return j._("No One");case 1:return j._("{name_of_friend_connection}",[j.param("name_of_friend_connection",y[0])]);case 2:return j._("{name_of_first_friend_connection} and {name_of_second_friend_connection}",[j.param("name_of_first_friend_connection",y[0]),j.param("name_of_second_friend_connection",y[1])]);case 3:return j._("{names_of_first_two_friends_connections} and {name_of_third_friend_connection}",[j.param("names_of_first_two_friends_connections",y.slice(0,2).join(", ")),j.param("name_of_third_friend_connection",y[2])]);default:return j._({"s":"{names_of_first_three_friends_connections} and {num_others} other","p":"{names_of_first_three_friends_connections} and {num_others} others"},[j.param("names_of_first_three_friends_connections",y.slice(0,3).join(", ")),j.param("num_others",x-3),j["enum"](x-3===1?"s":"p",{s:"other",p:"others"})])}},s=function s(){return c("React").createElement(v,{iconImageSource:h("372431")},j._("Friends and Connections"))},t=function t(){return c("React").createElement(v,{iconImageSource:h("358752")},j._("Friends Only"))},u=function u(){return c("React").createElement(v,{iconImageSource:h("361678")},j._("Public"))},v=function v(w){return[c("React").createElement(c("Image.react"),{className:"_l-i",key:"image",src:w.iconImageSource}),c("React").createElement(c("XUIText.react"),{className:"_l-j",key:"text",weight:"bold"},w.children)]};f.exports=n}),null);
__d("FBStoriesCameraPrivacyFooterContainer.react",["FBStoriesCameraStore","FBStoriesCameraPrivacyFooter.react","fbStoriesCameraSelectors","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("FBStoriesCameraStore")]};j.calculateState=function(){return{privacySettingsCustomParticipants:c("fbStoriesCameraSelectors").privacySettingsCustomParticipants(c("FBStoriesCameraStore").getState()),privacySettingsMode:c("fbStoriesCameraSelectors").privacySettingsMode(c("FBStoriesCameraStore").getState())}};j.prototype.render=function(){return c("React").createElement(c("FBStoriesCameraPrivacyFooter.react"),{customParticipants:this.state.privacySettingsCustomParticipants,privacyMode:this.state.privacySettingsMode})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBStoriesCameraDialog.react",["fbt","FBStoriesCameraButtonsContainer.react","FBStoriesCameraPrivacyFooterContainer.react","FBStoriesProductionWYSIWYG.react","React","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=600,l=h._("Add to Your Story");i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$FBStoriesCameraDialog1=function(){if(this.props.hasImage)this.props.onOpenLeavingDialog();else this.props.onCloseDialog()}.bind(this),o}m.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{hideOnEscape:true,isStrictlyControlled:true,label:l,onBlur:this.$FBStoriesCameraDialog1,onHide:this.$FBStoriesCameraDialog1,overflow:"hidden",shown:true,width:k},c("React").createElement(c("XUIDialogTitle.react"),null,l),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("FBStoriesProductionWYSIWYG.react"),null)),c("React").createElement(c("XUIDialogFooter.react"),{leftContent:c("React").createElement(c("FBStoriesCameraPrivacyFooterContainer.react"),null)},c("React").createElement(c("FBStoriesCameraButtonsContainer.react"),null)))};f.exports=m}),null);
__d("FBStoriesCameraDialogContainer.react",["FBStoriesCameraActions","FBStoriesCameraStore","FBStoriesCameraDialog.react","fbStoriesCameraSelectors","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("FBStoriesCameraStore")]};j.calculateState=function(){return{hasImage:c("fbStoriesCameraSelectors").hasImage(c("FBStoriesCameraStore").getState())}};j.prototype.componentWillMount=function(){c("FBStoriesCameraActions").loadPrivacySettings()};j.prototype.render=function(){return c("React").createElement(c("FBStoriesCameraDialog.react"),{hasImage:this.state.hasImage,onCloseDialog:c("FBStoriesCameraActions").closeCameraDialog,onOpenLeavingDialog:c("FBStoriesCameraActions").openCameraLeavingDialog})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBStoriesCameraDialogViewer",["DOM","FBStoriesCameraDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="fb_stories_camera_dialog";i.getInstance=function(){if(!this.$FBStoriesCameraDialogViewer3)i.$FBStoriesCameraDialogViewer3=new i();return i.$FBStoriesCameraDialogViewer3};function i(){this.$FBStoriesCameraDialogViewer1=false;this.$FBStoriesCameraDialogViewer2=c("DOM").create("div",{id:h});if(document.body)document.body.appendChild(this.$FBStoriesCameraDialogViewer2)}i.prototype.open=function(){if(this.$FBStoriesCameraDialogViewer1)return;this.$FBStoriesCameraDialogViewer1=true;c("ReactDOM").render(c("React").createElement(c("FBStoriesCameraDialogContainer.react"),null),this.$FBStoriesCameraDialogViewer2)};i.prototype.close=function(){if(!this.$FBStoriesCameraDialogViewer1)return;this.$FBStoriesCameraDialogViewer1=false;c("ReactDOM").unmountComponentAtNode(this.$FBStoriesCameraDialogViewer2)};f.exports=i}),null);
__d("FBStoriesCameraErrorDialog.react",["fbt","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=450,l=h._("No camera detected"),m=h._("Please check your camera's connection and ensure your camera is not already in use by another application."),n=h._("Camera permission denied"),o=h._("You have blocked camera access. To enable, please update your browser settings to allow access."),p=h._("Unable to find camera"),q=h._("Please connect a camera and verify correct camera permissions in your browser.");i=babelHelpers.inherits(r,c("React").Component);j=i&&i.prototype;r.prototype.render=function(){__p&&__p();var t=l,u=m;switch(this.props.errorName){case"PermissionDeniedError":t=n;u=o;break;case"ConstraintNotSatisfiedError":t=p;u=q;break;default:break}return c("React").createElement(c("XUIDialog.react"),{hideOnEscape:true,isStrictlyControlled:true,label:t,onBlur:this.props.onOkay,onHide:this.props.onOkay,overflow:"hidden",shown:true,width:k},c("React").createElement(c("XUIDialogTitle.react"),null,t),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("XUIText.react"),null,u)),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(s,{onOkay:this.props.onOkay})))};function r(){i.apply(this,arguments)}var s=function s(t){return c("React").createElement(c("XUIButton.react"),{action:"button",label:h._("OK"),onClick:t.onOkay,use:"confirm"})};f.exports=r}),null);
__d("FBStoriesCameraErrorDialogViewer",["DOM","FBStoriesCameraActions","FBStoriesCameraErrorDialog.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="fb_stories_camera_not_detected_dialog";i.getInstance=function(){if(!this.$FBStoriesCameraErrorDialogViewer3)i.$FBStoriesCameraErrorDialogViewer3=new i();return i.$FBStoriesCameraErrorDialogViewer3};function i(){this.$FBStoriesCameraErrorDialogViewer1=false;this.$FBStoriesCameraErrorDialogViewer2=c("DOM").create("div",{id:h});if(document.body)document.body.appendChild(this.$FBStoriesCameraErrorDialogViewer2)}i.prototype.open=function(j){if(this.$FBStoriesCameraErrorDialogViewer1)return;this.$FBStoriesCameraErrorDialogViewer1=true;c("ReactDOM").render(c("React").createElement(c("FBStoriesCameraErrorDialog.react"),{errorName:j,onOkay:c("FBStoriesCameraActions").closeCameraErrorDialog}),this.$FBStoriesCameraErrorDialogViewer2)};i.prototype.close=function(){if(!this.$FBStoriesCameraErrorDialogViewer1)return;this.$FBStoriesCameraErrorDialogViewer1=false;c("ReactDOM").unmountComponentAtNode(this.$FBStoriesCameraErrorDialogViewer2)};f.exports=i}),null);
__d("FBStoriesCameraLeavingDialog.react",["fbt","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=450,l=h._("Leave Page?");i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{hideOnEscape:true,isStrictlyControlled:true,label:l,onBlur:this.props.onStay,onHide:this.props.onStay,overflow:"hidden",shown:true,width:k},c("React").createElement(c("XUIDialogTitle.react"),null,l),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("XUIText.react"),null,h._("You haven't shared your photo yet. Do you want to leave without sharing?"))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(o,{onStay:this.props.onStay}),c("React").createElement(n,{onLeave:this.props.onLeave})))};function m(){i.apply(this,arguments)}var n=function n(p){return c("React").createElement(c("XUIButton.react"),{action:"button",label:h._("Leave This Page"),onClick:p.onLeave,use:"confirm"})},o=function o(p){return c("React").createElement(c("XUIButton.react"),{action:"button",label:h._("Stay on This Page"),onClick:p.onStay,use:"default"})};f.exports=m}),null);
__d("FBStoriesCameraLeavingDialogViewer",["DOM","FBStoriesCameraActions","FBStoriesCameraLeavingDialog.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="fb_stories_camera_leaving_dialog";i.getInstance=function(){if(!this.$FBStoriesCameraLeavingDialogViewer3)i.$FBStoriesCameraLeavingDialogViewer3=new i();return i.$FBStoriesCameraLeavingDialogViewer3};function i(){this.$FBStoriesCameraLeavingDialogViewer1=false;this.$FBStoriesCameraLeavingDialogViewer2=c("DOM").create("div",{id:h});if(document.body)document.body.appendChild(this.$FBStoriesCameraLeavingDialogViewer2)}i.prototype.open=function(){if(this.$FBStoriesCameraLeavingDialogViewer1)return;this.$FBStoriesCameraLeavingDialogViewer1=true;c("ReactDOM").render(c("React").createElement(c("FBStoriesCameraLeavingDialog.react"),{onLeave:c("FBStoriesCameraActions").closeCameraDialog,onStay:c("FBStoriesCameraActions").closeCameraLeavingDialog}),this.$FBStoriesCameraLeavingDialogViewer2)};i.prototype.close=function(){if(!this.$FBStoriesCameraLeavingDialogViewer1)return;this.$FBStoriesCameraLeavingDialogViewer1=false;c("ReactDOM").unmountComponentAtNode(this.$FBStoriesCameraLeavingDialogViewer2)};f.exports=i}),null);
__d("FBDragDropFileInput.react",["cx","DragDropTarget","React","ReactDOM","joinClasses","shallowCompare"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;function k(event){return event.currentTarget}i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$FBDragDropFileInput2=function(){c("ReactDOM").findDOMNode(this.refs.fileInput).click()}.bind(this),this.$FBDragDropFileInput1=function(r){__p&&__p();var s=[],t=[];if(r.length>1&&!this.props.multiple)s.push({type:"too_many_files"});for(var u=0;u<r.length;u++){var v=r[u];if(this.$FBDragDropFileInput4(v.type))t.push(v);else s.push({type:"incorrect_type",data:{name:v.name}})}this.props.onSelect(t,s)}.bind(this),this.$FBDragDropFileInput3=function(event){event.preventDefault();this.$FBDragDropFileInput1(k(event).files)}.bind(this),n}l.prototype.shouldComponentUpdate=function(m){return c("shallowCompare")(this,m)};l.prototype.componentDidMount=function(){new(c("DragDropTarget"))(c("ReactDOM").findDOMNode(this)).setOnFilesDropCallback(this.$FBDragDropFileInput1).enable()};l.prototype.render=function(){var m=this.props.className;return c("React").createElement("div",{className:c("joinClasses")(m,"_44he"),onClick:this.$FBDragDropFileInput2,role:"presentation"},this.props.children,c("React").createElement("input",{accept:this.props.mimeTypes.join(","),className:"_44hf",multiple:this.props.multiple,onChange:this.$FBDragDropFileInput3,ref:"fileInput",type:"file",value:""}))};l.prototype.$FBDragDropFileInput4=function(m){var n=this.props.mimeTypes,o=m.substring(0,m.indexOf("/"))+"/*";return n.includes(m)||n.includes(o)};f.exports=l}),null);
__d("FBStoriesCameraMediaButtons.react",["ix","cx","fbt","asset","FBDragDropFileInput.react","FBStoriesProductionTypes","Image.react","Link.react","React","XUIButton.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("FBStoriesProductionTypes").FBStoriesProductionFlowStageTypes;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){switch(this.props.productionFlowStage){case m.INITIAL_STAGE:return c("React").createElement("div",{className:"_3_mm"},c("React").createElement(t,{onClickUploadPhoto:this.props.onClickUploadPhoto}),c("React").createElement(p,{onClickOpenCamera:this.props.onClickOpenCamera}));case m.CAMERA_1:return c("React").createElement("div",{className:"_3_mm"},c("React").createElement(o,{onClickBack:this.props.onClickCancel}),c("React").createElement(s,{onClickTakePhoto:this.props.onClickTakePhoto}));case m.CAMERA_2:return c("React").createElement("div",{className:"_3_mm"},c("React").createElement(q,{onClickRetakePhoto:this.props.onClickRetakePhoto}));case m.UPLOAD_1:return c("React").createElement("div",{className:"_3_mm"},c("React").createElement(o,{onClickBack:this.props.onClickCancel}),c("React").createElement(r,{onClickReuploadPhoto:this.props.onClickUploadPhoto}));default:return null}};function n(){k.apply(this,arguments)}var o=function o(u){return c("React").createElement(c("XUIButton.react"),{action:"button",className:"_lvf",image:c("React").createElement(c("Image.react"),{src:h("402328")}),label:j._("Back"),onClick:u.onClickBack,size:"large",use:"default"})},p=function p(u){return c("React").createElement(c("XUIButton.react"),{action:"button",image:c("React").createElement(c("Image.react"),{src:h("419139")}),label:j._("Open Camera"),onClick:u.onClickOpenCamera,size:"large",use:"default"})},q=function q(u){return c("React").createElement(c("XUIButton.react"),{action:"button",label:j._("Retake Photo"),onClick:u.onClickRetakePhoto,size:"large",use:"default"})},r=function r(u){return c("React").createElement(c("FBDragDropFileInput.react"),{className:"_3_mn",mimeTypes:["image/*"],multiple:false,onSelect:u.onClickReuploadPhoto},c("React").createElement(c("Link.react"),{role:"button",target:"_blank"},c("React").createElement(c("XUIButton.react"),{action:"button",image:c("React").createElement(c("Image.react"),{src:h("437914")}),label:j._("Change Photo"),size:"large",use:"default"})))},s=function s(u){return c("React").createElement(c("XUIButton.react"),{action:"button",image:c("React").createElement(c("Image.react"),{src:h("419139")}),label:j._("Take Photo"),onClick:u.onClickTakePhoto,size:"large",use:"default"})},t=function t(u){return c("React").createElement(c("FBDragDropFileInput.react"),{className:"_3_mn",mimeTypes:["image/*"],multiple:false,onSelect:u.onClickUploadPhoto},c("React").createElement(c("Link.react"),{role:"button",target:"_blank"},c("React").createElement(c("XUIButton.react"),{action:"button",image:c("React").createElement(c("Image.react"),{src:h("364477")}),label:j._("Upload Photo"),size:"large",use:"default"})))};f.exports=n}),null);
__d("FBStoriesCameraMediaButtonsContainer.react",["FBStoriesCameraActions","FBStoriesCameraStore","FBStoriesCameraMediaButtons.react","fbStoriesCameraSelectors","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("FBStoriesCameraStore")]};j.calculateState=function(){return{hasImage:c("fbStoriesCameraSelectors").hasImage(c("FBStoriesCameraStore").getState()),hasMediaStream:c("fbStoriesCameraSelectors").hasMediaStream(c("FBStoriesCameraStore").getState()),productionFlowStage:c("fbStoriesCameraSelectors").productionFlowStage(c("FBStoriesCameraStore").getState())}};j.prototype.render=function(){return c("React").createElement(c("FBStoriesCameraMediaButtons.react"),{hasImage:this.state.hasImage,hasMediaStream:this.state.hasMediaStream,onClickCancel:c("FBStoriesCameraActions").cancelProductionFlow,onClickOpenCamera:c("FBStoriesCameraActions").startCameraStream,onClickRetakePhoto:c("FBStoriesCameraActions").retakePhoto,onClickTakePhoto:c("FBStoriesCameraActions").takePhoto,onClickUploadPhoto:c("FBStoriesCameraActions").uploadPhoto,productionFlowStage:this.state.productionFlowStage})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBStoriesCameraMedia.react",["cx","Image.react","React","ReactDOM"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.componentDidMount=function(){var l=c("ReactDOM").findDOMNode(this);this.props.onMediaReady(l)};k.prototype.render=function(){if(this.props.imageSource)return c("React").createElement("div",{className:"_1juc"},c("React").createElement(c("Image.react"),{className:"_3yws"+(!this.props.imageSource?" hidden_elem":""),src:this.props.imageSource}));if(this.props.videoSource)return c("React").createElement("div",{className:"_1juc"},c("React").createElement("video",{autoPlay:true,loop:true,muted:true,className:"_3yws _29d5"+(!this.props.videoSource?" hidden_elem":""),src:this.props.videoSource}));return c("React").createElement("div",{className:"_3yws"})};function k(){i.apply(this,arguments)}f.exports=k}),null);
__d("FBStoriesCameraMediaContainer.react",["FBStoriesCameraActions","FBStoriesCameraStore","FBStoriesCameraMedia.react","fbStoriesCameraSelectors","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.getStores=function(){return[c("FBStoriesCameraStore")]};j.calculateState=function(){return{imageSource:c("fbStoriesCameraSelectors").imageSource(c("FBStoriesCameraStore").getState()),videoSource:c("fbStoriesCameraSelectors").videoSource(c("FBStoriesCameraStore").getState())}};j.prototype.componentWillUnmount=function(){c("FBStoriesCameraActions").discardImage();c("FBStoriesCameraActions").stopCameraStream()};j.prototype.render=function(){return c("React").createElement(c("FBStoriesCameraMedia.react"),{imageSource:this.state.imageSource,onMediaReady:c("FBStoriesCameraActions").setMediaNode,videoSource:this.state.videoSource})};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBStoriesCameraUtils",["invariant","DOMQuery","FBStoriesCameraActions","fbStoriesCameraSelectors","FBStoriesCameraStore","FBStoriesGraphQLAPI","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=3e7,j={loadPrivacySettings:function k(){c("FBStoriesGraphQLAPI").loadPrivacySettings().done(function(l){var m,n,o=(m=l)!=null?(m=m.viewer)!=null?(m=m.unified_stories_setting)!=null?m.audience_mode:m:m:m,p=(n=l)!=null?(n=n.viewer)!=null?(n=n.unified_stories_setting)!=null?(n=n.custom_participants)!=null?n.nodes:n:n:n:n;c("FBStoriesCameraActions").setPrivacySettingsMode(o);c("FBStoriesCameraActions").setPrivacySettingsCustomParticipants(p)})},startCameraStream:function k(){__p&&__p();var l=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;l||h(0);l.call(navigator,{video:true,audio:true},function(m){if(m.getVideoTracks().length>0){var n=window.URL.createObjectURL(m);c("FBStoriesCameraActions").setVideoSource(n);c("FBStoriesCameraActions").setMediaStream(m);c("FBStoriesCameraActions").setHasMediaStream(true)}},function(m){c("FBStoriesCameraActions").openCameraErrorDialog(m.name)})},stopCameraStream:function k(){__p&&__p();var l=c("fbStoriesCameraSelectors").mediaStream(c("FBStoriesCameraStore").getState()),m=c("fbStoriesCameraSelectors").videoSource(c("FBStoriesCameraStore").getState());if(l instanceof MediaStream){l.getVideoTracks().forEach(function(n){return n.stop()});l.getAudioTracks().forEach(function(n){return n.stop()})}c("FBStoriesCameraActions").setHasMediaStream(false);if(m){window.URL.revokeObjectURL(m);c("FBStoriesCameraActions").setVideoSource(undefined)}},takePhoto:function k(){__p&&__p();var l=c("fbStoriesCameraSelectors").mediaNode(c("FBStoriesCameraStore").getState()),m=c("DOMQuery").find(l,"video");if(m instanceof HTMLVideoElement){var n=document.createElement("canvas");n.height=m.videoHeight;n.width=m.videoWidth;var o=n.getContext("2d");if(o){o.translate(n.width,0);o.scale(-1,1);o.drawImage(m,0,0,n.width,n.height);c("FBStoriesCameraActions").setImageSource(n.toDataURL());c("FBStoriesCameraActions").setHasImage(true)}}},uploadPhoto:function k(l,m,n){__p&&__p();var o;if(l.length>0){var o=function(){__p&&__p();var p=l[0];if(p.size>i){c("FBStoriesCameraActions").openUploaderFileSizeExceedDialog();return{v:void 0}}var q=new FileReader();q.readAsDataURL(p);q.onloadend=function(){c("FBStoriesCameraActions").setHasImage(true);c("FBStoriesCameraActions").setImageSource(q.result);n&&n()}}();if(typeof o==="object")return o.v}}};f.exports=j}),null);
__d("FBStoriesUploaderFileSizeExceedDialog.react",["cx","fbt","FBDragDropFileInput.react","Link.react","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=450,m=i._("File size too large");j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{hideOnEscape:true,isStrictlyControlled:true,label:m,onBlur:this.props.onCancel,onHide:this.props.onCancel,overflow:"hidden",shown:true,width:l},c("React").createElement(c("XUIDialogTitle.react"),null,m),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("XUIText.react"),null,i._("Your file exceeds the max file size of 30 MB. Please upload a file with smaller size."))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(o,{onCancel:this.props.onCancel}),c("React").createElement(p,{onUploadAnotherPhoto:this.props.onUploadAnotherPhoto})))};function n(){j.apply(this,arguments)}var o=function o(q){return c("React").createElement(c("XUIButton.react"),{action:"button",label:i._("Cancel"),onClick:q.onCancel,use:"default"})},p=function p(q){return c("React").createElement(c("FBDragDropFileInput.react"),{className:"_3_mn",mimeTypes:["image/*"],multiple:false,onSelect:q.onUploadAnotherPhoto},c("React").createElement(c("Link.react"),{role:"button",target:"_blank"},c("React").createElement(c("XUIButton.react"),{action:"button",label:i._("Upload Another Photo"),onClick:q.onUploadAnotherPhoto,use:"confirm"})))};f.exports=n}),null);
__d("FBStoriesUploaderFileSizeExceedDialogViewer",["DOM","FBStoriesCameraActions","FBStoriesUploaderFileSizeExceedDialog.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="fb_stories_camera_leaving_dialog";i.getInstance=function(){if(!this.$FBStoriesUploaderFileSizeExceedDialogViewer3)i.$FBStoriesUploaderFileSizeExceedDialogViewer3=new i();return i.$FBStoriesUploaderFileSizeExceedDialogViewer3};function i(){this.$FBStoriesUploaderFileSizeExceedDialogViewer1=false;this.$FBStoriesUploaderFileSizeExceedDialogViewer2=c("DOM").create("div",{id:h});if(document.body)document.body.appendChild(this.$FBStoriesUploaderFileSizeExceedDialogViewer2)}i.prototype.open=function(){if(this.$FBStoriesUploaderFileSizeExceedDialogViewer1)return;this.$FBStoriesUploaderFileSizeExceedDialogViewer1=true;c("ReactDOM").render(c("React").createElement(c("FBStoriesUploaderFileSizeExceedDialog.react"),{onCancel:c("FBStoriesCameraActions").closeUploaderFileSizeExceedDialog,onUploadAnotherPhoto:c("FBStoriesCameraActions").uploadPhotoAndCloseFileSizeExceedDialog}),this.$FBStoriesUploaderFileSizeExceedDialogViewer2)};i.prototype.close=function(){if(!this.$FBStoriesUploaderFileSizeExceedDialogViewer1)return;this.$FBStoriesUploaderFileSizeExceedDialogViewer1=false;c("ReactDOM").unmountComponentAtNode(this.$FBStoriesUploaderFileSizeExceedDialogViewer2)};f.exports=i}),null);
__d("FBStoriesVerticalLayout.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=3;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={seeMore:false},this.$FBStoriesVerticalLayout1=function(){return this.setState({seeMore:true})}.bind(this),o}m.prototype.render=function(){var n=this.props.children,o=c("React").Children.count(n),p=!this.state.seeMore&&o>l,q=c("React").createElement("div",{key:"list",className:"_1fvt"+(this.props.showPreviews?" with-preview":"")+" vertical"+(this.state.seeMore?" seeMore":"")},n),r=p&&c("React").createElement("a",{key:"link",className:"_31yr",href:"#",onClick:this.$FBStoriesVerticalLayout1},c("React").createElement("span",{className:"_jyz"}),i._("See More"));return[q,r]};f.exports=m}),null);
__d("FBStoryAddStoryItem.react",["cx","fbt","Image.react","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){return c("React").createElement("div",{className:"_48if"+(this.props.fullWidth?" full-width":"")},this.$FBStoryAddStoryItem1(),this.$FBStoryAddStoryItem2())};l.prototype.$FBStoryAddStoryItem1=function(){var m=c("React").createElement(c("Image.react"),{src:this.props.imageUrl,className:"_64x7"}),n=c("React").createElement("div",{className:"_64x8"});return c("React").createElement(c("ShimButton.react"),{className:"_64x9",onClick:this.props.onAddStoryItemSelect,onKeyPress:this.props.onAddStoryItemSelect},m,n)};l.prototype.$FBStoryAddStoryItem2=function(){return c("React").createElement("div",{className:"_64xa"},c("React").createElement("span",{className:"_64xb"},i._("Add")))};function l(){j.apply(this,arguments)}f.exports=l}),null);
__d("FBStoryTrayFriendItemSubtitle.react",["cx","React","formatDate","Timestamp.react"],(function a(b,c,d,e,f,g,h){"use strict";function i(j){var k=j.lastUpdateTime,l=[k&&c("React").createElement(c("Timestamp.react"),{key:"timestamp",autoUpdate:true,time:k,text:c("formatDate")(k,"M j, Y",{utc:true})})];return c("React").createElement("div",{className:"_31yn"},l)}f.exports=i}),null);
__d("FBStoryTrayItem.react",["ix","cx","fbt","Bootloader","CameraPostTypesHelper","Image.react","IntlVariations","Tooltip.react","React","fbglyph","emptyFunction","XUISpinner.react","asset"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").PureComponent);l=k&&k.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=l.constructor).call.apply(n,[this].concat(q)),this.state={shouldRenderWithTooltip:false},this.$FBStoryTrayItem2=function(){if(!this.state.shouldRenderWithTooltip)this.setState({shouldRenderWithTooltip:true});if(this.props.onHover)this.props.onHover(this.props.bucketID)}.bind(this),this.$FBStoryTrayItem3=function(){if(this.props.onHoverOut)this.props.onHoverOut(this.props.bucketID)}.bind(this),this.$FBStoryTrayItem4=function(){if(!this.props.disabled&&!this.props.loading)this.props.onSelect(this.props.bucketID)}.bind(this),o}m.prototype.componentDidMount=function(){if(this.props.liveVideoID)c("Bootloader").loadModules(["VideoPlayerMetaData"],function(n){n.genVideoData(this.props.liveVideoID).done()}.bind(this),"FBStoryTrayItem.react")};m.prototype.render=function(){if(!this.props.bucketID)return null;var n=this.props.isBucketLive,o=!!this.props.imageUrl,p=this.props.secondaryImageUrl&&!n,q="_1fw9"+(this.props.highlighted?" _1fw0":"")+(n?" _erm":"")+(o?" _1fwa":""),r=o?c("React").createElement(c("Image.react"),{src:this.props.imageUrl,className:"_1fwb"}):null,s=p?c("React").createElement(c("React").Fragment,null,c("React").createElement(c("Image.react"),{src:this.props.secondaryImageUrl,className:"_1fwc"}),c("React").createElement(c("Image.react"),{className:"_4uz_",src:h("417694"),width:24})):null,t=this.$FBStoryTrayItem1(),u=c("React").createElement("div",{className:q},r,this.props.showBlueIndicator&&c("React").createElement("div",{className:"_3xlk"}),t,this.props.loading&&c("React").createElement("div",{className:"_1dbr"},c("React").createElement(c("XUISpinner.react"),{size:"large",background:o?"light":"dark",className:"_1dbs"})),n&&c("React").createElement("div",{className:"_ern"},c("React").createElement(c("Image.react"),{alt:j._("LIVE"),src:h("118398")})),s),v=c("React").createElement("div",{className:"_efz"},c("React").createElement("span",{className:"_ef_ _4u-0"},j._("Your Story")),this.props.subtitleComponent),w=c("React").createElement("div",{dir:"auto",className:"_1fw3"},c("React").createElement("span",{className:"_4u-0"},this.props.actorName),this.props.subtitleComponent),x=c("IntlVariations").GENDER_UNKNOWN;if(this.props.actorGender==="MALE")x=c("IntlVariations").GENDER_MALE;else if(this.props.actorGender==="FEMALE")x=c("IntlVariations").GENDER_FEMALE;var y=this.props.isOwnBucket?j._("Watch Your Story"):j._({"*":"Watch {actor name}'s Story"},[j.param("actor name",this.props.actorName,[1,x])]),z=this.props.isOwnBucket?v:w,A=this.state.shouldRenderWithTooltip&&!this.props.fullWidth?c("React").createElement("div",{className:"_3zck"},c("React").createElement(c("Tooltip.react"),{tooltip:y,alignH:"center"},u,z)):c("React").createElement("div",null,u,z);return c("React").createElement("div",{role:"button",tabIndex:"0",onMouseEnter:this.$FBStoryTrayItem2,onMouseLeave:this.$FBStoryTrayItem3,onClick:this.$FBStoryTrayItem4,onKeyPress:this.$FBStoryTrayItem4,className:"_1fvw"+(this.props.disabled?" _4lu8":"")+(this.props.loading?" loading":"")},A)};m.prototype.$FBStoryTrayItem1=function(){var n=c("CameraPostTypesHelper").isEventStory(this.props.cameraPostType),o=c("CameraPostTypesHelper").isGroupStory(this.props.cameraPostType),p=!!this.props.imageUrl,q=c("React").createElement("div",{className:(n?"_1464":"")+(o?" _27v0":"")}),r=p?c("React").createElement("div",{className:"_1dbr"},q):c("React").createElement("div",{className:"_1fwb"+(n?" _144-":"")+(o?" _27v2":"")},q);return n||o?r:null};m.defaultProps={disabled:false,actorName:"",actorGender:"",highlighted:false,showBlueIndicator:false,isOwnBucket:false,isBucketLive:false,onHover:c("emptyFunction"),onHoverOut:c("emptyFunction"),loading:false,fullWidth:false,subtitleComponent:null};f.exports=m}),null);
__d("FBStoryTrayOwnerItemSubtitle.react",["cx","fbt","React","formatDate","Timestamp.react"],(function a(b,c,d,e,f,g,h,i){"use strict";function j(k){var l=k.lastUpdateTime,m=[l&&c("React").createElement(c("Timestamp.react"),{key:"timestamp",autoUpdate:true,time:l,text:c("formatDate")(l,"M j, Y",{utc:true})})];return c("React").createElement("div",{className:"_31yn"},m)}f.exports=j}),null);
__d("HorizontalScroll.react",["ix","cx","fbt","asset","compactArray","emptyFunction","range","Bootloader","BootloadOnRender.react","Image.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=400;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.defaultProps={placeholderFactory:c("emptyFunction")};this.$HorizontalScroll4=function(){if(!this.state.scrolling&&this.$HorizontalScroll1)this.setState({scrollLeft:this.$HorizontalScroll1.scrollLeft})}.bind(this);this.state={itemCount:0,offsetWidth:0,scrolling:false,scrollLeft:0,scrollWidth:0,viewportItemsCount:0};this.$HorizontalScroll2=this.$HorizontalScroll2.bind(this);this.$HorizontalScroll3=this.$HorizontalScroll3.bind(this)}n.prototype.componentDidMount=function(){var o=this.props.itemMarginWidth,p=this.props.itemWidth,q=this.$HorizontalScroll1.offsetWidth,r=0;if(p<=q)r=1+Math.floor((q-p)/(p+o));this.setState({offsetWidth:q,scrollLeft:this.$HorizontalScroll1.scrollLeft,scrollWidth:this.$HorizontalScroll1.scrollWidth,viewportItemsCount:r})};n.prototype.componentDidUpdate=function(o,p){if(p.scrollLeft!==this.state.scrollLeft)if(this.$HorizontalScroll1){c("Bootloader").loadModules(["Animation","Ease"],function(q,r){new q(this.$HorizontalScroll1).duration(m).ease(r.circOut).ondone(function(){this.setState({scrolling:false})}.bind(this)).to("scrollLeft",this.state.scrollLeft).go()}.bind(this),"HorizontalScroll.react");this.setState({scrolling:true})}};n.prototype.componentWillUpdate=function(o,p){var q=o.children?c("compactArray")(c("React").Children.toArray(o.children)):[],r=q.length;if(r!=this.state.itemCount)this.setState({itemCount:r})};n.prototype.render=function(){var o=this.state.scrollLeft===0,p=this.state.scrollLeft>=this.getMaxLeft()||this.state.itemCount<=this.state.viewportItemsCount,q=c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{"aria-label":j._("See more results from the left"),className:"_1rk2 _6107","data-testid":"horizontalScroll/leftArrow",href:{url:"#"},image:c("React").createElement(c("Image.react"),{src:h("374382")}),label:"With a Hidden Label",labelIsHidden:true,onClick:this.$HorizontalScroll2}),loader:c("JSResource")("XUIButton.react").__setRef("HorizontalScroll.react"),placeholder:c("React").createElement("span",null)}),r=c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{"aria-label":j._("See more results from the right"),className:"_1rkd _6107","data-testid":"horizontalScroll/rightArrow",href:{url:"#"},image:c("React").createElement(c("Image.react"),{src:h("374391")}),label:"With a Hidden Label",labelIsHidden:true,onClick:this.$HorizontalScroll3}),loader:c("JSResource")("XUIButton.react").__setRef("HorizontalScroll.react"),placeholder:c("React").createElement("span",null)});return c("React").createElement("div",{className:"_lmj"+(this.state.viewportItemsCount===4?" _1iug":"")+(this.state.scrolling?" _3_9y":""),onScroll:this.$HorizontalScroll4,ref:function(s){return this.$HorizontalScroll1=s}.bind(this)},this.props.children,this.$HorizontalScroll5(),!o&&q,!p&&r)};n.prototype.getMaxLeft=function(){return this.state.scrollWidth-this.state.offsetWidth-this.props.itemMarginWidth};n.prototype.$HorizontalScroll5=function(){var o=Math.max(0,this.state.viewportItemsCount-this.state.itemCount);return c("range")(0,o).map(this.props.placeholderFactory)};n.prototype.$HorizontalScroll6=function(o){var p=this.state.viewportItemsCount*(this.props.itemWidth+this.props.itemMarginWidth),q=this.getMaxLeft(),r=o?q-(this.state.scrollLeft+p):this.state.scrollLeft-p;return r<this.props.itemWidth?q:p};n.prototype.$HorizontalScroll2=function(){var o=Math.max(0,this.$HorizontalScroll1.scrollLeft-this.$HorizontalScroll6(false));this.setState({scrollLeft:o})};n.prototype.$HorizontalScroll3=function(){var o=Math.min(this.getMaxLeft(),this.$HorizontalScroll1.scrollLeft+this.$HorizontalScroll6(true));this.setState({scrollLeft:o})};f.exports=n}),null);
__d("FBStoriesTray.react",["cx","FBStoriesVerticalLayout.react","React","emptyFunction","FBStoriesBucketHelper","FBStoriesThreadHelper","FBStoryTrayItem.react","HorizontalScroll.react","FBStoryAddStoryItem.react","FBStoryTrayOwnerItemSubtitle.react","FBStoryTrayFriendItemSubtitle.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=64,l=8;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){__p&&__p();var n=this.props,o=n.friendsData,p=n.userBucketHasContent,q=!o||o.length===0;if(q&&!p)return null;var r=[];if(this.props.showProduction)r.push(this.$FBStoriesTray1());if(this.props.userBucketHasContent)r.push(this.$FBStoriesTray2());r=r.concat([].concat(this.$FBStoriesTray3()));if(this.props.vertical)return c("React").createElement(c("FBStoriesVerticalLayout.react"),{showPreviews:this.$FBStoriesTray4()},r);var s=k,t=l,u="_1fvt";return c("React").createElement("div",{className:u},c("React").createElement(c("HorizontalScroll.react"),{itemWidth:s,itemMarginWidth:t,placeholderFactory:this.$FBStoriesTray5},r))};m.prototype.$FBStoriesTray5=function(n){return c("React").createElement("div",{key:n,className:"_1fvw"},c("React").createElement("div",{className:"_rqg"}))};m.prototype.$FBStoriesTray1=function(){var n=c("FBStoriesBucketHelper").getOwnerProfilePictureUri(this.props.userBucket);return c("React").createElement(c("FBStoryAddStoryItem.react"),{imageUrl:n,fullWidth:this.props.vertical,key:"production",onAddStoryItemSelect:this.props.onAddStoryItemSelect})};m.prototype.$FBStoriesTray2=function(){var n=this.props,o=n.userBucket,p=n.userBucketHasNewViewers,q=n.userBucketIsLive,r=c("FBStoriesBucketHelper").getOwnerProfilePictureUri(o),s=c("FBStoriesBucketHelper").getPreviewImage(o),t=c("FBStoriesBucketHelper").getCameraPostType(o),u=c("FBStoriesBucketHelper").getId(o),v=c("FBStoriesBucketHelper").getMediaIDForLiveBucket(o),w=c("FBStoriesBucketHelper").getLatestThreadCreationTime(o),x=void 0,y=void 0;if(this.$FBStoriesTray4()){x=r;y=s}else{x=r;y=null}return c("React").createElement(c("FBStoryTrayItem.react"),{highlighted:p,showBlueIndicator:p,bucketID:u,key:u,imageUrl:x,secondaryImageUrl:y,isOwnBucket:true,isBucketLive:q,liveVideoID:v,onHover:this.props.onItemHover,onHoverOut:this.props.onItemHoverOut,onSelect:this.props.onItemSelect,cameraPostType:t,loading:this.props.loadingBucketID===u,fullWidth:this.props.vertical,subtitleComponent:this.props.vertical&&c("React").createElement(c("FBStoryTrayOwnerItemSubtitle.react"),{lastUpdateTime:w})})};m.prototype.$FBStoriesTray3=function(){__p&&__p();return this.props.friendsData.map(function(n,o){__p&&__p();var p=c("FBStoriesBucketHelper").getId(n);if(!p)return null;var q=c("FBStoriesBucketHelper").getCameraPostType(n),r=c("FBStoriesBucketHelper").getOwnerId(n),s=c("FBStoriesBucketHelper").getOwnerName(n,this.props.vertical);if(!r||!s)return null;var t=c("FBStoriesBucketHelper").isLive(n),u=c("FBStoriesBucketHelper").getOwnerProfilePictureUri(n),v=void 0,w=void 0;if(this.$FBStoriesTray4()){v=u;w=c("FBStoriesBucketHelper").getPreviewImage(n)}else{v=u;w=null}var x=c("FBStoriesBucketHelper").getThreads(n),y=x.filter(function(B){return!c("FBStoriesThreadHelper").isSeenByViewer(B)}).length>0,z=c("FBStoriesBucketHelper").getLatestThreadCreationTime(n),A={bucketID:p,actorName:s,actorGender:c("FBStoriesBucketHelper").getOwnerGender(n),imageUrl:v,liveVideoID:c("FBStoriesBucketHelper").getMediaIDForLiveBucket(n),secondaryImageUrl:w,highlighted:y,isBucketLive:t,key:r,onHover:this.props.onItemHover,onHoverOut:this.props.onItemHoverOut,onSelect:this.props.onItemSelect,cameraPostType:q,loading:this.props.loadingBucketID===p,fullWidth:this.props.vertical,subtitleComponent:this.props.vertical&&c("React").createElement(c("FBStoryTrayFriendItemSubtitle.react"),{lastUpdateTime:z})};return c("React").createElement(c("FBStoryTrayItem.react"),A)}.bind(this))};m.prototype.$FBStoriesTray4=function(){return this.props.vertical&&this.props.showAsPreviews&&!this.props.userBucketIsLive};function m(){i.apply(this,arguments)}m.defaultProps={onAddStoryItemSelect:c("emptyFunction"),onItemHover:c("emptyFunction"),onItemHoverOut:c("emptyFunction"),loadingBucketID:null,vertical:false,showProduction:false};f.exports=m}),null);
__d("FBStoriesTrayHeader.react",["ix","cx","fbt","React","Tooltip.react","Image.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";var k=function k(){var l=c("React").createElement(c("Image.react"),{className:"_2ms3",src:h("126682")});return c("React").createElement("div",{className:"_2mro"},c("React").createElement("span",{className:"_2ms2"},j._("Stories")),c("React").createElement(c("Tooltip.react"),{tooltip:j._("Stories are photos and videos that are visible for 24 hours. When someone adds to a story, it'll show up here.")},l))};f.exports=k}),null);
__d("FBStoriesTrayContainer.react",["cx","Bootloader","FBStoriesBucketHelper","FBStoriesCameraActions","FBStoriesLoggingConstants","FBStoriesStore","FBStoriesTray.react","FBStoriesTrayHeader.react","FluxContainer","React","range"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;function k(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={friendsData:[],userBucket:c("FBStoriesBucketHelper").getDefaultBucket(),userBucketHasNewViewers:false,userBucketHasContent:false,loading:true,bucketIdBeingLoaded:null,userBucketIsLive:false},this.$FBStoriesTrayContainer2=function(r){this.setState({bucketIdBeingLoaded:r});c("Bootloader").loadModules(["FBStoriesActions","FBStoriesLoggingHelper"],function(s,t){if(s.userSelectedBucket(r)){s.toggleViewer(true);t.storyLog(c("FBStoriesLoggingConstants").ACTION_OPEN_STORY,c("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD)}this.setState({bucketIdBeingLoaded:null})}.bind(this),"FBStoriesTrayContainer.react")}.bind(this),n}k.getStores=function(){return[c("FBStoriesStore")]};k.calculateState=function(m){return{friendsData:c("FBStoriesStore").getFriendsBucketData(),userBucket:c("FBStoriesStore").getUserBucketData(),userBucketHasNewViewers:c("FBStoriesStore").hasOwnBucketViewers(),userBucketHasContent:c("FBStoriesStore").hasOwnBucketContent(),loading:c("FBStoriesStore").isLoading(),bucketIdBeingLoaded:m?m.bucketIdBeingLoaded:null,userBucketIsLive:c("FBStoriesStore").userBucketIsLive()}};k.prototype.render=function(){var m="_60kg"+(this.props.showVerticalTray?" vertical":"");if(this.state.loading)return c("React").createElement("div",{className:m},c("React").createElement(c("FBStoriesTrayHeader.react"),null),c("React").createElement(l,null));if(this.$FBStoriesTrayContainer1())return c("React").createElement("div",{className:m});return c("React").createElement("div",{className:m},c("React").createElement(c("FBStoriesTrayHeader.react"),null),c("React").createElement(c("FBStoriesTray.react"),{vertical:this.props.showVerticalTray,showAsPreviews:this.props.showAsPreviews,showProduction:this.props.showProduction,friendsData:this.state.friendsData,userBucket:this.state.userBucket,userBucketHasContent:this.state.userBucketHasContent,userBucketHasNewViewers:this.state.userBucketHasNewViewers,loading:this.state.loading,loadingBucketID:this.state.bucketIdBeingLoaded,userBucketIsLive:this.state.userBucketIsLive,onAddStoryItemSelect:c("FBStoriesCameraActions").openCameraDialog,onItemSelect:this.$FBStoriesTrayContainer2}))};k.prototype.$FBStoriesTrayContainer1=function(){var m=this.state,n=m.friendsData,o=m.userBucket,p=m.loading,q=!c("FBStoriesBucketHelper").hasData(o),r=!n||n.length===0,s=q&&r;return!p&&s};k.defaultProps={showAsPreviews:false,showProduction:false,showVerticalTray:false};var l=function l(m){var n=function n(o){return c("React").createElement("div",{className:"_h0-",key:o},c("React").createElement("div",{className:"_2ms4"},c("React").createElement("div",{className:"_2ms5"})),c("React").createElement("div",{className:"_2ms6"}),c("React").createElement("div",{className:"_2ms8"}))};return c("React").createElement("div",{className:"_h1i"},c("React").createElement("div",{className:"_h1m"},c("range")(0,10).map(n)))};f.exports=c("FluxContainer").create(k)}),null);
__d("FBStoriesVisibilityHelper",["FBStoriesActionTypes","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesGraphQLAPI","FBStoriesStore","Visibility","emptyFunction","throttle"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=false,i=60,j={addListenerToReloadDataOnVisible:function k(l){if(h)return;if(l===undefined)l=this._defaultDataLoad.bind(this);c("Visibility").addListener(c("Visibility").VISIBLE,c("throttle").withBlocking(function(){if(c("FBStoriesStore").isLoading()===false&&c("FBStoriesStore").isViewerOpen()===false)if(l!==undefined)l()},i*1e3));h=true},_defaultDataLoad:function k(){c("FBStoriesGraphQLAPI").load().done(function(l){var m=c("FBStoriesDataHelper").getBucketsDataFromLoadedObject(l);c("FBStoriesDispatcher").dispatch({type:c("FBStoriesActionTypes").LOADED,data:m})},function(l){return c("emptyFunction")})}};f.exports=j}),null);
__d("FBStoriesTrayInit",["csx","regeneratorRuntime","Promise","DOMQuery","FBStoriesActionsHelper","FBStoriesCameraActions","FBStoriesCameraStore","FBStoriesDataHelper","FBStoriesDispatcher","FBStoriesLoggingHelper","FBStoriesLoggingConstants","FBStoriesStore","FBStoriesActions","FBStoriesActionTypes","FBStoriesGraphQLAPI","FBStoriesTrayContainer.react","FBStoriesVisibilityHelper","ReactDOM","React","ge","idx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();f.exports={_loadDataPromise:undefined,_reactTrayRendered:false,_listenersInitialized:false,loadData:function i(){__p&&__p();var j=arguments.length<=0||arguments[0]===undefined?false:arguments[0];return c("regeneratorRuntime").async(function k(l){__p&&__p();while(1)switch(l.prev=l.next){case 0:if(!this._loadDataPromise||j)this._loadDataPromise=new(c("Promise"))(function m(n,o){__p&&__p();var p,q,r;return c("regeneratorRuntime").async(function s(t){__p&&__p();while(1)switch(t.prev=t.next){case 0:p=c("FBStoriesDispatcher").dispatch;p({type:c("FBStoriesActionTypes").LOADING});t.prev=2;t.next=5;return c("regeneratorRuntime").awrap(c("FBStoriesGraphQLAPI").load());case 5:q=t.sent;r=c("FBStoriesDataHelper").getBucketsDataFromLoadedObject(q);c("FBStoriesLoggingHelper").logStoryTrayLoad(r);p({type:c("FBStoriesActionTypes").LOADED,data:r});this._initTrayListeners();n(q);t.next=17;break;case 13:t.prev=13;t.t0=t["catch"](2);p({type:c("FBStoriesActionTypes").LOADED_ERROR,error:t.t0});o(t.t0);case 17:case"end":return t.stop()}},null,this,[[2,13]])}.bind(this));return l.abrupt("return",this._loadDataPromise);case 2:case"end":return l.stop()}},null,this)},userSelectedBucket:function i(j){c("FBStoriesActions").userSelectedBucket(j)},registerStores:function i(){c("FBStoriesDispatcher").explicitlyRegisterStores([c("FBStoriesStore"),c("FBStoriesCameraStore")])},openViewer:function i(){c("FBStoriesLoggingHelper").storyLog(c("FBStoriesLoggingConstants").ACTION_OPEN_STORY,c("FBStoriesLoggingConstants").SOURCE_OPEN_FROM_STORY_HEAD);return c("FBStoriesActions").toggleViewer(true)},openProductionDialog:function i(){return c("FBStoriesCameraActions").openCameraDialog()},renderReactTray:function i(j){if(this._reactTrayRendered)return;var k=j.showPreviews,l=j.showProduction,m=j.isVerticalTray,n=c("DOMQuery").scry(c("ge")("stories_pagelet_rhc"),"._4-u2")[0];c("FBStoriesActionsHelper").prefetchForCurrentThreadAndBucket();c("ReactDOM").render(c("React").createElement(c("FBStoriesTrayContainer.react"),{showAsPreviews:k,showProduction:l,showVerticalTray:m}),n);this._reactTrayRendered=true},_initTrayListeners:function i(){if(this._listenersInitialized)return;var j=c("FBStoriesDispatcher").dispatch;c("FBStoriesGraphQLAPI").subscribeToTrayChanges(function(k){var l;return j({type:c("FBStoriesActionTypes").SUBSCRIPTION_BUCKET_UPDATE,bucketData:(l=k)!=null?(l=l.stories_tray_subscribe)!=null?l.bucket:l:l})});c("FBStoriesVisibilityHelper").addListenerToReloadDataOnVisible(function(){return this.loadData(true)}.bind(this));this._listenersInitialized=true}}}),null);
__d("FBStoriesTray",["csx","regeneratorRuntime","CSS","DOMQuery","FBStoriesLoggingConstants","FBStoriesLoggingHelper","FBStoriesTrayInit","FBStoriesTrayConfig"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=false;function j(m){c("CSS").addClass(m,"loading")}function k(m){c("CSS").removeClass(m,"loading")}var l={init:function m(){if(i)return;i=true;c("FBStoriesTrayInit").registerStores();c("FBStoriesTrayInit").loadData()},onStoryTrayItemSelect:function m(n){__p&&__p();var o,p,q;return c("regeneratorRuntime").async(function r(s){__p&&__p();while(1)switch(s.prev=s.next){case 0:o=n.item;p=n.bucketID;q=c("FBStoriesLoggingConstants").INTERACTIONS;j(o);l.init();c("FBStoriesLoggingHelper").logEventStart(q.TOTAL_INIT);c("FBStoriesTrayInit").registerStores();c("FBStoriesLoggingHelper").logEventStart(q.DATA_LOADING);s.next=10;return c("regeneratorRuntime").awrap(c("FBStoriesTrayInit").loadData());case 10:c("FBStoriesLoggingHelper").logEventEnd(q.DATA_LOADING);c("FBStoriesTrayInit").userSelectedBucket(p);c("FBStoriesLoggingHelper").logEventStart(q.VIEWER_OPEN);s.next=15;return c("regeneratorRuntime").awrap(c("FBStoriesTrayInit").openViewer());case 15:c("FBStoriesLoggingHelper").logEventEnd(q.VIEWER_OPEN);k(o);c("FBStoriesLoggingHelper").logEventStart(q.TRAY_RENDER);c("FBStoriesTrayInit").renderReactTray(c("FBStoriesTrayConfig"));c("FBStoriesLoggingHelper").logEventEnd(q.TRAY_RENDER);c("FBStoriesLoggingHelper").logEventEnd(q.TOTAL_INIT);case 21:case"end":return s.stop()}},null,this)},onStoryTrayAddItemClick:function m(n){__p&&__p();var o;return c("regeneratorRuntime").async(function p(q){__p&&__p();while(1)switch(q.prev=q.next){case 0:o=n.item;j(o);c("FBStoriesTrayInit").registerStores();c("FBStoriesTrayInit").openProductionDialog();k(o);q.next=7;return c("regeneratorRuntime").awrap(c("FBStoriesTrayInit").loadData());case 7:c("FBStoriesTrayInit").renderReactTray(c("FBStoriesTrayConfig"));case 8:case"end":return q.stop()}},null,this)},onSeeMoreLinkClick:function m(n){c("CSS").addClass(c("DOMQuery").find(n.linkEl,"^._60kg ._1fvt"),"seeMore")}};f.exports=l}),null);
__d("HorizontalScroll",["cx","Animation","CSS","Ease","Event"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j,k,l,m){"use strict";this.$HorizontalScroll1=j;this.$HorizontalScroll4=m;this.$HorizontalScroll2=k;this.$HorizontalScroll3=l;this.$HorizontalScroll5=0;c("Event").listen(this.$HorizontalScroll2,"click",this.$HorizontalScroll6.bind(this));c("Event").listen(this.$HorizontalScroll3,"click",this.$HorizontalScroll7.bind(this));this.$HorizontalScroll8()}i.prototype.$HorizontalScroll6=function(event){"use strict";this.$HorizontalScroll9(false)};i.prototype.$HorizontalScroll7=function(event){"use strict";this.$HorizontalScroll9(true)};i.prototype.$HorizontalScroll9=function(j){"use strict";var k=this.$HorizontalScroll10(),l=this.$HorizontalScroll11(j);this.$HorizontalScroll5=j?Math.min(this.$HorizontalScroll5+l,k):Math.max(this.$HorizontalScroll5-l,0);this.$HorizontalScroll8();c("CSS").addClass(this.$HorizontalScroll1,"_3_9y");new(c("Animation"))(this.$HorizontalScroll1).duration(this.$HorizontalScroll4.animationDuration).ease(c("Ease").circOut).ondone(function(){c("CSS").removeClass(this.$HorizontalScroll1,"_3_9y")}.bind(this)).to("scrollLeft",this.$HorizontalScroll5).go()};i.prototype.$HorizontalScroll8=function(){"use strict";this.$HorizontalScroll12(this.$HorizontalScroll3,this.$HorizontalScroll5<this.$HorizontalScroll10());this.$HorizontalScroll12(this.$HorizontalScroll2,this.$HorizontalScroll5>0)};i.prototype.$HorizontalScroll12=function(j,k){"use strict";if(k)c("CSS").show(j);else c("CSS").hide(j)};i.prototype.$HorizontalScroll10=function(){"use strict";return this.$HorizontalScroll1.scrollWidth-this.$HorizontalScroll1.offsetWidth-this.$HorizontalScroll4.itemMarginWidth};i.prototype.$HorizontalScroll11=function(j){"use strict";var k=this.$HorizontalScroll4.viewportItemsCount*(this.$HorizontalScroll4.itemWidth+this.$HorizontalScroll4.itemMarginWidth),l=this.$HorizontalScroll10(),m=j?l-(this.$HorizontalScroll1.scrollLeft+k):this.$HorizontalScroll1.scrollLeft-k;return m<this.$HorizontalScroll4.itemWidth?l:k};f.exports=i}),null);