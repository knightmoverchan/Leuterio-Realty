if (self.CavalryLogger) { CavalryLogger.start_js(["1O\/p1"]); }

__d("XProfileFunFactsAskPromptCreateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/fun_facts/ask_prompt/create/",{})}),null);
__d("FunFactAskPromptSelector.react",["cx","AsyncRequest","ContentState","EditorState","FlexLayout.react","FunFactStrings","PlainTextEditor.react","React","TextWithEmoticons.react","XProfileFunFactsAskPromptCreateController","XUIButton.react","XUISpinner.react","isEmpty"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=100,l=128173;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state=this.$FunFactAskPromptSelector2(),this.$FunFactAskPromptSelector7=function(){this.setState({isSaving:true});var s=c("XProfileFunFactsAskPromptCreateController").getURIBuilder().getURI();new(c("AsyncRequest"))().setMethod("POST").setURI(s).setData({emoji:String.fromCodePoint(l),title:this.state.editorState.getCurrentContent().getPlainText()}).setHandler(function(t){this.props.onSave(t.getPayload())}.bind(this)).setFinallyHandler(function(){this.setState(this.$FunFactAskPromptSelector2())}.bind(this)).send()}.bind(this),this.$FunFactAskPromptSelector5=function(s){var t=s.getCurrentContent().getPlainText();this.setState({editorState:s,isSaveDisabled:c("isEmpty")(t)||t.length>k})}.bind(this),o}m.prototype.$FunFactAskPromptSelector2=function(){return{editorState:c("EditorState").createWithContent(c("ContentState").createFromText("")),isSaveDisabled:true,isSaving:false}};m.prototype.$FunFactAskPromptSelector3=function(){var n=String.fromCodePoint(l),o=c("React").createElement("div",{className:"_4s3r _4s3s _3-8y"},c("React").createElement(c("PlainTextEditor.react"),{editorState:this.state.editorState,handleBeforeInput:this.$FunFactAskPromptSelector4,onChange:this.$FunFactAskPromptSelector5,placeholder:c("FunFactStrings").SINGLE_PROMPT_ASK_QUESTION_PLACEHOLDER,ref:function(p){return this.$FunFactAskPromptSelector1=p}.bind(this)}));return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_4s3u",direction:"vertical",justify:"center"},c("React").createElement(c("TextWithEmoticons.react"),{size:32,text:n}),o)};m.prototype.$FunFactAskPromptSelector6=function(){var n=null;if(this.state.isSaving)n=c("React").createElement(c("XUISpinner.react"),{className:"_3-90 _3-8x"});return c("React").createElement(c("FlexLayout.react"),{className:"_2ph_",direction:"horizontal",justify:"end"},n,c("React").createElement(c("XUIButton.react"),{disabled:this.state.isSaveDisabled||this.state.isSaving,label:c("FunFactStrings").SINGLE_PROMPT_SAVE_AND_TAG,onClick:this.$FunFactAskPromptSelector7,size:"large",use:"confirm"}))};m.prototype.$FunFactAskPromptSelector4=function(n,o){var p=o.getCurrentContent().getPlainText().length;if(p>=k)return"handled";return"not-handled"};m.prototype.componentDidMount=function(){this.$FunFactAskPromptSelector1&&this.$FunFactAskPromptSelector1.focus()};m.prototype.render=function(){return c("React").createElement("div",null,this.$FunFactAskPromptSelector3(),this.$FunFactAskPromptSelector6())};f.exports=m}),null);
__d("ReactComposerFunFactSinglePromptDialog.react",["ix","cx","DialogExpansion","FunFactAskPromptSelector.react","FunFactSinglePromptSelector.react","FunFactStrings","Image.react","LayerFadeOnHide","Layout.react","ProfileFunFactsTestIDs","React","TabBar.react","TabBarItem.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","asset"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=500,o=600,p=Object.freeze({ANSWER:"answer",ASK:"ask"});j=babelHelpers.inherits(q,c("React").Component);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=k.constructor).call.apply(r,[this].concat(u)),this.state={selectedTab:p.ANSWER},this.$ReactComposerFunFactSinglePromptDialog2=function(w){this.setState({selectedTab:w})}.bind(this),s}q.prototype.render=function(){return c("React").createElement(c("XUIDialog.react"),{behaviors:{DialogExpansion:c("DialogExpansion"),LayerFadeOnHide:c("LayerFadeOnHide"),LayerFadeOnShow:null},"data-testid":c("ProfileFunFactsTestIDs").DIALOG,isStrictlyControlled:true,onHide:this.props.onClose,shown:this.props.showDialog,width:this.props.showAskFriendTab?o:n},c("React").createElement(c("XUIDialogTitle.react"),{className:"_4xqu"},c("FunFactStrings").SINGLE_PROMPT_DIALOG_TITLE),c("React").createElement(c("XUIDialogBody.react"),{useCustomPadding:true},c("React").createElement(c("Layout.react"),{className:"_4xqv _2ph_"},this.props.showAskFriendTab?c("React").createElement(l,{className:"_3-91"},this.$ReactComposerFunFactSinglePromptDialog1()):null,c("React").createElement(m,{className:"_64pf"},this.state.selectedTab===p.ANSWER?c("React").createElement(c("FunFactSinglePromptSelector.react"),this.props):c("React").createElement(c("FunFactAskPromptSelector.react"),this.props)))))};q.prototype.$ReactComposerFunFactSinglePromptDialog1=function(){return c("React").createElement(c("TabBar.react"),{activeTabKey:this.state.selectedTab,className:"_63_w",onTabClick:this.$ReactComposerFunFactSinglePromptDialog2,orientation:"vertical"},c("React").createElement(c("TabBarItem.react"),{className:"_63_x",key:p.ANSWER},c("React").createElement(c("Image.react"),{className:"_3-90",src:h("407305")}),c("FunFactStrings").SINGLE_PROMPT_ANSWER_TAB),c("React").createElement(c("TabBarItem.react"),{className:"_63_x",key:p.ASK},c("React").createElement(c("Image.react"),{className:"_3-90",src:h("400375")}),c("FunFactStrings").SINGLE_PROMPT_ASK_TAB))};f.exports=q}),null);
__d("ReactComposerFunFactSinglePromptComponent.react",["cx","FlexLayout.react","FunFactsComposerSelectorMode","ProfileFunFactsComposerEvents","ProfileFunFactsReactComposerTypedLogger","Random","React","ReactComposerFunFactSinglePromptDialog.react","TextWithEmoticons.react","XUICloseButton.react","XUIText.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.state={showDialog:!this.$ReactComposerFunFactSinglePromptComponent1(),selectedPrompt:this.$ReactComposerFunFactSinglePromptComponent1()?this.props.taggerData.prompt:this.props.prompts[0]},this.$ReactComposerFunFactSinglePromptComponent3=function(){new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPT_NEW_QUESTION_TAP).setFunFactPromptID(this.state.selectedPrompt.id).log();var q=this.props.prompts;this.setState({selectedPrompt:q[Math.floor(c("Random").random()*q.length)]})}.bind(this),this.$ReactComposerFunFactSinglePromptComponent2=function(){this.setState({showDialog:false},function(){return this.props.onSelect({prompt:this.state.selectedPrompt})}.bind(this))}.bind(this),this.$ReactComposerFunFactSinglePromptComponent4=function(q){this.setState({selectedPrompt:q,showDialog:false},function(){return this.props.onAsk({prompt:q})}.bind(this))}.bind(this),m}k.prototype.componentWillMount=function(){if(this.props.selectorMode===c("FunFactsComposerSelectorMode").SKIP_SELECTOR)this.setState({showDialog:false})};k.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(c("ReactComposerFunFactSinglePromptDialog.react"),{onChoose:this.$ReactComposerFunFactSinglePromptComponent2,onClose:this.props.onClose,onRandomize:this.$ReactComposerFunFactSinglePromptComponent3,onSave:this.$ReactComposerFunFactSinglePromptComponent4,prompt:this.state.selectedPrompt,showAskFriendTab:this.props.showAskFriendTab,showDialog:this.state.showDialog}),this.$ReactComposerFunFactSinglePromptComponent5())};k.prototype.$ReactComposerFunFactSinglePromptComponent1=function(){return this.props.taggerData&&this.props.taggerData.prompt};k.prototype.$ReactComposerFunFactSinglePromptComponent5=function(){var l=this.state.selectedPrompt;if(this.state.showDialog)return null;return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_ikd _3-8j",direction:"vertical"},c("React").createElement(c("TextWithEmoticons.react"),{size:16,text:l.emoji}),c("React").createElement(c("XUIText.react"),{className:"_64t9 _3-8w",display:"block"},l.title),c("React").createElement(c("XUICloseButton.react"),{className:"_ike",onClick:this.props.onClose}))};f.exports=k}),null);
__d("XProfileFunFactsSinglePromptFetchController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/fun_facts/single_prompt/fetch/",{pinned_prompt_id:{type:"FBID"}})}),null);
__d("ReactComposerFunFactSinglePromptTaggerContainer.react",["cx","Arbiter","AsyncRequest","FunFactsComposerSelectorMode","LoadingDialog.react","ProfileFunFactsReactComposerTypedLogger","ProfileFunFactsTestIDs","React","ReactComposerAttachmentStore","ReactComposerEvents","ReactComposerFormattedTextActions","ReactComposerFormattedTextStore","ReactComposerFunFactSinglePromptComponent.react","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerContextTypes","FluxContainer","ProfileFunFactsComposerEvents","ProfileFunFactsEntryPoints","XProfileFunFactsSinglePromptFetchController","XUISpinner.react","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=-1,l=0,m=c("ReactComposerTaggerType").FUN_FACT;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ReactComposerFunFactSinglePromptTaggerContainer5=function(){var t=c("ReactComposerTaggerStore").getTaggerData(this.context.composerID,c("ReactComposerTaggerType").FUN_FACT);c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,null);c("ReactComposerTaggerActions").deselectCurrentTagger(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT);new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPTS_CANCEL).setFunFactPromptID(t&&t.promptID).log()}.bind(this),this.$ReactComposerFunFactSinglePromptTaggerContainer3=function(t){if(t&&t.prompt)t.promptID=t.prompt.id;new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPT_SELECT).setFunFactPromptID(t.promptID).log();this.$ReactComposerFunFactSinglePromptTaggerContainer6(t)}.bind(this),this.$ReactComposerFunFactSinglePromptTaggerContainer7=function(t){if(t&&t.prompt)t.askedPromptID=t.prompt.id;new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPT_ASK).setFunFactPromptID(t.askedPromptID).log();this.$ReactComposerFunFactSinglePromptTaggerContainer6(t)}.bind(this),p}n.getStores=function(){return[c("ReactComposerAttachmentStore"),c("ReactComposerTaggerStore")]};n.calculateState=function(o,p,q){var r=q.composerID,s=c("ReactComposerTaggerStore").getSelectedTagger(r)===m,t=c("ReactComposerTaggerStore").isDisabled(r,m),u=c("ReactComposerTaggerStore").getTaggerData(r,m),v=o?o.loadingInitiated:false,w=o?o.isLoading:false;if(s&&!(o&&o.loadingInitiated)){v=true;w=true}return{isAttached:c("ReactComposerTaggerStore").hasData(r,m),isDisabled:t,isLoading:w,isSelected:s,loadingInitiated:v,prompts:o?o.prompts:[],taggerData:u||{}}};n.prototype.componentDidMount=function(){c("Arbiter").inform("ReactFeedComposerXBootloader/funfactsloaded/"+this.context.composerID);if(this.state.loadingInitiated)this.$ReactComposerFunFactSinglePromptTaggerContainer1()};n.prototype.componentWillUpdate=function(o,p){if(p.loadingInitiated&&!this.state.loadingInitiated)this.$ReactComposerFunFactSinglePromptTaggerContainer1()};n.prototype.$ReactComposerFunFactSinglePromptTaggerContainer1=function(){var o=c("XProfileFunFactsSinglePromptFetchController").getURIBuilder();if(this.props.pinnedPromptID&&this.$ReactComposerFunFactSinglePromptTaggerContainer2())o.setFBID("pinned_prompt_id",this.props.pinnedPromptID);new(c("AsyncRequest"))(o.getURI()).setHandler(function(p){this.setState({isLoading:false,prompts:p.getPayload()});if(this.props.selectorMode===c("FunFactsComposerSelectorMode").SKIP_SELECTOR)this.$ReactComposerFunFactSinglePromptTaggerContainer3({prompt:p.getPayload()[0]})}.bind(this)).send();this.$ReactComposerFunFactSinglePromptTaggerContainer4()};n.prototype.$ReactComposerFunFactSinglePromptTaggerContainer4=function(){__p&&__p();var event=null;switch(this.props.entryPoint){case c("ProfileFunFactsEntryPoints").NF_COMPOSER:event=c("ProfileFunFactsComposerEvents").FEED_SPROUT_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").TIMELINE_COMPOSER:event=c("ProfileFunFactsComposerEvents").TIMELINE_SPROUT_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").NF_CTA:event=c("ProfileFunFactsComposerEvents").CTA_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").NF_SELF_CTA:event=c("ProfileFunFactsComposerEvents").SELF_CTA_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").ASK_FRIEND_NOTIF:event=c("ProfileFunFactsComposerEvents").ASK_FRIENDS_NOTIF_TAP;break;case c("ProfileFunFactsEntryPoints").SELF_PROTILE:event=c("ProfileFunFactsComposerEvents").SELF_PROTILE_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").COLLECTION:event=c("ProfileFunFactsComposerEvents").COLLECTION_LAUNCH_PROMPTS;break}if(event!==null)new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(event).log()};n.prototype.$ReactComposerFunFactSinglePromptTaggerContainer2=function(){return this.props.entryPoint===c("ProfileFunFactsEntryPoints").NF_CTA||this.props.entryPoint===c("ProfileFunFactsEntryPoints").ASK_FRIEND_NOTIF||this.props.entryPoint===c("ProfileFunFactsEntryPoints").COLLECTION||this.props.entryPoint===c("ProfileFunFactsEntryPoints").SELF_PROTILE};n.prototype.$ReactComposerFunFactSinglePromptTaggerContainer6=function(o){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,o);var p=c("ReactComposerFormattedTextStore").getSelectedIndex(this.context.composerID);if(p===k&&!c("ReactComposerTaggerStore").isDisabled(this.context.composerID,c("ReactComposerTaggerType").FORMATTED_TEXT))c("ReactComposerFormattedTextActions").setSelectedIndex(this.context.composerID,l);c("setImmediate")(function(){c("Arbiter").inform(c("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.context.composerID)}.bind(this))};n.prototype.render=function(){if(!this.state.isSelected&&!this.state.isAttached||this.state.isDisabled)return null;if(this.state.isLoading){if(this.props.selectorMode===c("FunFactsComposerSelectorMode").SKIP_SELECTOR)return c("React").createElement("div",{className:"_52jv _2ph_"},c("React").createElement(c("XUISpinner.react"),{size:"large"}));return c("React").createElement(c("LoadingDialog.react"),null)}return c("React").createElement("div",{"data-testid":c("ProfileFunFactsTestIDs").COMPOSER_TAGGER},c("React").createElement(c("ReactComposerTaggerHideOnEscapeKeyPress.react"),null,c("React").createElement(c("ReactComposerFunFactSinglePromptComponent.react"),{onAsk:this.$ReactComposerFunFactSinglePromptTaggerContainer7,onClose:this.$ReactComposerFunFactSinglePromptTaggerContainer5,onSelect:this.$ReactComposerFunFactSinglePromptTaggerContainer3,prompts:this.state.prompts,showAskFriendTab:this.props.showAskFriendTab,selectorMode:this.props.selectorMode,taggerData:this.state.taggerData})))};n.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(n,{withContext:true,withProps:true})}),null);