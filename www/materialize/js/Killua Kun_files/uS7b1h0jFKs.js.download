if (self.CavalryLogger) { CavalryLogger.start_js(["fYBnJ"]); }

__d("MNCommerceActionTypes",["keyMirrorRecursive"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirrorRecursive")({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null},PROMOTION_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},TRANSACTION_INVOICE:{LOADED:null,LOAD_ERROR:null,RELOAD:null},BOT_REVIEW_STATE:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=h}),null);
__d("ReasonReact",["bs_list","bs_curry","React","bs_caml_builtin_exceptions"],(function aa(ba,a,ca,da,ea,b){"use strict";__p&&__p();function c(y,z,A){var B=[y,z].concat(A);return a("React").createElement.apply(null,B)}var d=null;function e(){return 0}function f(y,z,A){a("bs_curry")._1(y,A);return a("bs_curry")._1(z,A)}var g=[e,f];function h(){return 0}function i(){return 0}function j(){return 0}function k(){return 0}function l(){return 1}function m(y){return y[2]}function n(){return"RenderNotImplemented"}function o(){return 0}function p(y,z){return 0}function q(){return 0}function r(y,z,A){var B=y.reasonProps;if(B==null)if(z)return[a("bs_curry")._1(z[0],y)];else throw[a("bs_caml_builtin_exceptions").invalid_argument,"A JS component called the Reason component "+(A+" which didn't implement the JS->Reason React props conversion.")];else return B}function s(y){__p&&__p();return a("React").createClass({displayName:y,subscriptions:null,self:function z(A,B){var C=this;return[C.handleMethod,C.reduceMethod,A,B,C.sendMethod]},transitionNextTotalState:function z(A,B){if(typeof B==="number")return A;else switch(B.tag|0){case 0:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements,sideEffects:A.sideEffects};case 1:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:A.sideEffects};case 2:return{reasonState:A.reasonState,reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[B[0],A.sideEffects]};case 3:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements,sideEffects:[B[1],A.sideEffects]};case 4:return{reasonState:B[0],reasonStateVersion:A.reasonStateVersion+1|0,reasonStateVersionUsedToComputeSubelements:A.reasonStateVersionUsedToComputeSubelements+1|0,sideEffects:[B[1],A.sideEffects]}}},getInitialState:function z(){var A=this,B=r(A.props,A.jsPropsToReason,y),C=a("bs_curry")._1(B[0][10],0);return{reasonState:C,reasonStateVersion:1,reasonStateVersionUsedToComputeSubelements:1,sideEffects:0}},componentDidMount:function z(){__p&&__p();var A=this,B=this,C=r(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState,G=A.self(F,D[11]);if(D[13]!==q){var H=a("bs_list").map(function(K){var L=K[1],M=a("bs_curry")._1(K[0],0);return function(){return a("bs_curry")._1(L,M)}},a("bs_curry")._1(D[13],G));A.subscriptions=H}if(D[4]!==h){var I=a("bs_curry")._1(D[4],G),J=A.transitionNextTotalState(E,I);if(J.reasonStateVersion!==E.reasonStateVersion)return B.setState(J);else return 0}else return 0},componentDidUpdate:function z(A,B){var C=this,D=this,E=D.state,F=E.reasonState,G=D.props,H=r(G,D.jsPropsToReason,y),I=H[0];if(I[5]!==j){var J=+(A===G),K=J!==0?H:r(A,D.jsPropsToReason,y),L=B.reasonState,M=C.self(F,I[11]),N=M[0],O=M[1],P=K[0][11],Q=M[4],R=[N,O,L,P,Q];return a("bs_curry")._1(I[5],[R,M])}else return 0},componentWillUnmount:function z(){var A=this,B=this,C=r(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState;if(D[6]!==k)a("bs_curry")._1(D[6],A.self(F,D[11]));var G=A.subscriptions;if(G==null)return 0;else return a("bs_list").iter(function(H){return a("bs_curry")._1(H,0)},a("bs_list").rev(G))},componentWillUpdate:function z(A,B){var C=this,D=this,E=r(A,D.jsPropsToReason,y),F=E[0];if(F[7]!==i){var G=D.props,H=+(A===G),I=H!==0?E:r(G,D.jsPropsToReason,y),J=D.state,K=J.reasonState,L=B.reasonState,M=C.self(L,F[11]),N=M[0],O=M[1],P=I[0][11],Q=M[4],R=[N,O,K,P,Q];return a("bs_curry")._1(F[7],[R,M])}else return 0},componentWillReceiveProps:function z(A){__p&&__p();var B=this,C=this,D=r(A,C.jsPropsToReason,y),E=D[0];if(E[3]!==m){var F=C.props,G=+(A===F),H=G!==0?D:r(F,C.jsPropsToReason,y),I=H[0];return C.setState(function(J,K){var L=J.reasonState,M=J.reasonStateVersion,N=B.self(L,I[11]),O=a("bs_curry")._1(E[3],N),G=+(O!==L),P=G!==0?M+1|0:M;if(P!==M)return{reasonState:O,reasonStateVersion:P,reasonStateVersionUsedToComputeSubelements:J.reasonStateVersionUsedToComputeSubelements,sideEffects:O.sideEffects};else return J})}else return 0},shouldComponentUpdate:function z(A,B,C){__p&&__p();var D=this,E=this,F=E.props,G=+(A!==F),H=r(E.props,E.jsPropsToReason,y),I=+(A===F),J=I!==0?H:r(A,E.jsPropsToReason,y),K=J[0],L=B.reasonStateVersion,M=B.reasonStateVersionUsedToComputeSubelements,N=+(M!==L),O=G||N,P=B.reasonState,Q=D.self(P,K[11]),R;if(O&&K[8]!==l){var ja=E.state,ka=ja.reasonState,la=Q[0],ma=Q[1],na=H[0][11],oa=Q[4],pa=[la,ma,ka,na,oa];R=a("bs_curry")._1(K[8],[pa,Q])}else R=O;B.reasonStateVersionUsedToComputeSubelements=L;var S=a("bs_list").rev(B.sideEffects);if(S!==0){a("bs_list").iter(function(T){return a("bs_curry")._1(T,Q)},S);E.setState(function(T,C){__p&&__p();var U=function U(W,X,Y){__p&&__p();while(true){var Z=Y,V=X,$=W;if(Z)if(V>0){Y=Z[1];X=V-1|0;W=[Z[0],$];continue}else return a("bs_list").rev($);else return a("bs_list").rev($)}},V=a("bs_list").length(T.sideEffects)-a("bs_list").length(B.sideEffects)|0,qa=U(0,V,T.sideEffects);return{reasonState:T.reasonState,reasonStateVersion:T.reasonStateVersion,reasonStateVersionUsedToComputeSubelements:T.reasonStateVersionUsedToComputeSubelements,sideEffects:qa}})}return R},handleMethod:function z(A){var B=this,C=this;return function(D){var E=C.state,F=E.reasonState,G=r(C.props,C.jsPropsToReason,y);return a("bs_curry")._2(A,D,B.self(F,G[0][11]))}},updateMethod:function z(A){__p&&__p();var B=this,C=this;return function(D){var E=C.state,F=E.reasonState,G=r(C.props,C.jsPropsToReason,y),H=a("bs_curry")._2(A,D,B.self(F,G[0][11]));if(H){var I=B.transitionNextTotalState(E,H);if(I.reasonStateVersion!==E.reasonStateVersion)return C.setState(I);else return 0}else return d}},sendMethod:function z(A){__p&&__p();var B=this,C=this,D=r(C.props,C.jsPropsToReason,y),E=D[0];if(E[12]!==p){var F=a("bs_curry")._1(E[12],A);return C.setState(function(G,H){var I=G.reasonState,J=a("bs_curry")._1(F,I);if(J){var K=B.transitionNextTotalState(G,J);if(K.reasonStateVersion!==G.reasonStateVersion)return K;else return d}else return d})}else return 0},reduceMethod:function z(A,B){var C=this;return C.sendMethod(a("bs_curry")._1(A,B))},render:function z(){var A=this,B=this,C=r(B.props,B.jsPropsToReason,y),D=C[0],E=B.state,F=E.reasonState;return a("bs_curry")._1(D[9],A.self(F,D[11]))}})}function t(y){return[y,s(y),[0],m,h,j,k,i,l,n,o,0,p,q,0]}var u=t,v=t,w=t,x=t;function fa(y,z,A){var B=y?y[0]:undefined,C=z?z[0]:undefined,D=[A],E=A[14];if(E)return a("bs_curry")._2(E[0],B,C);else return a("React").createElement(A[1],{key:B,ref:C,reasonProps:D})}function ga(y,z){var A=y[1].prototype;A.jsPropsToReason=[z];return y[1]}var ha=t("interop");function ia(y,z,A){var B=[function(D,E){var F=y,G=z,H=A,I=D,J=E,K=Object.assign(Object.assign({},G),{ref:J,key:I}),L=[F,K].concat(H);return a("React").createElement.apply(null,L)}],C=ha.slice();C[14]=B;return C}b.Callback=g;b.statelessComponent=u;b.statelessComponentWithRetainedProps=v;b.reducerComponent=w;b.reducerComponentWithRetainedProps=x;b.element=fa;b.wrapReasonForJs=ga;b.createDomElement=c;b.wrapJsForReason=ia}),null);
__d("RTCGroupCallActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CALL:"CALL",CALL_SUCCESS:"CALL_SUCCESS",CALL_ERROR:"CALL_ERROR",INIT:"INIT",WAIT_FOR_USER_INPUT:"WAIT_FOR_USER_INPUT",SET_CALL_SUMMARY:"SET_CALL_SUMMARY",SET_MW_CALL_TYPE:"SET_MW_CALL_TYPE",SET_LAYOUT:"SET_LAYOUT",SET_DOMINANT_SPEAKER:"SET_DOMINANT_SPEAKER",SET_PINNED_SPEAKER:"SET_PINNED_SPEAKER",SET_USE_DOMINANT_SPEAKE_VIEW:"SET_USE_DOMINANT_SPEAKE_VIEW",SET_GRID_VIEW:"SET_GRID_VIEW",SET_STRIP_VIEW:"SET_STRIP_VIEW",INIT_THREAD:"INIT_THREAD",ON_PARTICIPANT_LEFT:"ON_PARTICIPANT_LEFT",ON_PARTICIPANTS_ADDED:"ON_PARTICIPANTS_ADDED",ADD_PARTICIPANTS_TO_RING:"ADD_PARTICIPANTS_TO_RING",JOIN:"JOIN",JOIN_SUCCESS:"JOIN_SUCCESS",JOIN_ERROR:"JOIN_ERROR",HANGUP:"HANGUP",HANGUP_SUCCESS:"HANGUP_SUCCESS",HANGUP_ERROR:"HANGUP_ERROR",ON_CONFERENCE_STATE:"ON_CONFERENCE_STATE",DISMISS:"DISMISS",END_CALL:"END_CALL",ON_JOIN_REQUEST_SENT:"ON_JOIN_REQUEST_SENT",ON_JOIN_RESPONSE:"ON_JOIN_RESPONSE",ON_SERVER_MEDIA_UPDATE_SUCCESS:"ON_SERVER_MEDIA_UPDATE_SUCCESS",ON_CLIENT_MEDIA_UPDATE_RESPONSE:"ON_CLIENT_MEDIA_UPDATE_RESPONSE",INIT_LOCAL_USER:"INIT_LOCAL_USER",INIT_REMOTE_USERS:"INIT_REMOTE_USERS",ADD_REMOTE_STREAM:"ADD_REMOTE_STREAM",REMOVE_REMOTE_STREAM:"REMOVE_REMOTE_STREAM",REMOVE_ALL_REMOTE_STREAMS:"REMOVE_ALL_REMOTE_STREAMS",SET_PREFERRED_REMOTE_STREAM:"SET_PREFERRED_REMOTE_STREAM",ADD_REMOTE_TRACK:"ADD_REMOTE_TRACK",REMOVE_REMOTE_TRACK:"REMOVE_REMOTE_TRACK",AUDIO_MUTED:"AUDIO_MUTED",AUDIO_UNMUTED:"AUDIO_UNMUTED",VIDEO_MUTED:"VIDEO_MUTED",VIDEO_UNMUTED:"VIDEO_UNMUTED",SELF_VIEW_COLLAPSED:"SELF_VIEW_COLLAPSED",SELF_VIEW_UNCOLLAPSED:"SELF_VIEW_UNCOLLAPSED",ADD_LOCAL_STREAM:"ADD_LOCAL_STREAM",REMOVE_LOCAL_STREAM:"REMOVE_LOCAL_STREAM",REPLACE_LOCAL_STREAM:"REPLACE_LOCAL_STREAM",REMOVE_ALL_LOCAL_STREAMS:"REMOVE_ALL_LOCAL_STREAMS",SET_PREFERRED_LOCAL_STREAM:"SET_PREFERRED_LOCAL_STREAM",ADD_LOCAL_SCREEN_STREAM:"ADD_LOCAL_SCREEN_STREAM",REMOVE_LOCAL_SCREEN_STREAM:"REMOVE_LOCAL_SCREEN_STREAM",REMOVE_ALL_LOCAL_SCREEN_STREAMS:"REMOVE_ALL_LOCAL_SCREEN_STREAMS",REPLACE_LOCAL_SCREEN_STREAM:"REPLACE_LOCAL_SCREEN_STREAM",ADD_REMOTE_SCREEN_STREAM:"ADD_REMOTE_SCREEN_STREAM",REMOVE_REMOTE_SCREEN_STREAM:"REMOVE_REMOTE_SCREEN_STREAM",TOGGLE_REMOTE_STREAM:"TOGGLE_REMOTE_STREAM",SUBMIT_RATING:"SUBMIT_RATING",SUBMIT_FEEDBACK:"SUBMIT_FEEDBACK",RATING_SHOWN:"RATING_SHOWN",FEEDBACK_SHOWN:"FEEDBACK_SHOWN"})}),null);
__d("RTCP2PCallActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({P2P_DISMISS_NUX:"P2P_DISMISS_NUX",P2P_INIT_NUX_STATE:"P2P_INIT_NUX_STATE",P2P_MARK_NUX_VIEWED:"P2P_MARK_NUX_VIEWED",P2P_PROCESS_MESSAGE:"P2P_PROCESS_MESSAGE",P2P_SET_IS_CALLER:"P2P_SET_IS_CALLER",P2P_STAR_RATING_DONE:"P2P_STAR_RATING_DONE",POP_IN_SCREEN_CONTENT:"POP_IN_SCREEN_CONTENT",POP_OUT_SCREEN_CONTENT:"POP_OUT_SCREEN_CONTENT",SET_CALL_TYPE:"SET_CALL_TYPE",SET_CONNECTION_STATUS:"SET_CONNECTION_STATUS",SET_MULTIWAY_ESCALATION_SUPPORT:"SET_MULTIWAY_ESCALATION_SUPPORT",SET_END_CALL_REASON:"SET_END_CALL_REASON",SET_REMOTE_SIGNALING_EXPERIMENTS:"SET_REMOTE_SIGNALING_EXPERIMENTS",SET_VIDEO_QUALITY:"SET_VIDEO_QUALITY"})}),null);
__d("RTCP2PConstants",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({INIT:null,CONTACTING:null,RINGING:null,CONNECTING:null,RECONNECTING:null,CONNECTED:null,DISCONNECTED:null});f.exports={ConnectionStatus:h}}),null);
__d("MessengerRTCFunnelLogger",["RTCP2PConstants","FunnelLogger","FBRTCConstants","URI","UserAgentData","RTCGroupCallActionTypes","FBRTCCallControlActions","RTCP2PCallActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("RTCP2PConstants").ConnectionStatus,i=c("FBRTCConstants").SignalingProtocol,j="WEB_MESSENGER_RTC_FUNNEL",k=c("FBRTCCallControlActions").Types,l=j+"_append",m=j+"_tags",n=j+"_end",o=null;function p(z){c("FunnelLogger").startFunnel(j);r([z]);q()}function q(){var z={bn:c("UserAgentData").browserName,bv:c("UserAgentData").browserVersion,os:c("UserAgentData").platformName,dn:c("URI").getRequestURI().getDomain().split(".").slice(-2).join(".")};Object.keys(z).forEach(function(A){c("FunnelLogger").addFunnelTag(j,A+":"+(z[A]||"unknown"))})}function r(z){if(window.opener&&window.opener.postMessage&&o){window.opener.postMessage({type:m,nonce:o,tags:z},window.location.origin);return}z.forEach(function(A){c("FunnelLogger").addFunnelTag(j,A)})}function s(z,A){if(window.opener&&window.opener.postMessage&&o){window.opener.postMessage({type:j+"_append",nonce:o,action:z,actionTag:A},window.location.origin);return}if(A===undefined)c("FunnelLogger").appendActionIfNew(j,z);else c("FunnelLogger").appendActionWithTag(j,z,A)}function t(z){if(window.opener&&window.opener.postMessage&&o){window.opener.postMessage({type:j+"_end",nonce:o,action:z},window.location.origin);return}if(z)s(z);c("FunnelLogger").endFunnel(j)}function u(z){o=z}function v(z){__p&&__p();var A=function A(event){__p&&__p();if(event.origin!==window.location.origin||!event.data||event.data.nonce!==z)return;if(event.data.type===l)s(event.data.action,event.data.actionTag);else if(event.data.type===m)r(event.data.tags);else if(event.data.type===n){t(event.data.action);window.removeEventListener("message",A)}};window.addEventListener("message",A)}function w(z,A){switch(z){case k.RECEIVED_SIGNALING_MESSAGE:break;case"END_CALL":s(z,A);t();break;default:s(z,A)}}function x(z,A){__p&&__p();switch(A.type){case c("RTCGroupCallActionTypes").ON_CONFERENCE_STATE:case c("RTCGroupCallActionTypes").SET_CALL_SUMMARY:case c("RTCGroupCallActionTypes").SET_DOMINANT_SPEAKER:case c("RTCGroupCallActionTypes").ON_SERVER_MEDIA_UPDATE_SUCCESS:case c("RTCGroupCallActionTypes").SET_GRID_VIEW:case c("RTCGroupCallActionTypes").SET_STRIP_VIEW:case c("RTCP2PCallActionTypes").SET_REMOTE_SIGNALING_EXPERIMENTS:case c("RTCP2PCallActionTypes").SET_CALL_TYPE:case c("RTCP2PCallActionTypes").P2P_INIT_NUX_STATE:break;case c("RTCP2PCallActionTypes").P2P_PROCESS_MESSAGE:var B=[];if(A.message&&!A.message.isRemoteVideoSupported())B.push("remove_video_unsupported");if(A.message&&A.message.isFromMobile())B.push("peer_on_mobile");else B.push("peer_on_web");r(B);break;case c("RTCP2PCallActionTypes").SET_CONNECTION_STATUS:s(A.connectionStatus);break;case c("RTCP2PCallActionTypes").SET_END_CALL_REASON:s(A.type,A.endCallReason&&A.endCallReason.toStrName(true));setTimeout(t,1e3);break;case c("RTCGroupCallActionTypes").INIT:if(A.protocol===i.P2P)r(["p2p","v2"]);break;case c("RTCGroupCallActionTypes").SET_LAYOUT:s(A.type,A.layout);break;case c("RTCGroupCallActionTypes").SET_MW_CALL_TYPE:s(A.type,A.callType);break;case c("RTCGroupCallActionTypes").END_CALL:s(A.type,A.endCallReason);break;default:s(A.type)}return z}var y={appendAction:s,addFunnelTags:r,endFunnel:t,startFunnel:p,setWindowNonce:u,listenCrossWindowAction:v,logRTCCallAction:x,logRTCP2PV1Action:w};f.exports=y}),null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],(function a(b,c,d,e,f,g){"use strict";var h={isCallable:function i(j){var k=c("PresenceStatus").getCapabilities(j),l=c("ChannelConstants").CAPABILITY_VOIP_INTEROP;return!!(k&l)}};f.exports=h}),null);
__d("FBRTCCallActions",["FBRTCDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({START_CALL:null}),i={Types:h,startCall:function j(k,l,m,n){c("FBRTCDispatcher").dispatch({type:h.START_CALL,peerID:k,callID:l,isCaller:m,audioOnly:n})}};f.exports=i}),null);
__d("FBRTCConfig",["CurrentUser","RTCSignalingExperiments"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=false,j=0,k={},l={setConfig:function m(n,o,p,q,r){k=n;j=o;h=q;i=r},isVCEndpointCall:function m(){return h},canPeerUseV2:function m(){return i},getPeerID:function m(){return j},statsInterpreterConfig:function m(){return{rtt_weight:2,frr_weight:800,plr_weight:500,score_threshold:1e3,bad_score_count:3}},settingsEnabled:function m(){return k.enable_settings},shouldAutoDisableVideo:function m(){return false},unsupportedBrowserUrl:function m(){if(k.troubleshooting_urls&&k.troubleshooting_urls.unsupported_browser)return k.troubleshooting_urls.unsupported_browser;if(c("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/919532078125908";else return"https://www.facebook.com/help/211644178877843"},userMediaErrorUrl:function m(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_error)return k.troubleshooting_urls.user_media_error;if(c("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},userMediaPermissionErrorUrl:function m(){if(k.troubleshooting_urls&&k.troubleshooting_urls.user_media_permission_error)return k.troubleshooting_urls.user_media_permission_error;if(c("CurrentUser").isWorkUser())return"https://www.facebook.com/help/work/180714775754632";else return"https://www.facebook.com/help/232232800134371"},supportedSignalingExperiments:function m(){return c("RTCSignalingExperiments").getLocal()},isMessengerDotCom:function m(){return k.is_messenger_dot_com},useMessengerCallUI:function m(){return k.messenger_call_ui},shouldCreateDataChannel:function m(){return k.data_channel},disableURLManager:function m(){return k.disable_url_manager},useCurrentWindow:function m(){return k.use_current_window}};f.exports=l}),null);
__d("FBRTCVersionDetection",[],(function a(b,c,d,e,f,g){__p&&__p();var h={isChrome:function i(){return!!navigator.webkitGetUserMedia},isFirefox:function i(){return!!navigator.mozGetUserMedia},webrtcVersion:function i(){if(this.isFirefox())return parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10);if(this.isChrome()){var j=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(j!==null)return parseInt(j[2],10);else return 999}return 0}};f.exports=h}),null);
__d("FBRTCUtils",["AsyncRequest","CollabCallTriggerType","CurrentUser","FBIDCheck","FBRTCConfig","FBRTCConstants","FBRTCVersionDetection","RTCConfig","UserAgent","emptyFunction","randomInt"],(function a(b,c,d,e,f,g){__p&&__p();var h=6e3,i=window.URL||window.webkitURL,j="setSinkId"in window.HTMLMediaElement.prototype,k="srcObject"in window.HTMLMediaElement.prototype,l="mozSrcObject"in window.HTMLMediaElement.prototype,m={attachMediaStream:function n(o,p){__p&&__p();if(o==null)return;if(k){o.srcObject=p;if(p)o.play();return}if(l){o.mozSrcObject=p;if(p)o.play();return}if(o.src)i.revokeObjectURL(o.src);o.src=p?i.createObjectURL(p):""},reattachMediaStream:function n(o,p){__p&&__p();if(k){o.srcObject=p.srcObject;o.play();return}if(l){o.mozSrcObject=p.mozSrcObject;o.play();return}o.src=p.src},generateRandomInt:function n(){return c("randomInt")(0,4294967294)+1},aboutEqual:function n(o,p){return o-p<.01&&p-o<.01},getUploadLogLevel:function n(o){return Math.max(this.getLocalUploadLogLevel(),o)},getLocalUploadLogLevel:function n(){return c("CurrentUser").isEmployee()?c("FBRTCConstants").UploadLogLevel.LL_DEBUG:c("FBRTCConstants").UploadLogLevel.LL_NONE},sendServerRequest:function n(o){var p=arguments.length<=1||arguments[1]===undefined?c("emptyFunction"):arguments[1],q=arguments.length<=2||arguments[2]===undefined?c("emptyFunction"):arguments[2],r=arguments.length<=3||arguments[3]===undefined?false:arguments[3],s=arguments.length<=4||arguments[4]===undefined?h:arguments[4],t=arguments.length<=5||arguments[5]===undefined?{}:arguments[5],u=new(c("AsyncRequest"))().setURI(o).setData(t).setAllowCrossPageTransition(true).setHandler(p).setErrorHandler(q).setTimeoutHandler(s,function(){q()});if(r)u.setOption("asynchronous_DEPRECATED",false);u.send()},supportsMultipleStreamsPlanB:function n(){return(c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera"))&&c("FBRTCVersionDetection").webrtcVersion()>=34},supportsSetSink:function n(){return j},isPeerVCEndpoint:function n(o){var p=c("FBRTCConfig").isVCEndpointCall();return p!==undefined?p:!!o&&!c("FBIDCheck").isUser_deprecated(o)&&c("RTCConfig").CollabVCEndpointsVideoCallGK},isCollabTrigger:function n(o){return o===c("CollabCallTriggerType").QUICK_DIAL||o===c("CollabCallTriggerType").MEETING_ROOM_PAGE_PROFILE}};f.exports=m}),null);
__d("FBRTCScreenSharingLogger",["Log","MarauderLogger","formatDate","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="webrtc_screen_sharing",i=c("keyMirror")({screen_sharing_action:null,screen_sharing_error:null}),j=c("keyMirror")({PEER_ID:null,SESSION_ID:null,CONTEXT_TYPE:null,CONTENT:null}),k=c("keyMirror")({SCREEN_SHARING_TOGGLED:null,SCREEN_SHARING_CANCELLED:null,SCREEN_SHARING_ENABLED:null,SCREEN_SHARING_DISABLED:null,SCREEN_SHARING_EXT_DIALOG:null,SCREEN_SHARING_EXT_LINK:null,SCREEN_SHARING_DIALOG_SUCCESS:null,SCREEN_SHARING_DIALOG_CANCEL:null}),l=null;m.getInstance=function(){if(!l)l=new m();return l};m.prototype.logAction=function(n,o,p,q){var r={};r[i.screen_sharing_action]=p;r[j.PEER_ID]=n;r[j.SESSION_ID]=o;r[j.CONTEXT_TYPE]=this.$FBRTCScreenSharingLogger1();r[j.CONTENT]=q;this.$FBRTCScreenSharingLogger2(i.screen_sharing_action,r);this.logToConsole(n,o,p)};m.prototype.logError=function(n,o,p){var q={};q[j.PEER_ID]=n;q[j.SESSION_ID]=o;q[j.CONTEXT_TYPE]=this.$FBRTCScreenSharingLogger1();q[j.CONTENT]=p;this.$FBRTCScreenSharingLogger2(i.screen_sharing_error,q);this.logToConsole(n,o,p)};m.prototype.logToConsole=function(n,o,p){};m.prototype.$FBRTCScreenSharingLogger1=function(){return"p2p_video_call"};m.prototype.$FBRTCScreenSharingLogger2=function(n,o){c("MarauderLogger").log(n,h,o)};function m(){}m.Action=k;f.exports=m}),null);
__d("FBRTCScreenSharingUtils",["Promise","FBRTCScreenSharingLogger","FBRTCStruct","FBRTCVersionDetection","RTCConfig","FBRTCSupport"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("FBRTCStruct"))(["UNKNOWN","INSTALLED"]),i=h.UNKNOWN,j={RECIPIENT:"SC_CONTENT_SCRIPT",isScreenSharingSupported:function k(){return c("RTCConfig").ScreenSharingGK},isGroupCallScreenSharingSupported:function k(){return c("RTCConfig").ScreenSharingToGroupGK},isSupportedBrowser:function k(){return c("FBRTCVersionDetection").isChrome()&&c("FBRTCVersionDetection").webrtcVersion()>=34},canUserReceiveScreenSharing:function k(){return c("FBRTCSupport").isOSSupported()&&c("FBRTCVersionDetection").isChrome()&&c("FBRTCVersionDetection").webrtcVersion()>=34},canPeerReceiveScreenSharing:function k(l){return l.remoteSupport("screen_sharing")||c("RTCConfig").ScreenSharingToMobileGK&&!l.remoteSupport("www")&&!l.remoteSupport("mweb")},isExtensionInstalled:function k(){return i===h.INSTALLED},getExtensionStatus:function k(){return i},checkExtensionInstalled:function k(){__p&&__p();if(this.isExtensionInstalled())return c("Promise").resolve();var l=void 0,m=new(c("Promise"))(function(n){__p&&__p();l=function o(p){var q=p.origin,r=p.data;if(q!=window.location.origin||!r.type)return;if(r.type==="SC_EXT_INSTALLED"){window.removeEventListener("message",l);i=h.INSTALLED;n()}};window.addEventListener("message",l)});return c("Promise").race([m,this._pokeExtension()])["catch"](function(n){window.removeEventListener("message",l);return c("Promise").reject(n)})},_pokeExtension:function k(){__p&&__p();var l=arguments.length<=0||arguments[0]===undefined?13:arguments[0];return new(c("Promise"))(function(m,n){var o=setInterval(function(){setTimeout(function(){if(i===h.UNKNOWN)window.postMessage({recipient:j.RECIPIENT,type:"SC_IS_EXT_INSTALLED",text:"is extension installed"},"*")});if(l>0)l--;else{clearInterval(o);n("extension unavailable")}},200)})},logFailedAttempt:function k(l,m){c("FBRTCScreenSharingLogger").getInstance().logAction(l,m,c("FBRTCScreenSharingLogger").Action.SCREEN_SHARING_TOGGLED,"feature not available")}};f.exports=j}),null);
__d("RTCSignalingExperiments",["FBRTCScreenSharingUtils","FBRTCSupport","FBRTCUtils","Set","UserAgent"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$RTCSignalingExperiments2=new(c("Set"))();this.$RTCSignalingExperiments1=new(c("Set"))(h.getLocal());if(i)this.$RTCSignalingExperiments2=new(c("Set"))(i)}h.prototype.getLocal=function(){return Array.from(this.$RTCSignalingExperiments1)};h.prototype.setRemote=function(i){if(!i)return this;return new h(i)};h.prototype.getRemote=function(){return Array.from(this.$RTCSignalingExperiments2)};h.prototype.support=function(i){return this.localSupport(i)&&this.remoteSupport(i)};h.prototype.localSupport=function(i){return this.$RTCSignalingExperiments1.has(i)};h.prototype.remoteSupport=function(i){return this.$RTCSignalingExperiments2.has(i)};h.getLocal=function(){__p&&__p();var i=[];if(c("UserAgent").isBrowser("Chrome")||c("UserAgent").isBrowser("Opera")||c("UserAgent").isBrowser("Firefox >= 38"))i.push("sdp_update");if(c("FBRTCUtils").supportsMultipleStreamsPlanB())i.push("multiple_streams_plan_b");if(c("FBRTCScreenSharingUtils").canUserReceiveScreenSharing())i.push("screen_sharing");if(c("FBRTCSupport").isOSSupported())i.push("www");else i.push("mweb");return i};f.exports=h}),null);
__d("FBRTCCallUIWrapper",["regeneratorRuntime","Bootloader","FBRTCCallActions","FBRTCConfig","FBRTCMessageListener","MessengerRTCFunnelLogger","UserAgent"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i={openGroupCallUI:function j(k,l,m,n,o,p){return c("regeneratorRuntime").async(function q(r){while(1)switch(r.prev=r.next){case 0:h=this._openWindow("Group Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(s){s.openGroupCallUI(k,l,m,n,o,h,p)},"FBRTCCallUIWrapper");case 2:case"end":return r.stop()}},null,this)},openGroupCallURI:function j(k,l,m,n,o,p){return c("regeneratorRuntime").async(function q(r){while(1)switch(r.prev=r.next){case 0:h=this._openWindow("Group Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(s){s.openGroupCallURI({conferenceName:k,callID:l,hasVideo:m,serverInfoData:n,trigger:o,callSummary:p,callWindow:h})},"FBRTCCallUIWrapper");case 2:case"end":return r.stop()}},null,this)},openAsCaller:function j(k,l,m,n){__p&&__p();if(!h&&window.rtcCallChildWindow){h=window.rtcCallChildWindow;window.rtcCallChildWindow=null}if(this._shouldFocusCallWindow(k)){h.focus();return}if(this._shouldCloseCallWindow())h.close();if(c("FBRTCConfig").useCurrentWindow()){c("FBRTCMessageListener").removeMessageHandler();c("FBRTCCallActions").startCall(k,l,true,n);c("Bootloader").loadModules(["FBRTCCallUI"],function(o){o.openAsCaller(k,l,m,n)},"FBRTCCallUIWrapper");return}h=this._openWindow("Video Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(o){o.openAsCaller(k,l,m,n,h)},"FBRTCCallUIWrapper")},openAsCallee:function j(k,l,m,n,o){__p&&__p();if(c("FBRTCConfig").useCurrentWindow()){c("FBRTCMessageListener").removeMessageHandler();c("FBRTCCallActions").startCall(k,l,false,o);c("Bootloader").loadModules(["FBRTCCallUI"],function(p){p.openAsCallee(k,l,m,n,o,null)},"FBRTCCallUIWrapper");return}h=this._openWindow("Video Call");c("Bootloader").loadModules(["FBRTCCallUI"],function(p){p.openAsCallee(k,l,m,n,o,h)},"FBRTCCallUIWrapper")},_shouldFocusCallWindow:function j(k){return h&&!h.closed&&h.rtcCallInProgessWith===k},_shouldCloseCallWindow:function j(){return h&&!h.closed&&!h.rtcCallInProgessWith},_openWindow:function j(k){var l=this._windowPosition(),m=["menubar=no","location=no","scrollbars=no","status=no","personalbar=no",l.height,l.width,l.top,l.left].join(",");if(this._isSparkBrowser())m="";var h=window.open("",k,m);window.callWindow=h;if(h)c("MessengerRTCFunnelLogger").appendAction("popup_window");else c("MessengerRTCFunnelLogger").endFunnel("popup_blocked");return h},_windowPosition:function j(){__p&&__p();var k=960,l=540,m,n,o,p;if(screen&&screen.width>1280){k=1280;l=720}if(window.innerWidth!==undefined){n=window.innerWidth;m=window.innerHeight}else{n=screen.width;m=screen.height}if(window.screenLeft!==undefined){o=window.screenLeft;p=window.screenTop}else{o=window.screenX;p=window.screenY}var q=Math.floor(n/2-k/2+o),r=Math.floor(m/2-l/2+p);return{height:"height="+l.toString(),width:"width="+k.toString(),top:"top="+r.toString(),left:"left="+q.toString()}},_isSparkBrowser:function j(){return c("UserAgent").isBrowser("Chrome < 34")&&c("UserAgent").isBrowser("Chrome > 33")}};f.exports=i}),null);
__d("FBRTCCore",["invariant","MessengerRTCFunnelLogger","Bootloader","FBRTCAvailability","FBRTCCallUIWrapper","FBRTCSupport","randomInt"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=false,j={startOutgoingCall:function k(l,m,n){__p&&__p();var o=arguments.length<=3||arguments[3]===undefined?false:arguments[3];!/\D/.test(l)||h(0);if(i)return;c("MessengerRTCFunnelLogger").addFunnelTags([n?"audio_only":"video","p2p"]);i=true;setTimeout(function(){i=false},1e3);if(o&&!c("FBRTCSupport").isCollabSupported())c("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage","CollabMessengerLogger"],function(q,r){q.showForUnsupportedCollabCall();r.logBrowserNotSupported({peerID:l});c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");else if(!c("FBRTCSupport").isWebrtcSupported())c("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage"],function(q){q.showForOutgoingCall();c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");else{var p=this._generateCallID();c("FBRTCCallUIWrapper").openAsCaller(l,p,m,n)}},startGroupCall:function k(l){__p&&__p();var m=l.conferenceName,n=l.hasVideo,o=l.serverInfoData,p=l.trigger,q=l.usersToRing,r=q===undefined?[]:q;if(i)return;c("MessengerRTCFunnelLogger").addFunnelTags([n?"video":"audio_only","group"]);i=true;setTimeout(function(){i=false},1e3);if(!c("FBRTCSupport").isGroupCallWebtrcSupported()){c("Bootloader").loadModules(["MessengerRTCGroupCallUnsupportedBrowserDialogController"],function(s){s.render({hasVideo:n});c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser")},"FBRTCCore");return}c("FBRTCCallUIWrapper").openGroupCallUI(m,this._generateCallID(),r,n,p,o)},isAvailableForWebrtcCalling:function k(l){return c("FBRTCAvailability").isCallable(l)},shouldEnableVideoCalling:function k(){return c("FBRTCSupport").isOSSupported()},startScreenSharingSession:function k(l,m){__p&&__p();!/\D/.test(l)||h(0);if(i)return;i=true;setTimeout(function(){i=false},1e3);if(!c("FBRTCSupport").isWirelessScreenSharingSupported()){c("Bootloader").loadModules(["FBRTCUnsupportedBrowserMessage","CollabMessengerLogger"],function(n,o){n.showForUnsupportedCollabScreenSharing();o.logBrowserNotSupported({peerID:l})},"FBRTCCore");return}c("Bootloader").loadModules(["RTCWirelessScreenSharingWindowHandler"],function(n){n.open(l,this._generateCallID(),m)}.bind(this),"FBRTCCore")},_generateCallID:function k(){return c("randomInt")(0,4294967295)}};f.exports=j}),null);
__d("FBRTCCallabilityActions",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions1=j}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k})};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j})};i.Types=h;f.exports=i}),null);
__d("XRTCCallabilityController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/rtc/callability/",{user_id:{type:"FBID",required:true}})}),null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","TimeSlice","XRTCCallabilityController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$FBRTCCallabilityDataManager1=new(c("FBRTCCallabilityActions"))(i)}h.prototype.fetchCallability=function(i){c("TimeSlice").guard(function(){var j=c("XRTCCallabilityController").getURIBuilder().setFBID("user_id",i).getURI(),k=this.$FBRTCCallabilityDataManager2.bind(this,i),l=this.$FBRTCCallabilityDataManager3.bind(this,i);new(c("AsyncRequest"))().setURI(j).setHandler(k).setErrorHandler(l).setAllowCrossPageTransition(true).send()}.bind(this),"Chat Tab RTC Callability Check",{isContinuation:false})()};h.prototype.$FBRTCCallabilityDataManager2=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetched(i,j.payload)};h.prototype.$FBRTCCallabilityDataManager3=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetchError(i)};f.exports=h}),null);
__d("RTCCallabilityStore",["fbt","Cache","FBRTCCallabilityActions","FBRTCCallabilityDataManager","FluxStore","RTCConfig"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=.5,l=5;i=babelHelpers.inherits(m,c("FluxStore"));j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$RTCCallabilityStore2=new(c("FBRTCCallabilityDataManager"))(n);this.$RTCCallabilityStore1=new(c("Cache"))()}m.prototype.__onDispatch=function(n){var o=n.type;switch(o){case c("FBRTCCallabilityActions").Types.CALLABILITY_FETCHED:var p=n.userID,q=n.callability;this.$RTCCallabilityStore1.set(p,q.is_callable,null,q.is_callable?l:k);this.__emitChange();break;case c("FBRTCCallabilityActions").Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(n.userID,false,null,k);this.__emitChange();break}};m.prototype.isCallable=function(n,o){var p=o?o.message_count>0&&o.folder==="inbox":false;if(!this.$RTCCallabilityStore1.has(n)){this.$RTCCallabilityStore2.fetchCallability(n);this.$RTCCallabilityStore1.set(n,false,null,k)}return(!!this.$RTCCallabilityStore1.get(n)||p)&&c("RTCConfig").WebReliabilityFixesLoggedGK};m.prototype.callButtonTooltip=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(p||this.isCallable(n))return h._("Start a video chat with {shortname}",[h.param("shortname",o)]);return h._("{shortname} is currently unavailable for video calling",[h.param("shortname",o)])};m.prototype.voiceCallButtonTooltip=function(n,o){var p=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(p||this.isCallable(n))return h._("Start a voice call with {shortname}",[h.param("shortname",o)]);return h._("{shortname} is currently unavailable for voice calling",[h.param("shortname",o)])};f.exports=m}),null);
__d("FBRTCCallabilityStore",["FBRTCDispatcher","RTCCallabilityStore"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("RTCCallabilityStore"))(c("FBRTCDispatcher"))}),null);
__d("RTCCallState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NO_ONGOING_CALL:"NO_ONGOING_CALL",AUDIO_GROUP_CALL:"AUDIO_GROUP_CALL",VIDEO_GROUP_CALL:"VIDEO_GROUP_CALL"})}),null);