if (self.CavalryLogger) { CavalryLogger.start_js(["yRW5V"]); }

__d("WorkAvailabilityStatusChangeSubscription.graphql",[],(function a(b,c,d,e,f,g){"use strict";var h=function(){var i=[{kind:"LocalArgument",name:"input",type:"WorkAvailabilityStatusChangeSubscribeData!",defaultValue:null}],j=[{kind:"LinkedField",alias:null,name:"work_availability_status_change_subscribe",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input",type:"WorkAvailabilityStatusChangeSubscribeData!"}],concreteType:"WorkAvailabilityStatusChangeSubscribeResponsePayload",plural:false,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:false,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"work_info",storageKey:null,args:null,concreteType:"WorkUserInfo",plural:false,selections:[{kind:"LinkedField",alias:null,name:"availability_status",storageKey:null,args:null,concreteType:"WorkUserAvailabilityStatus",plural:false,selections:[{kind:"ScalarField",alias:null,name:"status",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"end_date",args:null,storageKey:null}]}]}]}]}];return{kind:"Request",operationKind:"subscription",name:"WorkAvailabilityStatusChangeSubscription",id:"1790407270977053",text:null,metadata:{},fragment:{kind:"Fragment",name:"WorkAvailabilityStatusChangeSubscription",type:"Subscription",metadata:null,argumentDefinitions:i,selections:j},operation:{kind:"Operation",name:"WorkAvailabilityStatusChangeSubscription",argumentDefinitions:i,selections:j}}}();f.exports=h}),null);
__d("EnterpriseLabsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:EnterpriseLabsLoggerConfig",this.$EnterpriseLabsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:EnterpriseLabsLoggerConfig",this.$EnterpriseLabsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$EnterpriseLabsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$EnterpriseLabsTypedLogger1=babelHelpers["extends"]({},this.$EnterpriseLabsTypedLogger1,j);return this};h.prototype.setEntityID=function(j){this.$EnterpriseLabsTypedLogger1.entity_id=j;return this};h.prototype.setEvent=function(j){this.$EnterpriseLabsTypedLogger1.event=j;return this};h.prototype.setVC=function(j){this.$EnterpriseLabsTypedLogger1.vc=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$EnterpriseLabsTypedLogger1=babelHelpers["extends"]({},this.$EnterpriseLabsTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={entity_id:true,event:true,vc:true};f.exports=h}),null);
__d("WorkAvailabilityStatusChangeSubscription",["RelayModern","WorkAvailabilityStatusChangeSubscription.graphql"],(function a(b,c,d,e,f,g){"use strict";var h,i=c("RelayModern").graphql,j=c("RelayModern").requestSubscription;function k(l,m,n){var o={input:m};return j(l,{subscription:h||(h=function h(){return c("WorkAvailabilityStatusChangeSubscription.graphql")}),variables:o,onNext:n})}f.exports={subscribe:k}}),null);
__d("XCheckFocusModeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/work/focus_mode/check/",{fbid:{type:"FBID",required:true}})}),null);
__d("XDliteGraphQLSkywalkerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/dlite/skywalker_topic/",{})}),null);
__d("ChatSubscribeToFocusModeChanges",["AsyncRequest","ImmutableObject","RelayGraphQLSubscriber","RelayGraphQLSubscriptionNetworkLayer","RelayFBEnvironment","WorkAvailabilityStatusChangeSubscription","XDliteGraphQLSkywalkerController","MercuryServerPayloadPreprocessor","MercuryPayloadSource","WorkUserAvailabilityStatusType","MercuryThreadInformer","XCheckFocusModeAsyncController","MercuryParticipants","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("XDliteGraphQLSkywalkerController").getURIBuilder().getURI();c("RelayGraphQLSubscriptionNetworkLayer").injectGraphQLSubscriber(c("RelayGraphQLSubscriber")(h));var i={},j={},k=function k(m,n,o,p){var q=c("MercuryParticipants").getNow(o.id);if(!q)return;var r=c("ImmutableObject").setProperty(q,"is_user_focusing",p);c("MercuryServerPayloadPreprocessor").getForFBID(m).handleUpdate({participants:[r],from_client:false,payload_source:c("MercuryPayloadSource").SERVER_FETCH_PARTICIPANTS});Object.keys(j[n]).forEach(function(s){c("MercuryThreadInformer").getForFBID(m).updatedThread(s)})},l=function l(m,n,o){__p&&__p();var p=o.fbid;if(!p)return;if(!o.employee)return;if(m===p)return;if(!j[p])j[p]={};j[p][n]=n;if(i[p])return;var h=c("XCheckFocusModeAsyncController").getURIBuilder().setFBID("fbid",p).getURI();new(c("AsyncRequest"))().setURI(h).setHandler(function(q){var r=q.payload;if(!r)return;k(m,p,o,r.is_user_focusing)}).send();i[p]=c("WorkAvailabilityStatusChangeSubscription").subscribe(c("RelayFBEnvironment"),{user_id:p},function(q){var r,s=(r=q)!=null?(r=r.work_availability_status_change_subscribe)!=null?(r=r.user)!=null?(r=r.work_info)!=null?r.availability_status:r:r:r:r;if(s&&s.status&&s.end_date!==null){var t=c("WorkUserAvailabilityStatusType")[s.status],u=t===c("WorkUserAvailabilityStatusType").FOCUS&&s.end_date*1e3>Date.now();k(m,p,o,u)}})};f.exports={subscribe:l}}),null);
__d("EnterpriseLabsLoggingEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FOCUS_MODE_MESSAGE_SENT_ASYNC:"enterprise_labs.focus_mode.send_message_async",FOCUS_MODE_MESSAGE_SENT_BYPASSED:"enterprise_labs.focus_mode.send_message_bypassed",FOCUS_MODE_SENT_NO_MESSAGES:"enterprise_labs.focus_mode.sent_no_messages",FOCUS_MODE_BYPASS_THREAD:"enterprise_labs.focus_mode.bypass_thread",FOCUS_MODE_BYPASS_FAILURE:"enterprise_labs.focus_mode.bypass_failure",FOCUS_MODE_MUTE_NOTIFICATION:"enterprise_labs.focus_mode.mute_notification",DUALITY_WARNING_SHOWN:"enterprise_labs.duality.warning_shown",DUALITY_WARNING_DISMISSED:"enterprise_labs.duality.warning_dismissed",DUALITY_SWITCH_USER:"enterprise_labs.duality.switch_user",DUALITY_SWITCH_ACCOUNTS:"enterprise_labs.duality.switch_accounts",HIJACKED_DUALITY_WARNING_SHOWN:"enterprise_labs.hijacked_duality.warning_shown",HIJACKED_DUALITY_WARNING_DISMISSED:"enterprise_labs.hijacked_duality.warning_dismissed",HIJACKED_DUALITY_SWITCH_USER:"enterprise_labs.hijacked_duality.switch_user",TIMEZONE_WARNING_SHOWN:"enterprise_labs.timezone.warning_shown",TIMEZONE_WARNING_IGNORED:"enterprise_labs.timezone.warning_ignored",TIMEZONE_WARNING_DISMISSED:"enterprise_labs.timezone.warning_dismissed",NT_CLICK_TAB:"enterprise_labs.nt.click.tab"})}),null);
__d("ChatUserFocusLogging",["EnterpriseLabsLoggingEvents","EnterpriseLabsTypedLogger","FantaDispatcher","FantaTabActions","MercuryDispatcher","MercuryPayloadSource","MercuryThreads"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MercuryDispatcher").get(),i=c("MercuryThreads").get(),j={},k=function k(n,o){__p&&__p();try{if(o.payload_source!==c("MercuryPayloadSource").CLIENT_SEND_MESSAGE)return;var p=o.actions||[];p.forEach(function(r){__p&&__p();var s=r.thread_id;if(!s||!j[s])return;var t=i.getThreadMetaNow(s);if(!t)return;var u=(t.bypass_focus_mode_until||0)*1e3>Date.now();j[r.thread_id].messagesSent=true;var v=u?c("EnterpriseLabsLoggingEvents").FOCUS_MODE_MESSAGE_SENT_BYPASSED:c("EnterpriseLabsLoggingEvents").FOCUS_MODE_MESSAGE_SENT_ASYNC;new(c("EnterpriseLabsTypedLogger"))().setEntityID(s).setEvent(v).log()})}catch(q){return}},l=function l(n){__p&&__p();try{if(n.actionType===c("FantaTabActions").Types.CLOSE_TAB){var o=j[n.threadID];if(!o)return;if(!o.messagesSent&&!o.closed)new(c("EnterpriseLabsTypedLogger"))().setEntityID(n.threadID).setEvent(c("EnterpriseLabsLoggingEvents").FOCUS_MODE_SENT_NO_MESSAGES).log();o.closed=true}}catch(p){return}};h.subscribe("update-messages",k);c("FantaDispatcher").register(l);m.prototype.registerThreadID=function(n){if(j[n]&&!j[n].closed)return;j[n]={messagesSent:false,closed:false}};function m(){}f.exports=new m()}),null);
__d("ChatUserFocusWarning",["MercuryParticipants","MercuryViewer","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=void 0,i=void 0,j=function j(m){if(!h)c("ifRequired")("ChatUserFocusLogging",function(n){return h=n},c("emptyFunction"));if(h&&h.registerThreadID)h.registerThreadID(m)},k=function k(m,n,o){if(!i)c("ifRequired")("ChatSubscribeToFocusModeChanges",function(p){i=p},c("emptyFunction"));if(i&&i.subscribe)i.subscribe(m,n,o)},l={updateUserFocusWarning:function m(n,o,p){__p&&__p();c("MercuryParticipants").get(c("MercuryViewer").getID(),function(q){__p&&__p();var r=q.employee;if(r)c("MercuryParticipants").getMulti(n.participants,function(s){__p&&__p();var t=false;for(var u in s){if(q.id!==s[u].id&&s[u].is_user_focusing)t=true;if(s[u].employee&&q.fbid)k(q.fbid,n.thread_id,s[u])}if(t){j(n.thread_id);var v=n&&n.bypass_focus_mode_until&&n.bypass_focus_mode_until>Date.now()/1e3;o(v)}else p()})})}};f.exports=l}),null);
__d("MercurySyncSeqIDsObserver",["Arbiter","Bootloader","ChannelConstants","MercurySingletonProvider","MercurySyncDeltaTypes","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){this.deltas=0;this.holes=0;this.malformed=0;this.noops=0;this.topSeqID=0;this.name=k}h.prototype.shouldLog=function(){return this.deltas>100||this.holes>10||this.malformed>10||this.noops>10};h.prototype.reset=function(){this.deltas=0;this.holes=0;this.malformed=0;this.noops=0};i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MercurySyncSeqIDsObserver1=k;this.$MercurySyncSeqIDsObserver5=new h("c");this.$MercurySyncSeqIDsObserver6=new h("t");this.$MercurySyncSeqIDsObserver2=false}i.prototype.subscribe=function(){__p&&__p();this.$MercurySyncSeqIDsObserver3=c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("delta"),function(k,l){__p&&__p();var m,n,o,p=(m=l)!=null?(m=m.obj)!=null?m.queue:m:m;if(p)if(p.toString()!==this.$MercurySyncSeqIDsObserver1)return;var q=(n=l)!=null?(n=n.obj)!=null?n.delta:n:n,r=(o=l)!=null?(o=o.obj)!=null?o.iseq:o:o;if(!q||!r)return;else{var s=r-this.$MercurySyncSeqIDsObserver5.topSeqID;if(s>1&&s!==r)this.$MercurySyncSeqIDsObserver5.holes++;else if(q["class"]===c("MercurySyncDeltaTypes").NoOp)this.$MercurySyncSeqIDsObserver5.noops++;this.$MercurySyncSeqIDsObserver5.topSeqID=r}this.$MercurySyncSeqIDsObserver5.deltas++;if(this.$MercurySyncSeqIDsObserver5.shouldLog())this.log()}.bind(this));this.$MercurySyncSeqIDsObserver4=c("Arbiter").subscribe("sse-delta",function(k,l){__p&&__p();if(!l)this.$MercurySyncSeqIDsObserver6.malformed++;else{var m=l.seqID,n=l.delta;if(!n||!m)this.$MercurySyncSeqIDsObserver6.malformed++;else{var o=m-this.$MercurySyncSeqIDsObserver6.topSeqID;if(o>1&&o!==m)this.$MercurySyncSeqIDsObserver6.holes++;else if(n["class"]===c("MercurySyncDeltaTypes").NoOp)this.$MercurySyncSeqIDsObserver6.noops++;this.$MercurySyncSeqIDsObserver6.topSeqID=m}}this.$MercurySyncSeqIDsObserver6.deltas++;if(this.$MercurySyncSeqIDsObserver6.shouldLog())this.log()}.bind(this))};i.prototype.log=function(){if(this.$MercurySyncSeqIDsObserver2)return;this.$MercurySyncSeqIDsObserver2=true;c("Bootloader").loadModules(["MercuryRTTestsTypedLogger"],function(k){new k().setTest("sse").setCDeltas(this.$MercurySyncSeqIDsObserver5.deltas).setCHoles(this.$MercurySyncSeqIDsObserver5.holes).setCMalformed(this.$MercurySyncSeqIDsObserver5.malformed).setCNoops(this.$MercurySyncSeqIDsObserver5.noops).setCSeqid(this.$MercurySyncSeqIDsObserver5.topSeqID).setTDeltas(this.$MercurySyncSeqIDsObserver6.deltas).setTHoles(this.$MercurySyncSeqIDsObserver6.holes).setTMalformed(this.$MercurySyncSeqIDsObserver6.malformed).setTNoops(this.$MercurySyncSeqIDsObserver6.noops).setTSeqid(this.$MercurySyncSeqIDsObserver6.topSeqID).log();this.$MercurySyncSeqIDsObserver6.reset();this.$MercurySyncSeqIDsObserver5.reset();this.$MercurySyncSeqIDsObserver2=false}.bind(this),"MercurySyncSeqIDsObserver")};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);
__d("MessengerSSERawDeltaPreprocessor",[],(function a(b,c,d,e,f,g){"use strict";var h={preProcess:function i(j){return{delta:j.delta,seqID:j.iseq}}};f.exports=h}),null);
__d("MessengerSSEConnection",["invariant","Arbiter","Bootloader","ChannelClientID","MercurySingletonProvider","MercurySyncSeqIDsObserver","MessengerSSEConnectionWorkerResource","MessengerSSERawDeltaPreprocessor","URI","WebWorker"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();i.getForFBID=function(k){return j.getForFBID(k)};i.get=function(){return j.get()};function i(k){this.$MessengerSSEConnection1=k;this.$MessengerSSEConnection2=c("ChannelClientID").getID();this.$MessengerSSEConnection3=localStorage.getItem("sseST")}i.setUp=function(k){var l=k.queryData.accountId||k.queryData.userId;!!l||h(0);c("MercurySyncSeqIDsObserver").getForFBID(l).subscribe();var m=i.getForFBID(l);m.setupStreaming(k)};i.prototype.setupStreaming=function(k){__p&&__p();var l={deviceId:this.$MessengerSSEConnection2,clientId:this.$MessengerSSEConnection2};if(this.$MessengerSSEConnection3)l.syncToken=this.$MessengerSSEConnection3;var m=new(c("URI"))(k.uri);m.addQueryData(k.queryData);m.addQueryData(l);var n={type:"init",fbid:this.$MessengerSSEConnection1,uri:m.toString()};if(c("WebWorker").isSupported()){var o=new(c("WebWorker"))(c("MessengerSSEConnectionWorkerResource"));o.setMessageHandler(function(p){if(p.fbid!==this.$MessengerSSEConnection1)return;switch(p.type){case"prime":this.$MessengerSSEConnection6(p.payload);break;case"delta":this.$MessengerSSEConnection7(p.payload);break}}.bind(this)).setAllowCrossPageTransition(true).execute().postMessage(n);this.$MessengerSSEConnection4=o}else c("Bootloader").loadModules(["MessengerSSERawConnection"],function(p){__p&&__p();var q=p.getForFBID(n.fbid);q.connect(n.uri);c("Arbiter").subscribe("ww-msse-prime",function(r,s){var t=s.fbid,u=s.payload;if(t===this.$MessengerSSEConnection1)this.$MessengerSSEConnection6(u)}.bind(this));c("Arbiter").subscribe("ww-msse-delta",function(r,s){var t=s.fbid,u=s.payload;if(t===this.$MessengerSSEConnection1)this.$MessengerSSEConnection7(u)}.bind(this));this.$MessengerSSEConnection5=q}.bind(this),"MessengerSSEConnection")};i.prototype.$MessengerSSEConnection7=function(k){c("Arbiter").inform("sse-delta",k)};i.prototype.$MessengerSSEConnection6=function(k){if(k.syncToken)localStorage.setItem("sseST",String(k.syncToken))};var j=new(c("MercurySingletonProvider"))(i);f.exports=i}),null);